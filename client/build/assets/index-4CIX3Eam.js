(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Dc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Pc(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Nc={exports:{}},_s={},Cc={exports:{}},z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pi=Symbol.for("react.element"),jv=Symbol.for("react.portal"),Bv=Symbol.for("react.fragment"),Fv=Symbol.for("react.strict_mode"),zv=Symbol.for("react.profiler"),$v=Symbol.for("react.provider"),Uv=Symbol.for("react.context"),Vv=Symbol.for("react.forward_ref"),Hv=Symbol.for("react.suspense"),Wv=Symbol.for("react.memo"),Qv=Symbol.for("react.lazy"),nf=Symbol.iterator;function qv(e){return e===null||typeof e!="object"?null:(e=nf&&e[nf]||e["@@iterator"],typeof e=="function"?e:null)}var Lc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kc=Object.assign,Ac={};function _r(e,t,n){this.props=e,this.context=t,this.refs=Ac,this.updater=n||Lc}_r.prototype.isReactComponent={};_r.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};_r.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ic(){}Ic.prototype=_r.prototype;function bl(e,t,n){this.props=e,this.context=t,this.refs=Ac,this.updater=n||Lc}var jl=bl.prototype=new Ic;jl.constructor=bl;kc(jl,_r.prototype);jl.isPureReactComponent=!0;var rf=Array.isArray,Mc=Object.prototype.hasOwnProperty,Bl={current:null},xc={key:!0,ref:!0,__self:!0,__source:!0};function bc(e,t,n){var r,i={},o=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)Mc.call(t,r)&&!xc.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var l=Array(u),a=0;a<u;a++)l[a]=arguments[a+2];i.children=l}if(e&&e.defaultProps)for(r in u=e.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:Pi,type:e,key:o,ref:s,props:i,_owner:Bl.current}}function Yv(e,t){return{$$typeof:Pi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Fl(e){return typeof e=="object"&&e!==null&&e.$$typeof===Pi}function Gv(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var of=/\/+/g;function ru(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Gv(""+e.key):t.toString(36)}function fo(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Pi:case jv:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+ru(s,0):r,rf(i)?(n="",e!=null&&(n=e.replace(of,"$&/")+"/"),fo(i,t,n,"",function(a){return a})):i!=null&&(Fl(i)&&(i=Yv(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(of,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",rf(e))for(var u=0;u<e.length;u++){o=e[u];var l=r+ru(o,u);s+=fo(o,t,n,l,i)}else if(l=qv(e),typeof l=="function")for(e=l.call(e),u=0;!(o=e.next()).done;)o=o.value,l=r+ru(o,u++),s+=fo(o,t,n,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function qi(e,t,n){if(e==null)return e;var r=[],i=0;return fo(e,r,"","",function(o){return t.call(n,o,i++)}),r}function Kv(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Te={current:null},co={transition:null},Xv={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:co,ReactCurrentOwner:Bl};z.Children={map:qi,forEach:function(e,t,n){qi(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return qi(e,function(){t++}),t},toArray:function(e){return qi(e,function(t){return t})||[]},only:function(e){if(!Fl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};z.Component=_r;z.Fragment=Bv;z.Profiler=zv;z.PureComponent=bl;z.StrictMode=Fv;z.Suspense=Hv;z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xv;z.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=kc({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=Bl.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)Mc.call(t,l)&&!xc.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&u!==void 0?u[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){u=Array(l);for(var a=0;a<l;a++)u[a]=arguments[a+2];r.children=u}return{$$typeof:Pi,type:e.type,key:i,ref:o,props:r,_owner:s}};z.createContext=function(e){return e={$$typeof:Uv,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:$v,_context:e},e.Consumer=e};z.createElement=bc;z.createFactory=function(e){var t=bc.bind(null,e);return t.type=e,t};z.createRef=function(){return{current:null}};z.forwardRef=function(e){return{$$typeof:Vv,render:e}};z.isValidElement=Fl;z.lazy=function(e){return{$$typeof:Qv,_payload:{_status:-1,_result:e},_init:Kv}};z.memo=function(e,t){return{$$typeof:Wv,type:e,compare:t===void 0?null:t}};z.startTransition=function(e){var t=co.transition;co.transition={};try{e()}finally{co.transition=t}};z.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};z.useCallback=function(e,t){return Te.current.useCallback(e,t)};z.useContext=function(e){return Te.current.useContext(e)};z.useDebugValue=function(){};z.useDeferredValue=function(e){return Te.current.useDeferredValue(e)};z.useEffect=function(e,t){return Te.current.useEffect(e,t)};z.useId=function(){return Te.current.useId()};z.useImperativeHandle=function(e,t,n){return Te.current.useImperativeHandle(e,t,n)};z.useInsertionEffect=function(e,t){return Te.current.useInsertionEffect(e,t)};z.useLayoutEffect=function(e,t){return Te.current.useLayoutEffect(e,t)};z.useMemo=function(e,t){return Te.current.useMemo(e,t)};z.useReducer=function(e,t,n){return Te.current.useReducer(e,t,n)};z.useRef=function(e){return Te.current.useRef(e)};z.useState=function(e){return Te.current.useState(e)};z.useSyncExternalStore=function(e,t,n){return Te.current.useSyncExternalStore(e,t,n)};z.useTransition=function(){return Te.current.useTransition()};z.version="18.2.0";Cc.exports=z;var Zr=Cc.exports;const Jv=Dc(Zr);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv=Zr,ey=Symbol.for("react.element"),ty=Symbol.for("react.fragment"),ny=Object.prototype.hasOwnProperty,ry=Zv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iy={key:!0,ref:!0,__self:!0,__source:!0};function jc(e,t,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)ny.call(t,r)&&!iy.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:ey,type:e,key:o,ref:s,props:i,_owner:ry.current}}_s.Fragment=ty;_s.jsx=jc;_s.jsxs=jc;Nc.exports=_s;var Iu=Nc.exports,Mu={},Bc={exports:{}},Ue={},Fc={exports:{}},zc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,I){var B=P.length;P.push(I);e:for(;0<B;){var ne=B-1>>>1,le=P[ne];if(0<i(le,I))P[ne]=I,P[B]=le,B=ne;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var I=P[0],B=P.pop();if(B!==I){P[0]=B;e:for(var ne=0,le=P.length,Wi=le>>>1;ne<Wi;){var yn=2*(ne+1)-1,nu=P[yn],mn=yn+1,Qi=P[mn];if(0>i(nu,B))mn<le&&0>i(Qi,nu)?(P[ne]=Qi,P[mn]=B,ne=mn):(P[ne]=nu,P[yn]=B,ne=yn);else if(mn<le&&0>i(Qi,B))P[ne]=Qi,P[mn]=B,ne=mn;else break e}}return I}function i(P,I){var B=P.sortIndex-I.sortIndex;return B!==0?B:P.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();e.unstable_now=function(){return s.now()-u}}var l=[],a=[],f=1,p=null,h=3,y=!1,m=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,c=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function d(P){for(var I=n(a);I!==null;){if(I.callback===null)r(a);else if(I.startTime<=P)r(a),I.sortIndex=I.expirationTime,t(l,I);else break;I=n(a)}}function _(P){if(g=!1,d(P),!m)if(n(l)!==null)m=!0,eu(E);else{var I=n(a);I!==null&&tu(_,I.startTime-P)}}function E(P,I){m=!1,g&&(g=!1,v(T),T=-1),y=!0;var B=h;try{for(d(I),p=n(l);p!==null&&(!(p.expirationTime>I)||P&&!Z());){var ne=p.callback;if(typeof ne=="function"){p.callback=null,h=p.priorityLevel;var le=ne(p.expirationTime<=I);I=e.unstable_now(),typeof le=="function"?p.callback=le:p===n(l)&&r(l),d(I)}else r(l);p=n(l)}if(p!==null)var Wi=!0;else{var yn=n(a);yn!==null&&tu(_,yn.startTime-I),Wi=!1}return Wi}finally{p=null,h=B,y=!1}}var S=!1,R=null,T=-1,C=5,L=-1;function Z(){return!(e.unstable_now()-L<C)}function bt(){if(R!==null){var P=e.unstable_now();L=P;var I=!0;try{I=R(!0,P)}finally{I?pt():(S=!1,R=null)}}else S=!1}var pt;if(typeof c=="function")pt=function(){c(bt)};else if(typeof MessageChannel<"u"){var tf=new MessageChannel,bv=tf.port2;tf.port1.onmessage=bt,pt=function(){bv.postMessage(null)}}else pt=function(){w(bt,0)};function eu(P){R=P,S||(S=!0,pt())}function tu(P,I){T=w(function(){P(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){m||y||(m=!0,eu(E))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(P){switch(h){case 1:case 2:case 3:var I=3;break;default:I=h}var B=h;h=I;try{return P()}finally{h=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,I){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var B=h;h=P;try{return I()}finally{h=B}},e.unstable_scheduleCallback=function(P,I,B){var ne=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?ne+B:ne):B=ne,P){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=B+le,P={id:f++,callback:I,priorityLevel:P,startTime:B,expirationTime:le,sortIndex:-1},B>ne?(P.sortIndex=B,t(a,P),n(l)===null&&P===n(a)&&(g?(v(T),T=-1):g=!0,tu(_,B-ne))):(P.sortIndex=le,t(l,P),m||y||(m=!0,eu(E))),P},e.unstable_shouldYield=Z,e.unstable_wrapCallback=function(P){var I=h;return function(){var B=h;h=I;try{return P.apply(this,arguments)}finally{h=B}}}})(zc);Fc.exports=zc;var oy=Fc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $c=Zr,Fe=oy;function O(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Uc=new Set,ei={};function Mn(e,t){or(e,t),or(e+"Capture",t)}function or(e,t){for(ei[e]=t,e=0;e<t.length;e++)Uc.add(t[e])}var Ct=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xu=Object.prototype.hasOwnProperty,sy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sf={},uf={};function uy(e){return xu.call(uf,e)?!0:xu.call(sf,e)?!1:sy.test(e)?uf[e]=!0:(sf[e]=!0,!1)}function ly(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ay(e,t,n,r){if(t===null||typeof t>"u"||ly(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function De(e,t,n,r,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ve[e]=new De(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ve[t]=new De(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ve[e]=new De(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ve[e]=new De(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ve[e]=new De(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ve[e]=new De(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ve[e]=new De(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ve[e]=new De(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ve[e]=new De(e,5,!1,e.toLowerCase(),null,!1,!1)});var zl=/[\-:]([a-z])/g;function $l(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(zl,$l);ve[t]=new De(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(zl,$l);ve[t]=new De(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(zl,$l);ve[t]=new De(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ve[e]=new De(e,1,!1,e.toLowerCase(),null,!1,!1)});ve.xlinkHref=new De("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ve[e]=new De(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ul(e,t,n,r){var i=ve.hasOwnProperty(t)?ve[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(ay(t,n,i,r)&&(n=null),r||i===null?uy(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Mt=$c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yi=Symbol.for("react.element"),Bn=Symbol.for("react.portal"),Fn=Symbol.for("react.fragment"),Vl=Symbol.for("react.strict_mode"),bu=Symbol.for("react.profiler"),Vc=Symbol.for("react.provider"),Hc=Symbol.for("react.context"),Hl=Symbol.for("react.forward_ref"),ju=Symbol.for("react.suspense"),Bu=Symbol.for("react.suspense_list"),Wl=Symbol.for("react.memo"),Bt=Symbol.for("react.lazy"),Wc=Symbol.for("react.offscreen"),lf=Symbol.iterator;function Cr(e){return e===null||typeof e!="object"?null:(e=lf&&e[lf]||e["@@iterator"],typeof e=="function"?e:null)}var X=Object.assign,iu;function jr(e){if(iu===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);iu=t&&t[1]||""}return`
`+iu+e}var ou=!1;function su(e,t){if(!e||ou)return"";ou=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(a){var r=a}Reflect.construct(e,[],t)}else{try{t.call()}catch(a){r=a}e.call(t.prototype)}else{try{throw Error()}catch(a){r=a}e()}}catch(a){if(a&&r&&typeof a.stack=="string"){for(var i=a.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,u=o.length-1;1<=s&&0<=u&&i[s]!==o[u];)u--;for(;1<=s&&0<=u;s--,u--)if(i[s]!==o[u]){if(s!==1||u!==1)do if(s--,u--,0>u||i[s]!==o[u]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=u);break}}}finally{ou=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?jr(e):""}function fy(e){switch(e.tag){case 5:return jr(e.type);case 16:return jr("Lazy");case 13:return jr("Suspense");case 19:return jr("SuspenseList");case 0:case 2:case 15:return e=su(e.type,!1),e;case 11:return e=su(e.type.render,!1),e;case 1:return e=su(e.type,!0),e;default:return""}}function Fu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Fn:return"Fragment";case Bn:return"Portal";case bu:return"Profiler";case Vl:return"StrictMode";case ju:return"Suspense";case Bu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Hc:return(e.displayName||"Context")+".Consumer";case Vc:return(e._context.displayName||"Context")+".Provider";case Hl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Wl:return t=e.displayName||null,t!==null?t:Fu(e.type)||"Memo";case Bt:t=e._payload,e=e._init;try{return Fu(e(t))}catch{}}return null}function cy(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fu(t);case 8:return t===Vl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function tn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Qc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function py(e){var t=Qc(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gi(e){e._valueTracker||(e._valueTracker=py(e))}function qc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Qc(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function To(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function zu(e,t){var n=t.checked;return X({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function af(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=tn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Yc(e,t){t=t.checked,t!=null&&Ul(e,"checked",t,!1)}function $u(e,t){Yc(e,t);var n=tn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Uu(e,t.type,n):t.hasOwnProperty("defaultValue")&&Uu(e,t.type,tn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ff(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Uu(e,t,n){(t!=="number"||To(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Br=Array.isArray;function Xn(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+tn(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Vu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(O(91));return X({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function cf(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(O(92));if(Br(n)){if(1<n.length)throw Error(O(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:tn(n)}}function Gc(e,t){var n=tn(t.value),r=tn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function pf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Kc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Kc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ki,Xc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ki=Ki||document.createElement("div"),Ki.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ki.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ti(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Vr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hy=["Webkit","ms","Moz","O"];Object.keys(Vr).forEach(function(e){hy.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Vr[t]=Vr[e]})});function Jc(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Vr.hasOwnProperty(e)&&Vr[e]?(""+t).trim():t+"px"}function Zc(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Jc(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var dy=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wu(e,t){if(t){if(dy[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(O(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(O(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(O(61))}if(t.style!=null&&typeof t.style!="object")throw Error(O(62))}}function Qu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qu=null;function Ql(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Yu=null,Jn=null,Zn=null;function hf(e){if(e=Li(e)){if(typeof Yu!="function")throw Error(O(280));var t=e.stateNode;t&&(t=Rs(t),Yu(e.stateNode,e.type,t))}}function ep(e){Jn?Zn?Zn.push(e):Zn=[e]:Jn=e}function tp(){if(Jn){var e=Jn,t=Zn;if(Zn=Jn=null,hf(e),t)for(e=0;e<t.length;e++)hf(t[e])}}function np(e,t){return e(t)}function rp(){}var uu=!1;function ip(e,t,n){if(uu)return e(t,n);uu=!0;try{return np(e,t,n)}finally{uu=!1,(Jn!==null||Zn!==null)&&(rp(),tp())}}function ni(e,t){var n=e.stateNode;if(n===null)return null;var r=Rs(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(O(231,t,typeof n));return n}var Gu=!1;if(Ct)try{var Lr={};Object.defineProperty(Lr,"passive",{get:function(){Gu=!0}}),window.addEventListener("test",Lr,Lr),window.removeEventListener("test",Lr,Lr)}catch{Gu=!1}function vy(e,t,n,r,i,o,s,u,l){var a=Array.prototype.slice.call(arguments,3);try{t.apply(n,a)}catch(f){this.onError(f)}}var Hr=!1,Do=null,Po=!1,Ku=null,yy={onError:function(e){Hr=!0,Do=e}};function my(e,t,n,r,i,o,s,u,l){Hr=!1,Do=null,vy.apply(yy,arguments)}function _y(e,t,n,r,i,o,s,u,l){if(my.apply(this,arguments),Hr){if(Hr){var a=Do;Hr=!1,Do=null}else throw Error(O(198));Po||(Po=!0,Ku=a)}}function xn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function op(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function df(e){if(xn(e)!==e)throw Error(O(188))}function gy(e){var t=e.alternate;if(!t){if(t=xn(e),t===null)throw Error(O(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return df(i),e;if(o===r)return df(i),t;o=o.sibling}throw Error(O(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(O(189))}}if(n.alternate!==r)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?e:t}function sp(e){return e=gy(e),e!==null?up(e):null}function up(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=up(e);if(t!==null)return t;e=e.sibling}return null}var lp=Fe.unstable_scheduleCallback,vf=Fe.unstable_cancelCallback,Ey=Fe.unstable_shouldYield,Sy=Fe.unstable_requestPaint,re=Fe.unstable_now,Oy=Fe.unstable_getCurrentPriorityLevel,ql=Fe.unstable_ImmediatePriority,ap=Fe.unstable_UserBlockingPriority,No=Fe.unstable_NormalPriority,Ry=Fe.unstable_LowPriority,fp=Fe.unstable_IdlePriority,gs=null,mt=null;function wy(e){if(mt&&typeof mt.onCommitFiberRoot=="function")try{mt.onCommitFiberRoot(gs,e,void 0,(e.current.flags&128)===128)}catch{}}var it=Math.clz32?Math.clz32:Py,Ty=Math.log,Dy=Math.LN2;function Py(e){return e>>>=0,e===0?32:31-(Ty(e)/Dy|0)|0}var Xi=64,Ji=4194304;function Fr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Co(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=n&268435455;if(s!==0){var u=s&~i;u!==0?r=Fr(u):(o&=s,o!==0&&(r=Fr(o)))}else s=n&~i,s!==0?r=Fr(s):o!==0&&(r=Fr(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-it(t),i=1<<n,r|=e[n],t&=~i;return r}function Ny(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cy(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-it(o),u=1<<s,l=i[s];l===-1?(!(u&n)||u&r)&&(i[s]=Ny(u,t)):l<=t&&(e.expiredLanes|=u),o&=~u}}function Xu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function cp(){var e=Xi;return Xi<<=1,!(Xi&4194240)&&(Xi=64),e}function lu(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ni(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-it(t),e[t]=n}function Ly(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-it(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function Yl(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var V=0;function pp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var hp,Gl,dp,vp,yp,Ju=!1,Zi=[],Wt=null,Qt=null,qt=null,ri=new Map,ii=new Map,zt=[],ky="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yf(e,t){switch(e){case"focusin":case"focusout":Wt=null;break;case"dragenter":case"dragleave":Qt=null;break;case"mouseover":case"mouseout":qt=null;break;case"pointerover":case"pointerout":ri.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ii.delete(t.pointerId)}}function kr(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Li(t),t!==null&&Gl(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Ay(e,t,n,r,i){switch(t){case"focusin":return Wt=kr(Wt,e,t,n,r,i),!0;case"dragenter":return Qt=kr(Qt,e,t,n,r,i),!0;case"mouseover":return qt=kr(qt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return ri.set(o,kr(ri.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ii.set(o,kr(ii.get(o)||null,e,t,n,r,i)),!0}return!1}function mp(e){var t=Sn(e.target);if(t!==null){var n=xn(t);if(n!==null){if(t=n.tag,t===13){if(t=op(n),t!==null){e.blockedOn=t,yp(e.priority,function(){dp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function po(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);qu=r,n.target.dispatchEvent(r),qu=null}else return t=Li(n),t!==null&&Gl(t),e.blockedOn=n,!1;t.shift()}return!0}function mf(e,t,n){po(e)&&n.delete(t)}function Iy(){Ju=!1,Wt!==null&&po(Wt)&&(Wt=null),Qt!==null&&po(Qt)&&(Qt=null),qt!==null&&po(qt)&&(qt=null),ri.forEach(mf),ii.forEach(mf)}function Ar(e,t){e.blockedOn===t&&(e.blockedOn=null,Ju||(Ju=!0,Fe.unstable_scheduleCallback(Fe.unstable_NormalPriority,Iy)))}function oi(e){function t(i){return Ar(i,e)}if(0<Zi.length){Ar(Zi[0],e);for(var n=1;n<Zi.length;n++){var r=Zi[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Wt!==null&&Ar(Wt,e),Qt!==null&&Ar(Qt,e),qt!==null&&Ar(qt,e),ri.forEach(t),ii.forEach(t),n=0;n<zt.length;n++)r=zt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<zt.length&&(n=zt[0],n.blockedOn===null);)mp(n),n.blockedOn===null&&zt.shift()}var er=Mt.ReactCurrentBatchConfig,Lo=!0;function My(e,t,n,r){var i=V,o=er.transition;er.transition=null;try{V=1,Kl(e,t,n,r)}finally{V=i,er.transition=o}}function xy(e,t,n,r){var i=V,o=er.transition;er.transition=null;try{V=4,Kl(e,t,n,r)}finally{V=i,er.transition=o}}function Kl(e,t,n,r){if(Lo){var i=Zu(e,t,n,r);if(i===null)_u(e,t,r,ko,n),yf(e,r);else if(Ay(i,e,t,n,r))r.stopPropagation();else if(yf(e,r),t&4&&-1<ky.indexOf(e)){for(;i!==null;){var o=Li(i);if(o!==null&&hp(o),o=Zu(e,t,n,r),o===null&&_u(e,t,r,ko,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else _u(e,t,r,null,n)}}var ko=null;function Zu(e,t,n,r){if(ko=null,e=Ql(r),e=Sn(e),e!==null)if(t=xn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=op(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ko=e,null}function _p(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Oy()){case ql:return 1;case ap:return 4;case No:case Ry:return 16;case fp:return 536870912;default:return 16}default:return 16}}var Vt=null,Xl=null,ho=null;function gp(){if(ho)return ho;var e,t=Xl,n=t.length,r,i="value"in Vt?Vt.value:Vt.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[o-r];r++);return ho=i.slice(e,1<r?1-r:void 0)}function vo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function eo(){return!0}function _f(){return!1}function Ve(e){function t(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?eo:_f,this.isPropagationStopped=_f,this}return X(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=eo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=eo)},persist:function(){},isPersistent:eo}),t}var gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jl=Ve(gr),Ci=X({},gr,{view:0,detail:0}),by=Ve(Ci),au,fu,Ir,Es=X({},Ci,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ir&&(Ir&&e.type==="mousemove"?(au=e.screenX-Ir.screenX,fu=e.screenY-Ir.screenY):fu=au=0,Ir=e),au)},movementY:function(e){return"movementY"in e?e.movementY:fu}}),gf=Ve(Es),jy=X({},Es,{dataTransfer:0}),By=Ve(jy),Fy=X({},Ci,{relatedTarget:0}),cu=Ve(Fy),zy=X({},gr,{animationName:0,elapsedTime:0,pseudoElement:0}),$y=Ve(zy),Uy=X({},gr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Vy=Ve(Uy),Hy=X({},gr,{data:0}),Ef=Ve(Hy),Wy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=qy[e])?!!t[e]:!1}function Zl(){return Yy}var Gy=X({},Ci,{key:function(e){if(e.key){var t=Wy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=vo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Qy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zl,charCode:function(e){return e.type==="keypress"?vo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?vo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ky=Ve(Gy),Xy=X({},Es,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sf=Ve(Xy),Jy=X({},Ci,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zl}),Zy=Ve(Jy),em=X({},gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),tm=Ve(em),nm=X({},Es,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),rm=Ve(nm),im=[9,13,27,32],ea=Ct&&"CompositionEvent"in window,Wr=null;Ct&&"documentMode"in document&&(Wr=document.documentMode);var om=Ct&&"TextEvent"in window&&!Wr,Ep=Ct&&(!ea||Wr&&8<Wr&&11>=Wr),Of=" ",Rf=!1;function Sp(e,t){switch(e){case"keyup":return im.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Op(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zn=!1;function sm(e,t){switch(e){case"compositionend":return Op(t);case"keypress":return t.which!==32?null:(Rf=!0,Of);case"textInput":return e=t.data,e===Of&&Rf?null:e;default:return null}}function um(e,t){if(zn)return e==="compositionend"||!ea&&Sp(e,t)?(e=gp(),ho=Xl=Vt=null,zn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ep&&t.locale!=="ko"?null:t.data;default:return null}}var lm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!lm[e.type]:t==="textarea"}function Rp(e,t,n,r){ep(r),t=Ao(t,"onChange"),0<t.length&&(n=new Jl("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qr=null,si=null;function am(e){Mp(e,0)}function Ss(e){var t=Vn(e);if(qc(t))return e}function fm(e,t){if(e==="change")return t}var wp=!1;if(Ct){var pu;if(Ct){var hu="oninput"in document;if(!hu){var Tf=document.createElement("div");Tf.setAttribute("oninput","return;"),hu=typeof Tf.oninput=="function"}pu=hu}else pu=!1;wp=pu&&(!document.documentMode||9<document.documentMode)}function Df(){Qr&&(Qr.detachEvent("onpropertychange",Tp),si=Qr=null)}function Tp(e){if(e.propertyName==="value"&&Ss(si)){var t=[];Rp(t,si,e,Ql(e)),ip(am,t)}}function cm(e,t,n){e==="focusin"?(Df(),Qr=t,si=n,Qr.attachEvent("onpropertychange",Tp)):e==="focusout"&&Df()}function pm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ss(si)}function hm(e,t){if(e==="click")return Ss(t)}function dm(e,t){if(e==="input"||e==="change")return Ss(t)}function vm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var st=typeof Object.is=="function"?Object.is:vm;function ui(e,t){if(st(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!xu.call(t,i)||!st(e[i],t[i]))return!1}return!0}function Pf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Nf(e,t){var n=Pf(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Pf(n)}}function Dp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Dp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Pp(){for(var e=window,t=To();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=To(e.document)}return t}function ta(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ym(e){var t=Pp(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Dp(n.ownerDocument.documentElement,n)){if(r!==null&&ta(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=Nf(n,o);var s=Nf(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mm=Ct&&"documentMode"in document&&11>=document.documentMode,$n=null,el=null,qr=null,tl=!1;function Cf(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;tl||$n==null||$n!==To(r)||(r=$n,"selectionStart"in r&&ta(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qr&&ui(qr,r)||(qr=r,r=Ao(el,"onSelect"),0<r.length&&(t=new Jl("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=$n)))}function to(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Un={animationend:to("Animation","AnimationEnd"),animationiteration:to("Animation","AnimationIteration"),animationstart:to("Animation","AnimationStart"),transitionend:to("Transition","TransitionEnd")},du={},Np={};Ct&&(Np=document.createElement("div").style,"AnimationEvent"in window||(delete Un.animationend.animation,delete Un.animationiteration.animation,delete Un.animationstart.animation),"TransitionEvent"in window||delete Un.transitionend.transition);function Os(e){if(du[e])return du[e];if(!Un[e])return e;var t=Un[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Np)return du[e]=t[n];return e}var Cp=Os("animationend"),Lp=Os("animationiteration"),kp=Os("animationstart"),Ap=Os("transitionend"),Ip=new Map,Lf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function un(e,t){Ip.set(e,t),Mn(t,[e])}for(var vu=0;vu<Lf.length;vu++){var yu=Lf[vu],_m=yu.toLowerCase(),gm=yu[0].toUpperCase()+yu.slice(1);un(_m,"on"+gm)}un(Cp,"onAnimationEnd");un(Lp,"onAnimationIteration");un(kp,"onAnimationStart");un("dblclick","onDoubleClick");un("focusin","onFocus");un("focusout","onBlur");un(Ap,"onTransitionEnd");or("onMouseEnter",["mouseout","mouseover"]);or("onMouseLeave",["mouseout","mouseover"]);or("onPointerEnter",["pointerout","pointerover"]);or("onPointerLeave",["pointerout","pointerover"]);Mn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Em=new Set("cancel close invalid load scroll toggle".split(" ").concat(zr));function kf(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,_y(r,t,void 0,e),e.currentTarget=null}function Mp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var u=r[s],l=u.instance,a=u.currentTarget;if(u=u.listener,l!==o&&i.isPropagationStopped())break e;kf(i,u,a),o=l}else for(s=0;s<r.length;s++){if(u=r[s],l=u.instance,a=u.currentTarget,u=u.listener,l!==o&&i.isPropagationStopped())break e;kf(i,u,a),o=l}}}if(Po)throw e=Ku,Po=!1,Ku=null,e}function Q(e,t){var n=t[sl];n===void 0&&(n=t[sl]=new Set);var r=e+"__bubble";n.has(r)||(xp(t,e,2,!1),n.add(r))}function mu(e,t,n){var r=0;t&&(r|=4),xp(n,e,r,t)}var no="_reactListening"+Math.random().toString(36).slice(2);function li(e){if(!e[no]){e[no]=!0,Uc.forEach(function(n){n!=="selectionchange"&&(Em.has(n)||mu(n,!1,e),mu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[no]||(t[no]=!0,mu("selectionchange",!1,t))}}function xp(e,t,n,r){switch(_p(t)){case 1:var i=My;break;case 4:i=xy;break;default:i=Kl}n=i.bind(null,t,n,e),i=void 0,!Gu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function _u(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;u!==null;){if(s=Sn(u),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}u=u.parentNode}}r=r.return}ip(function(){var a=o,f=Ql(n),p=[];e:{var h=Ip.get(e);if(h!==void 0){var y=Jl,m=e;switch(e){case"keypress":if(vo(n)===0)break e;case"keydown":case"keyup":y=Ky;break;case"focusin":m="focus",y=cu;break;case"focusout":m="blur",y=cu;break;case"beforeblur":case"afterblur":y=cu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=gf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=By;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Zy;break;case Cp:case Lp:case kp:y=$y;break;case Ap:y=tm;break;case"scroll":y=by;break;case"wheel":y=rm;break;case"copy":case"cut":case"paste":y=Vy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Sf}var g=(t&4)!==0,w=!g&&e==="scroll",v=g?h!==null?h+"Capture":null:h;g=[];for(var c=a,d;c!==null;){d=c;var _=d.stateNode;if(d.tag===5&&_!==null&&(d=_,v!==null&&(_=ni(c,v),_!=null&&g.push(ai(c,_,d)))),w)break;c=c.return}0<g.length&&(h=new y(h,m,null,n,f),p.push({event:h,listeners:g}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",h&&n!==qu&&(m=n.relatedTarget||n.fromElement)&&(Sn(m)||m[Lt]))break e;if((y||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,y?(m=n.relatedTarget||n.toElement,y=a,m=m?Sn(m):null,m!==null&&(w=xn(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(y=null,m=a),y!==m)){if(g=gf,_="onMouseLeave",v="onMouseEnter",c="mouse",(e==="pointerout"||e==="pointerover")&&(g=Sf,_="onPointerLeave",v="onPointerEnter",c="pointer"),w=y==null?h:Vn(y),d=m==null?h:Vn(m),h=new g(_,c+"leave",y,n,f),h.target=w,h.relatedTarget=d,_=null,Sn(f)===a&&(g=new g(v,c+"enter",m,n,f),g.target=d,g.relatedTarget=w,_=g),w=_,y&&m)t:{for(g=y,v=m,c=0,d=g;d;d=jn(d))c++;for(d=0,_=v;_;_=jn(_))d++;for(;0<c-d;)g=jn(g),c--;for(;0<d-c;)v=jn(v),d--;for(;c--;){if(g===v||v!==null&&g===v.alternate)break t;g=jn(g),v=jn(v)}g=null}else g=null;y!==null&&Af(p,h,y,g,!1),m!==null&&w!==null&&Af(p,w,m,g,!0)}}e:{if(h=a?Vn(a):window,y=h.nodeName&&h.nodeName.toLowerCase(),y==="select"||y==="input"&&h.type==="file")var E=fm;else if(wf(h))if(wp)E=dm;else{E=pm;var S=cm}else(y=h.nodeName)&&y.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(E=hm);if(E&&(E=E(e,a))){Rp(p,E,n,f);break e}S&&S(e,h,a),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&Uu(h,"number",h.value)}switch(S=a?Vn(a):window,e){case"focusin":(wf(S)||S.contentEditable==="true")&&($n=S,el=a,qr=null);break;case"focusout":qr=el=$n=null;break;case"mousedown":tl=!0;break;case"contextmenu":case"mouseup":case"dragend":tl=!1,Cf(p,n,f);break;case"selectionchange":if(mm)break;case"keydown":case"keyup":Cf(p,n,f)}var R;if(ea)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else zn?Sp(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Ep&&n.locale!=="ko"&&(zn||T!=="onCompositionStart"?T==="onCompositionEnd"&&zn&&(R=gp()):(Vt=f,Xl="value"in Vt?Vt.value:Vt.textContent,zn=!0)),S=Ao(a,T),0<S.length&&(T=new Ef(T,e,null,n,f),p.push({event:T,listeners:S}),R?T.data=R:(R=Op(n),R!==null&&(T.data=R)))),(R=om?sm(e,n):um(e,n))&&(a=Ao(a,"onBeforeInput"),0<a.length&&(f=new Ef("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:a}),f.data=R))}Mp(p,t)})}function ai(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ao(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=ni(e,n),o!=null&&r.unshift(ai(e,o,i)),o=ni(e,t),o!=null&&r.push(ai(e,o,i))),e=e.return}return r}function jn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Af(e,t,n,r,i){for(var o=t._reactName,s=[];n!==null&&n!==r;){var u=n,l=u.alternate,a=u.stateNode;if(l!==null&&l===r)break;u.tag===5&&a!==null&&(u=a,i?(l=ni(n,o),l!=null&&s.unshift(ai(n,l,u))):i||(l=ni(n,o),l!=null&&s.push(ai(n,l,u)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var Sm=/\r\n?/g,Om=/\u0000|\uFFFD/g;function If(e){return(typeof e=="string"?e:""+e).replace(Sm,`
`).replace(Om,"")}function ro(e,t,n){if(t=If(t),If(e)!==t&&n)throw Error(O(425))}function Io(){}var nl=null,rl=null;function il(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ol=typeof setTimeout=="function"?setTimeout:void 0,Rm=typeof clearTimeout=="function"?clearTimeout:void 0,Mf=typeof Promise=="function"?Promise:void 0,wm=typeof queueMicrotask=="function"?queueMicrotask:typeof Mf<"u"?function(e){return Mf.resolve(null).then(e).catch(Tm)}:ol;function Tm(e){setTimeout(function(){throw e})}function gu(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),oi(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);oi(t)}function Yt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function xf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Er=Math.random().toString(36).slice(2),vt="__reactFiber$"+Er,fi="__reactProps$"+Er,Lt="__reactContainer$"+Er,sl="__reactEvents$"+Er,Dm="__reactListeners$"+Er,Pm="__reactHandles$"+Er;function Sn(e){var t=e[vt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Lt]||n[vt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=xf(e);e!==null;){if(n=e[vt])return n;e=xf(e)}return t}e=n,n=e.parentNode}return null}function Li(e){return e=e[vt]||e[Lt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Vn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(O(33))}function Rs(e){return e[fi]||null}var ul=[],Hn=-1;function ln(e){return{current:e}}function q(e){0>Hn||(e.current=ul[Hn],ul[Hn]=null,Hn--)}function W(e,t){Hn++,ul[Hn]=e.current,e.current=t}var nn={},ge=ln(nn),Le=ln(!1),Dn=nn;function sr(e,t){var n=e.type.contextTypes;if(!n)return nn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ke(e){return e=e.childContextTypes,e!=null}function Mo(){q(Le),q(ge)}function bf(e,t,n){if(ge.current!==nn)throw Error(O(168));W(ge,t),W(Le,n)}function bp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(O(108,cy(e)||"Unknown",i));return X({},n,r)}function xo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||nn,Dn=ge.current,W(ge,e),W(Le,Le.current),!0}function jf(e,t,n){var r=e.stateNode;if(!r)throw Error(O(169));n?(e=bp(e,t,Dn),r.__reactInternalMemoizedMergedChildContext=e,q(Le),q(ge),W(ge,e)):q(Le),W(Le,n)}var Rt=null,ws=!1,Eu=!1;function jp(e){Rt===null?Rt=[e]:Rt.push(e)}function Nm(e){ws=!0,jp(e)}function an(){if(!Eu&&Rt!==null){Eu=!0;var e=0,t=V;try{var n=Rt;for(V=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Rt=null,ws=!1}catch(i){throw Rt!==null&&(Rt=Rt.slice(e+1)),lp(ql,an),i}finally{V=t,Eu=!1}}return null}var Wn=[],Qn=0,bo=null,jo=0,He=[],We=0,Pn=null,Tt=1,Dt="";function gn(e,t){Wn[Qn++]=jo,Wn[Qn++]=bo,bo=e,jo=t}function Bp(e,t,n){He[We++]=Tt,He[We++]=Dt,He[We++]=Pn,Pn=e;var r=Tt;e=Dt;var i=32-it(r)-1;r&=~(1<<i),n+=1;var o=32-it(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Tt=1<<32-it(t)+i|n<<i|r,Dt=o+e}else Tt=1<<o|n<<i|r,Dt=e}function na(e){e.return!==null&&(gn(e,1),Bp(e,1,0))}function ra(e){for(;e===bo;)bo=Wn[--Qn],Wn[Qn]=null,jo=Wn[--Qn],Wn[Qn]=null;for(;e===Pn;)Pn=He[--We],He[We]=null,Dt=He[--We],He[We]=null,Tt=He[--We],He[We]=null}var je=null,xe=null,Y=!1,rt=null;function Fp(e,t){var n=Qe(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Bf(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,je=e,xe=Yt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,je=e,xe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Pn!==null?{id:Tt,overflow:Dt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Qe(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,je=e,xe=null,!0):!1;default:return!1}}function ll(e){return(e.mode&1)!==0&&(e.flags&128)===0}function al(e){if(Y){var t=xe;if(t){var n=t;if(!Bf(e,t)){if(ll(e))throw Error(O(418));t=Yt(n.nextSibling);var r=je;t&&Bf(e,t)?Fp(r,n):(e.flags=e.flags&-4097|2,Y=!1,je=e)}}else{if(ll(e))throw Error(O(418));e.flags=e.flags&-4097|2,Y=!1,je=e}}}function Ff(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;je=e}function io(e){if(e!==je)return!1;if(!Y)return Ff(e),Y=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!il(e.type,e.memoizedProps)),t&&(t=xe)){if(ll(e))throw zp(),Error(O(418));for(;t;)Fp(e,t),t=Yt(t.nextSibling)}if(Ff(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(O(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){xe=Yt(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}xe=null}}else xe=je?Yt(e.stateNode.nextSibling):null;return!0}function zp(){for(var e=xe;e;)e=Yt(e.nextSibling)}function ur(){xe=je=null,Y=!1}function ia(e){rt===null?rt=[e]:rt.push(e)}var Cm=Mt.ReactCurrentBatchConfig;function et(e,t){if(e&&e.defaultProps){t=X({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Bo=ln(null),Fo=null,qn=null,oa=null;function sa(){oa=qn=Fo=null}function ua(e){var t=Bo.current;q(Bo),e._currentValue=t}function fl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function tr(e,t){Fo=e,oa=qn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ce=!0),e.firstContext=null)}function Ge(e){var t=e._currentValue;if(oa!==e)if(e={context:e,memoizedValue:t,next:null},qn===null){if(Fo===null)throw Error(O(308));qn=e,Fo.dependencies={lanes:0,firstContext:e}}else qn=qn.next=e;return t}var On=null;function la(e){On===null?On=[e]:On.push(e)}function $p(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,la(t)):(n.next=i.next,i.next=n),t.interleaved=n,kt(e,r)}function kt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ft=!1;function aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Up(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Gt(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,$&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,kt(e,n)}return i=r.interleaved,i===null?(t.next=t,la(r)):(t.next=i.next,i.next=t),r.interleaved=t,kt(e,n)}function yo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Yl(e,n)}}function zf(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zo(e,t,n,r){var i=e.updateQueue;Ft=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var l=u,a=l.next;l.next=null,s===null?o=a:s.next=a,s=l;var f=e.alternate;f!==null&&(f=f.updateQueue,u=f.lastBaseUpdate,u!==s&&(u===null?f.firstBaseUpdate=a:u.next=a,f.lastBaseUpdate=l))}if(o!==null){var p=i.baseState;s=0,f=a=l=null,u=o;do{var h=u.lane,y=u.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:y,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var m=e,g=u;switch(h=t,y=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){p=m.call(y,p,h);break e}p=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,h=typeof m=="function"?m.call(y,p,h):m,h==null)break e;p=X({},p,h);break e;case 2:Ft=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[u]:h.push(u))}else y={eventTime:y,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},f===null?(a=f=y,l=p):f=f.next=y,s|=h;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;h=u,u=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(f===null&&(l=p),i.baseState=l,i.firstBaseUpdate=a,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Cn|=s,e.lanes=s,e.memoizedState=p}}function $f(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(O(191,i));i.call(r)}}}var Vp=new $c.Component().refs;function cl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:X({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ts={isMounted:function(e){return(e=e._reactInternals)?xn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Oe(),i=Xt(e),o=Pt(r,i);o.payload=t,n!=null&&(o.callback=n),t=Gt(e,o,i),t!==null&&(ot(t,e,i,r),yo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Oe(),i=Xt(e),o=Pt(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Gt(e,o,i),t!==null&&(ot(t,e,i,r),yo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Oe(),r=Xt(e),i=Pt(n,r);i.tag=2,t!=null&&(i.callback=t),t=Gt(e,i,r),t!==null&&(ot(t,e,r,n),yo(t,e,r))}};function Uf(e,t,n,r,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,s):t.prototype&&t.prototype.isPureReactComponent?!ui(n,r)||!ui(i,o):!0}function Hp(e,t,n){var r=!1,i=nn,o=t.contextType;return typeof o=="object"&&o!==null?o=Ge(o):(i=ke(t)?Dn:ge.current,r=t.contextTypes,o=(r=r!=null)?sr(e,i):nn),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ts,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Vf(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ts.enqueueReplaceState(t,t.state,null)}function pl(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Vp,aa(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Ge(o):(o=ke(t)?Dn:ge.current,i.context=sr(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(cl(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Ts.enqueueReplaceState(i,i.state,null),zo(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Mr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var r=n.stateNode}if(!r)throw Error(O(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var u=i.refs;u===Vp&&(u=i.refs={}),s===null?delete u[o]:u[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,e))}return e}function oo(e,t){throw e=Object.prototype.toString.call(t),Error(O(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Hf(e){var t=e._init;return t(e._payload)}function Wp(e){function t(v,c){if(e){var d=v.deletions;d===null?(v.deletions=[c],v.flags|=16):d.push(c)}}function n(v,c){if(!e)return null;for(;c!==null;)t(v,c),c=c.sibling;return null}function r(v,c){for(v=new Map;c!==null;)c.key!==null?v.set(c.key,c):v.set(c.index,c),c=c.sibling;return v}function i(v,c){return v=Jt(v,c),v.index=0,v.sibling=null,v}function o(v,c,d){return v.index=d,e?(d=v.alternate,d!==null?(d=d.index,d<c?(v.flags|=2,c):d):(v.flags|=2,c)):(v.flags|=1048576,c)}function s(v){return e&&v.alternate===null&&(v.flags|=2),v}function u(v,c,d,_){return c===null||c.tag!==6?(c=Pu(d,v.mode,_),c.return=v,c):(c=i(c,d),c.return=v,c)}function l(v,c,d,_){var E=d.type;return E===Fn?f(v,c,d.props.children,_,d.key):c!==null&&(c.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Bt&&Hf(E)===c.type)?(_=i(c,d.props),_.ref=Mr(v,c,d),_.return=v,_):(_=Oo(d.type,d.key,d.props,null,v.mode,_),_.ref=Mr(v,c,d),_.return=v,_)}function a(v,c,d,_){return c===null||c.tag!==4||c.stateNode.containerInfo!==d.containerInfo||c.stateNode.implementation!==d.implementation?(c=Nu(d,v.mode,_),c.return=v,c):(c=i(c,d.children||[]),c.return=v,c)}function f(v,c,d,_,E){return c===null||c.tag!==7?(c=Tn(d,v.mode,_,E),c.return=v,c):(c=i(c,d),c.return=v,c)}function p(v,c,d){if(typeof c=="string"&&c!==""||typeof c=="number")return c=Pu(""+c,v.mode,d),c.return=v,c;if(typeof c=="object"&&c!==null){switch(c.$$typeof){case Yi:return d=Oo(c.type,c.key,c.props,null,v.mode,d),d.ref=Mr(v,null,c),d.return=v,d;case Bn:return c=Nu(c,v.mode,d),c.return=v,c;case Bt:var _=c._init;return p(v,_(c._payload),d)}if(Br(c)||Cr(c))return c=Tn(c,v.mode,d,null),c.return=v,c;oo(v,c)}return null}function h(v,c,d,_){var E=c!==null?c.key:null;if(typeof d=="string"&&d!==""||typeof d=="number")return E!==null?null:u(v,c,""+d,_);if(typeof d=="object"&&d!==null){switch(d.$$typeof){case Yi:return d.key===E?l(v,c,d,_):null;case Bn:return d.key===E?a(v,c,d,_):null;case Bt:return E=d._init,h(v,c,E(d._payload),_)}if(Br(d)||Cr(d))return E!==null?null:f(v,c,d,_,null);oo(v,d)}return null}function y(v,c,d,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(d)||null,u(c,v,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Yi:return v=v.get(_.key===null?d:_.key)||null,l(c,v,_,E);case Bn:return v=v.get(_.key===null?d:_.key)||null,a(c,v,_,E);case Bt:var S=_._init;return y(v,c,d,S(_._payload),E)}if(Br(_)||Cr(_))return v=v.get(d)||null,f(c,v,_,E,null);oo(c,_)}return null}function m(v,c,d,_){for(var E=null,S=null,R=c,T=c=0,C=null;R!==null&&T<d.length;T++){R.index>T?(C=R,R=null):C=R.sibling;var L=h(v,R,d[T],_);if(L===null){R===null&&(R=C);break}e&&R&&L.alternate===null&&t(v,R),c=o(L,c,T),S===null?E=L:S.sibling=L,S=L,R=C}if(T===d.length)return n(v,R),Y&&gn(v,T),E;if(R===null){for(;T<d.length;T++)R=p(v,d[T],_),R!==null&&(c=o(R,c,T),S===null?E=R:S.sibling=R,S=R);return Y&&gn(v,T),E}for(R=r(v,R);T<d.length;T++)C=y(R,v,T,d[T],_),C!==null&&(e&&C.alternate!==null&&R.delete(C.key===null?T:C.key),c=o(C,c,T),S===null?E=C:S.sibling=C,S=C);return e&&R.forEach(function(Z){return t(v,Z)}),Y&&gn(v,T),E}function g(v,c,d,_){var E=Cr(d);if(typeof E!="function")throw Error(O(150));if(d=E.call(d),d==null)throw Error(O(151));for(var S=E=null,R=c,T=c=0,C=null,L=d.next();R!==null&&!L.done;T++,L=d.next()){R.index>T?(C=R,R=null):C=R.sibling;var Z=h(v,R,L.value,_);if(Z===null){R===null&&(R=C);break}e&&R&&Z.alternate===null&&t(v,R),c=o(Z,c,T),S===null?E=Z:S.sibling=Z,S=Z,R=C}if(L.done)return n(v,R),Y&&gn(v,T),E;if(R===null){for(;!L.done;T++,L=d.next())L=p(v,L.value,_),L!==null&&(c=o(L,c,T),S===null?E=L:S.sibling=L,S=L);return Y&&gn(v,T),E}for(R=r(v,R);!L.done;T++,L=d.next())L=y(R,v,T,L.value,_),L!==null&&(e&&L.alternate!==null&&R.delete(L.key===null?T:L.key),c=o(L,c,T),S===null?E=L:S.sibling=L,S=L);return e&&R.forEach(function(bt){return t(v,bt)}),Y&&gn(v,T),E}function w(v,c,d,_){if(typeof d=="object"&&d!==null&&d.type===Fn&&d.key===null&&(d=d.props.children),typeof d=="object"&&d!==null){switch(d.$$typeof){case Yi:e:{for(var E=d.key,S=c;S!==null;){if(S.key===E){if(E=d.type,E===Fn){if(S.tag===7){n(v,S.sibling),c=i(S,d.props.children),c.return=v,v=c;break e}}else if(S.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Bt&&Hf(E)===S.type){n(v,S.sibling),c=i(S,d.props),c.ref=Mr(v,S,d),c.return=v,v=c;break e}n(v,S);break}else t(v,S);S=S.sibling}d.type===Fn?(c=Tn(d.props.children,v.mode,_,d.key),c.return=v,v=c):(_=Oo(d.type,d.key,d.props,null,v.mode,_),_.ref=Mr(v,c,d),_.return=v,v=_)}return s(v);case Bn:e:{for(S=d.key;c!==null;){if(c.key===S)if(c.tag===4&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){n(v,c.sibling),c=i(c,d.children||[]),c.return=v,v=c;break e}else{n(v,c);break}else t(v,c);c=c.sibling}c=Nu(d,v.mode,_),c.return=v,v=c}return s(v);case Bt:return S=d._init,w(v,c,S(d._payload),_)}if(Br(d))return m(v,c,d,_);if(Cr(d))return g(v,c,d,_);oo(v,d)}return typeof d=="string"&&d!==""||typeof d=="number"?(d=""+d,c!==null&&c.tag===6?(n(v,c.sibling),c=i(c,d),c.return=v,v=c):(n(v,c),c=Pu(d,v.mode,_),c.return=v,v=c),s(v)):n(v,c)}return w}var lr=Wp(!0),Qp=Wp(!1),ki={},_t=ln(ki),ci=ln(ki),pi=ln(ki);function Rn(e){if(e===ki)throw Error(O(174));return e}function fa(e,t){switch(W(pi,t),W(ci,e),W(_t,ki),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Hu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Hu(t,e)}q(_t),W(_t,t)}function ar(){q(_t),q(ci),q(pi)}function qp(e){Rn(pi.current);var t=Rn(_t.current),n=Hu(t,e.type);t!==n&&(W(ci,e),W(_t,n))}function ca(e){ci.current===e&&(q(_t),q(ci))}var G=ln(0);function $o(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Su=[];function pa(){for(var e=0;e<Su.length;e++)Su[e]._workInProgressVersionPrimary=null;Su.length=0}var mo=Mt.ReactCurrentDispatcher,Ou=Mt.ReactCurrentBatchConfig,Nn=0,K=null,oe=null,ae=null,Uo=!1,Yr=!1,hi=0,Lm=0;function ye(){throw Error(O(321))}function ha(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!st(e[n],t[n]))return!1;return!0}function da(e,t,n,r,i,o){if(Nn=o,K=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,mo.current=e===null||e.memoizedState===null?Mm:xm,e=n(r,i),Yr){o=0;do{if(Yr=!1,hi=0,25<=o)throw Error(O(301));o+=1,ae=oe=null,t.updateQueue=null,mo.current=bm,e=n(r,i)}while(Yr)}if(mo.current=Vo,t=oe!==null&&oe.next!==null,Nn=0,ae=oe=K=null,Uo=!1,t)throw Error(O(300));return e}function va(){var e=hi!==0;return hi=0,e}function dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ae===null?K.memoizedState=ae=e:ae=ae.next=e,ae}function Ke(){if(oe===null){var e=K.alternate;e=e!==null?e.memoizedState:null}else e=oe.next;var t=ae===null?K.memoizedState:ae.next;if(t!==null)ae=t,oe=e;else{if(e===null)throw Error(O(310));oe=e,e={memoizedState:oe.memoizedState,baseState:oe.baseState,baseQueue:oe.baseQueue,queue:oe.queue,next:null},ae===null?K.memoizedState=ae=e:ae=ae.next=e}return ae}function di(e,t){return typeof t=="function"?t(e):t}function Ru(e){var t=Ke(),n=t.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=e;var r=oe,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var u=s=null,l=null,a=o;do{var f=a.lane;if((Nn&f)===f)l!==null&&(l=l.next={lane:0,action:a.action,hasEagerState:a.hasEagerState,eagerState:a.eagerState,next:null}),r=a.hasEagerState?a.eagerState:e(r,a.action);else{var p={lane:f,action:a.action,hasEagerState:a.hasEagerState,eagerState:a.eagerState,next:null};l===null?(u=l=p,s=r):l=l.next=p,K.lanes|=f,Cn|=f}a=a.next}while(a!==null&&a!==o);l===null?s=r:l.next=u,st(r,t.memoizedState)||(Ce=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,K.lanes|=o,Cn|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wu(e){var t=Ke(),n=t.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);st(o,t.memoizedState)||(Ce=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Yp(){}function Gp(e,t){var n=K,r=Ke(),i=t(),o=!st(r.memoizedState,i);if(o&&(r.memoizedState=i,Ce=!0),r=r.queue,ya(Jp.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||ae!==null&&ae.memoizedState.tag&1){if(n.flags|=2048,vi(9,Xp.bind(null,n,r,i,t),void 0,null),fe===null)throw Error(O(349));Nn&30||Kp(n,t,i)}return i}function Kp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=K.updateQueue,t===null?(t={lastEffect:null,stores:null},K.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Xp(e,t,n,r){t.value=n,t.getSnapshot=r,Zp(t)&&eh(e)}function Jp(e,t,n){return n(function(){Zp(t)&&eh(e)})}function Zp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!st(e,n)}catch{return!0}}function eh(e){var t=kt(e,1);t!==null&&ot(t,e,1,-1)}function Wf(e){var t=dt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:e},t.queue=e,e=e.dispatch=Im.bind(null,K,e),[t.memoizedState,e]}function vi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=K.updateQueue,t===null?(t={lastEffect:null,stores:null},K.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function th(){return Ke().memoizedState}function _o(e,t,n,r){var i=dt();K.flags|=e,i.memoizedState=vi(1|t,n,void 0,r===void 0?null:r)}function Ds(e,t,n,r){var i=Ke();r=r===void 0?null:r;var o=void 0;if(oe!==null){var s=oe.memoizedState;if(o=s.destroy,r!==null&&ha(r,s.deps)){i.memoizedState=vi(t,n,o,r);return}}K.flags|=e,i.memoizedState=vi(1|t,n,o,r)}function Qf(e,t){return _o(8390656,8,e,t)}function ya(e,t){return Ds(2048,8,e,t)}function nh(e,t){return Ds(4,2,e,t)}function rh(e,t){return Ds(4,4,e,t)}function ih(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function oh(e,t,n){return n=n!=null?n.concat([e]):null,Ds(4,4,ih.bind(null,t,e),n)}function ma(){}function sh(e,t){var n=Ke();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ha(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function uh(e,t){var n=Ke();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ha(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function lh(e,t,n){return Nn&21?(st(n,t)||(n=cp(),K.lanes|=n,Cn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ce=!0),e.memoizedState=n)}function km(e,t){var n=V;V=n!==0&&4>n?n:4,e(!0);var r=Ou.transition;Ou.transition={};try{e(!1),t()}finally{V=n,Ou.transition=r}}function ah(){return Ke().memoizedState}function Am(e,t,n){var r=Xt(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},fh(e))ch(t,n);else if(n=$p(e,t,n,r),n!==null){var i=Oe();ot(n,e,r,i),ph(n,t,r)}}function Im(e,t,n){var r=Xt(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(fh(e))ch(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,u=o(s,n);if(i.hasEagerState=!0,i.eagerState=u,st(u,s)){var l=t.interleaved;l===null?(i.next=i,la(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=$p(e,t,i,r),n!==null&&(i=Oe(),ot(n,e,r,i),ph(n,t,r))}}function fh(e){var t=e.alternate;return e===K||t!==null&&t===K}function ch(e,t){Yr=Uo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ph(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Yl(e,n)}}var Vo={readContext:Ge,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useInsertionEffect:ye,useLayoutEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useMutableSource:ye,useSyncExternalStore:ye,useId:ye,unstable_isNewReconciler:!1},Mm={readContext:Ge,useCallback:function(e,t){return dt().memoizedState=[e,t===void 0?null:t],e},useContext:Ge,useEffect:Qf,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,_o(4194308,4,ih.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _o(4194308,4,e,t)},useInsertionEffect:function(e,t){return _o(4,2,e,t)},useMemo:function(e,t){var n=dt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=dt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Am.bind(null,K,e),[r.memoizedState,e]},useRef:function(e){var t=dt();return e={current:e},t.memoizedState=e},useState:Wf,useDebugValue:ma,useDeferredValue:function(e){return dt().memoizedState=e},useTransition:function(){var e=Wf(!1),t=e[0];return e=km.bind(null,e[1]),dt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=K,i=dt();if(Y){if(n===void 0)throw Error(O(407));n=n()}else{if(n=t(),fe===null)throw Error(O(349));Nn&30||Kp(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Qf(Jp.bind(null,r,o,e),[e]),r.flags|=2048,vi(9,Xp.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=dt(),t=fe.identifierPrefix;if(Y){var n=Dt,r=Tt;n=(r&~(1<<32-it(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=hi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Lm++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},xm={readContext:Ge,useCallback:sh,useContext:Ge,useEffect:ya,useImperativeHandle:oh,useInsertionEffect:nh,useLayoutEffect:rh,useMemo:uh,useReducer:Ru,useRef:th,useState:function(){return Ru(di)},useDebugValue:ma,useDeferredValue:function(e){var t=Ke();return lh(t,oe.memoizedState,e)},useTransition:function(){var e=Ru(di)[0],t=Ke().memoizedState;return[e,t]},useMutableSource:Yp,useSyncExternalStore:Gp,useId:ah,unstable_isNewReconciler:!1},bm={readContext:Ge,useCallback:sh,useContext:Ge,useEffect:ya,useImperativeHandle:oh,useInsertionEffect:nh,useLayoutEffect:rh,useMemo:uh,useReducer:wu,useRef:th,useState:function(){return wu(di)},useDebugValue:ma,useDeferredValue:function(e){var t=Ke();return oe===null?t.memoizedState=e:lh(t,oe.memoizedState,e)},useTransition:function(){var e=wu(di)[0],t=Ke().memoizedState;return[e,t]},useMutableSource:Yp,useSyncExternalStore:Gp,useId:ah,unstable_isNewReconciler:!1};function fr(e,t){try{var n="",r=t;do n+=fy(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function Tu(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function hl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var jm=typeof WeakMap=="function"?WeakMap:Map;function hh(e,t,n){n=Pt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wo||(Wo=!0,Rl=r),hl(e,t)},n}function dh(e,t,n){n=Pt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hl(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){hl(e,t),typeof r!="function"&&(Kt===null?Kt=new Set([this]):Kt.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function qf(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new jm;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Xm.bind(null,e,t,n),t.then(e,e))}function Yf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Gf(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Pt(-1,1),t.tag=2,Gt(n,t,1))),n.lanes|=1),e)}var Bm=Mt.ReactCurrentOwner,Ce=!1;function Se(e,t,n,r){t.child=e===null?Qp(t,null,n,r):lr(t,e.child,n,r)}function Kf(e,t,n,r,i){n=n.render;var o=t.ref;return tr(t,i),r=da(e,t,n,r,o,i),n=va(),e!==null&&!Ce?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,At(e,t,i)):(Y&&n&&na(t),t.flags|=1,Se(e,t,r,i),t.child)}function Xf(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!Ta(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,vh(e,t,o,r,i)):(e=Oo(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:ui,n(s,r)&&e.ref===t.ref)return At(e,t,i)}return t.flags|=1,e=Jt(o,r),e.ref=t.ref,e.return=t,t.child=e}function vh(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(ui(o,r)&&e.ref===t.ref)if(Ce=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(Ce=!0);else return t.lanes=e.lanes,At(e,t,i)}return dl(e,t,n,r,i)}function yh(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},W(Gn,Me),Me|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,W(Gn,Me),Me|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,W(Gn,Me),Me|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,W(Gn,Me),Me|=r;return Se(e,t,i,n),t.child}function mh(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function dl(e,t,n,r,i){var o=ke(n)?Dn:ge.current;return o=sr(t,o),tr(t,i),n=da(e,t,n,r,o,i),r=va(),e!==null&&!Ce?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,At(e,t,i)):(Y&&r&&na(t),t.flags|=1,Se(e,t,n,i),t.child)}function Jf(e,t,n,r,i){if(ke(n)){var o=!0;xo(t)}else o=!1;if(tr(t,i),t.stateNode===null)go(e,t),Hp(t,n,r),pl(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,u=t.memoizedProps;s.props=u;var l=s.context,a=n.contextType;typeof a=="object"&&a!==null?a=Ge(a):(a=ke(n)?Dn:ge.current,a=sr(t,a));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==r||l!==a)&&Vf(t,s,r,a),Ft=!1;var h=t.memoizedState;s.state=h,zo(t,r,s,i),l=t.memoizedState,u!==r||h!==l||Le.current||Ft?(typeof f=="function"&&(cl(t,n,f,r),l=t.memoizedState),(u=Ft||Uf(t,n,u,r,h,l,a))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=a,r=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Up(e,t),u=t.memoizedProps,a=t.type===t.elementType?u:et(t.type,u),s.props=a,p=t.pendingProps,h=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ge(l):(l=ke(n)?Dn:ge.current,l=sr(t,l));var y=n.getDerivedStateFromProps;(f=typeof y=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==p||h!==l)&&Vf(t,s,r,l),Ft=!1,h=t.memoizedState,s.state=h,zo(t,r,s,i);var m=t.memoizedState;u!==p||h!==m||Le.current||Ft?(typeof y=="function"&&(cl(t,n,y,r),m=t.memoizedState),(a=Ft||Uf(t,n,a,r,h,m,l)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,m,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,m,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),s.props=r,s.state=m,s.context=l,r=a):(typeof s.componentDidUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return vl(e,t,n,r,o,i)}function vl(e,t,n,r,i,o){mh(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&jf(t,n,!1),At(e,t,o);r=t.stateNode,Bm.current=t;var u=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=lr(t,e.child,null,o),t.child=lr(t,null,u,o)):Se(e,t,u,o),t.memoizedState=r.state,i&&jf(t,n,!0),t.child}function _h(e){var t=e.stateNode;t.pendingContext?bf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&bf(e,t.context,!1),fa(e,t.containerInfo)}function Zf(e,t,n,r,i){return ur(),ia(i),t.flags|=256,Se(e,t,n,r),t.child}var yl={dehydrated:null,treeContext:null,retryLane:0};function ml(e){return{baseLanes:e,cachePool:null,transitions:null}}function gh(e,t,n){var r=t.pendingProps,i=G.current,o=!1,s=(t.flags&128)!==0,u;if((u=s)||(u=e!==null&&e.memoizedState===null?!1:(i&2)!==0),u?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),W(G,i&1),e===null)return al(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Cs(s,r,0,null),e=Tn(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=ml(n),t.memoizedState=yl,e):_a(t,s));if(i=e.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return Fm(e,t,s,r,u,i,n);if(o){o=r.fallback,s=t.mode,i=e.child,u=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Jt(i,l),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?o=Jt(u,o):(o=Tn(o,s,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,s=e.child.memoizedState,s=s===null?ml(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~n,t.memoizedState=yl,r}return o=e.child,e=o.sibling,r=Jt(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function _a(e,t){return t=Cs({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function so(e,t,n,r){return r!==null&&ia(r),lr(t,e.child,null,n),e=_a(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Fm(e,t,n,r,i,o,s){if(n)return t.flags&256?(t.flags&=-257,r=Tu(Error(O(422))),so(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Cs({mode:"visible",children:r.children},i,0,null),o=Tn(o,i,s,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&lr(t,e.child,null,s),t.child.memoizedState=ml(s),t.memoizedState=yl,o);if(!(t.mode&1))return so(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,o=Error(O(419)),r=Tu(o,r,void 0),so(e,t,s,r)}if(u=(s&e.childLanes)!==0,Ce||u){if(r=fe,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,kt(e,i),ot(r,e,i,-1))}return wa(),r=Tu(Error(O(421))),so(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Jm.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,xe=Yt(i.nextSibling),je=t,Y=!0,rt=null,e!==null&&(He[We++]=Tt,He[We++]=Dt,He[We++]=Pn,Tt=e.id,Dt=e.overflow,Pn=t),t=_a(t,r.children),t.flags|=4096,t)}function ec(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),fl(e.return,t,n)}function Du(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Eh(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Se(e,t,r.children,n),r=G.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ec(e,n,t);else if(e.tag===19)ec(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(W(G,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&$o(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Du(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&$o(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Du(t,!0,n,null,o);break;case"together":Du(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function go(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function At(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Cn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(O(153));if(t.child!==null){for(e=t.child,n=Jt(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Jt(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function zm(e,t,n){switch(t.tag){case 3:_h(t),ur();break;case 5:qp(t);break;case 1:ke(t.type)&&xo(t);break;case 4:fa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;W(Bo,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(W(G,G.current&1),t.flags|=128,null):n&t.child.childLanes?gh(e,t,n):(W(G,G.current&1),e=At(e,t,n),e!==null?e.sibling:null);W(G,G.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Eh(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),W(G,G.current),r)break;return null;case 22:case 23:return t.lanes=0,yh(e,t,n)}return At(e,t,n)}var Sh,_l,Oh,Rh;Sh=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_l=function(){};Oh=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Rn(_t.current);var o=null;switch(n){case"input":i=zu(e,i),r=zu(e,r),o=[];break;case"select":i=X({},i,{value:void 0}),r=X({},r,{value:void 0}),o=[];break;case"textarea":i=Vu(e,i),r=Vu(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Io)}Wu(n,r);var s;n=null;for(a in i)if(!r.hasOwnProperty(a)&&i.hasOwnProperty(a)&&i[a]!=null)if(a==="style"){var u=i[a];for(s in u)u.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else a!=="dangerouslySetInnerHTML"&&a!=="children"&&a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ei.hasOwnProperty(a)?o||(o=[]):(o=o||[]).push(a,null));for(a in r){var l=r[a];if(u=i!=null?i[a]:void 0,r.hasOwnProperty(a)&&l!==u&&(l!=null||u!=null))if(a==="style")if(u){for(s in u)!u.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&u[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(a,n)),n=l;else a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,u=u?u.__html:void 0,l!=null&&u!==l&&(o=o||[]).push(a,l)):a==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(a,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&(ei.hasOwnProperty(a)?(l!=null&&a==="onScroll"&&Q("scroll",e),o||u===l||(o=[])):(o=o||[]).push(a,l))}n&&(o=o||[]).push("style",n);var a=o;(t.updateQueue=a)&&(t.flags|=4)}};Rh=function(e,t,n,r){n!==r&&(t.flags|=4)};function xr(e,t){if(!Y)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function me(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function $m(e,t,n){var r=t.pendingProps;switch(ra(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return me(t),null;case 1:return ke(t.type)&&Mo(),me(t),null;case 3:return r=t.stateNode,ar(),q(Le),q(ge),pa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(io(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,rt!==null&&(Dl(rt),rt=null))),_l(e,t),me(t),null;case 5:ca(t);var i=Rn(pi.current);if(n=t.type,e!==null&&t.stateNode!=null)Oh(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(O(166));return me(t),null}if(e=Rn(_t.current),io(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[vt]=t,r[fi]=o,e=(t.mode&1)!==0,n){case"dialog":Q("cancel",r),Q("close",r);break;case"iframe":case"object":case"embed":Q("load",r);break;case"video":case"audio":for(i=0;i<zr.length;i++)Q(zr[i],r);break;case"source":Q("error",r);break;case"img":case"image":case"link":Q("error",r),Q("load",r);break;case"details":Q("toggle",r);break;case"input":af(r,o),Q("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Q("invalid",r);break;case"textarea":cf(r,o),Q("invalid",r)}Wu(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var u=o[s];s==="children"?typeof u=="string"?r.textContent!==u&&(o.suppressHydrationWarning!==!0&&ro(r.textContent,u,e),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&ro(r.textContent,u,e),i=["children",""+u]):ei.hasOwnProperty(s)&&u!=null&&s==="onScroll"&&Q("scroll",r)}switch(n){case"input":Gi(r),ff(r,o,!0);break;case"textarea":Gi(r),pf(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Io)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Kc(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[vt]=t,e[fi]=r,Sh(e,t,!1,!1),t.stateNode=e;e:{switch(s=Qu(n,r),n){case"dialog":Q("cancel",e),Q("close",e),i=r;break;case"iframe":case"object":case"embed":Q("load",e),i=r;break;case"video":case"audio":for(i=0;i<zr.length;i++)Q(zr[i],e);i=r;break;case"source":Q("error",e),i=r;break;case"img":case"image":case"link":Q("error",e),Q("load",e),i=r;break;case"details":Q("toggle",e),i=r;break;case"input":af(e,r),i=zu(e,r),Q("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=X({},r,{value:void 0}),Q("invalid",e);break;case"textarea":cf(e,r),i=Vu(e,r),Q("invalid",e);break;default:i=r}Wu(n,i),u=i;for(o in u)if(u.hasOwnProperty(o)){var l=u[o];o==="style"?Zc(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Xc(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ti(e,l):typeof l=="number"&&ti(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ei.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Q("scroll",e):l!=null&&Ul(e,o,l,s))}switch(n){case"input":Gi(e),ff(e,r,!1);break;case"textarea":Gi(e),pf(e);break;case"option":r.value!=null&&e.setAttribute("value",""+tn(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Xn(e,!!r.multiple,o,!1):r.defaultValue!=null&&Xn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Io)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return me(t),null;case 6:if(e&&t.stateNode!=null)Rh(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(O(166));if(n=Rn(pi.current),Rn(_t.current),io(t)){if(r=t.stateNode,n=t.memoizedProps,r[vt]=t,(o=r.nodeValue!==n)&&(e=je,e!==null))switch(e.tag){case 3:ro(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ro(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vt]=t,t.stateNode=r}return me(t),null;case 13:if(q(G),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Y&&xe!==null&&t.mode&1&&!(t.flags&128))zp(),ur(),t.flags|=98560,o=!1;else if(o=io(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(O(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(O(317));o[vt]=t}else ur(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;me(t),o=!1}else rt!==null&&(Dl(rt),rt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||G.current&1?se===0&&(se=3):wa())),t.updateQueue!==null&&(t.flags|=4),me(t),null);case 4:return ar(),_l(e,t),e===null&&li(t.stateNode.containerInfo),me(t),null;case 10:return ua(t.type._context),me(t),null;case 17:return ke(t.type)&&Mo(),me(t),null;case 19:if(q(G),o=t.memoizedState,o===null)return me(t),null;if(r=(t.flags&128)!==0,s=o.rendering,s===null)if(r)xr(o,!1);else{if(se!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=$o(e),s!==null){for(t.flags|=128,xr(o,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return W(G,G.current&1|2),t.child}e=e.sibling}o.tail!==null&&re()>cr&&(t.flags|=128,r=!0,xr(o,!1),t.lanes=4194304)}else{if(!r)if(e=$o(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),xr(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Y)return me(t),null}else 2*re()-o.renderingStartTime>cr&&n!==1073741824&&(t.flags|=128,r=!0,xr(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(n=o.last,n!==null?n.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=re(),t.sibling=null,n=G.current,W(G,r?n&1|2:n&1),t):(me(t),null);case 22:case 23:return Ra(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Me&1073741824&&(me(t),t.subtreeFlags&6&&(t.flags|=8192)):me(t),null;case 24:return null;case 25:return null}throw Error(O(156,t.tag))}function Um(e,t){switch(ra(t),t.tag){case 1:return ke(t.type)&&Mo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ar(),q(Le),q(ge),pa(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ca(t),null;case 13:if(q(G),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(O(340));ur()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return q(G),null;case 4:return ar(),null;case 10:return ua(t.type._context),null;case 22:case 23:return Ra(),null;case 24:return null;default:return null}}var uo=!1,_e=!1,Vm=typeof WeakSet=="function"?WeakSet:Set,D=null;function Yn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ee(e,t,r)}else n.current=null}function gl(e,t,n){try{n()}catch(r){ee(e,t,r)}}var tc=!1;function Hm(e,t){if(nl=Lo,e=Pp(),ta(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,u=-1,l=-1,a=0,f=0,p=e,h=null;t:for(;;){for(var y;p!==n||i!==0&&p.nodeType!==3||(u=s+i),p!==o||r!==0&&p.nodeType!==3||(l=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(y=p.firstChild)!==null;)h=p,p=y;for(;;){if(p===e)break t;if(h===n&&++a===i&&(u=s),h===o&&++f===r&&(l=s),(y=p.nextSibling)!==null)break;p=h,h=p.parentNode}p=y}n=u===-1||l===-1?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(rl={focusedElem:e,selectionRange:n},Lo=!1,D=t;D!==null;)if(t=D,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,D=e;else for(;D!==null;){t=D;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,w=m.memoizedState,v=t.stateNode,c=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:et(t.type,g),w);v.__reactInternalSnapshotBeforeUpdate=c}break;case 3:var d=t.stateNode.containerInfo;d.nodeType===1?d.textContent="":d.nodeType===9&&d.documentElement&&d.removeChild(d.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(_){ee(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,D=e;break}D=t.return}return m=tc,tc=!1,m}function Gr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&gl(t,n,o)}i=i.next}while(i!==r)}}function Ps(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function El(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function wh(e){var t=e.alternate;t!==null&&(e.alternate=null,wh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[vt],delete t[fi],delete t[sl],delete t[Dm],delete t[Pm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Th(e){return e.tag===5||e.tag===3||e.tag===4}function nc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Th(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Sl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Io));else if(r!==4&&(e=e.child,e!==null))for(Sl(e,t,n),e=e.sibling;e!==null;)Sl(e,t,n),e=e.sibling}function Ol(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Ol(e,t,n),e=e.sibling;e!==null;)Ol(e,t,n),e=e.sibling}var pe=null,tt=!1;function jt(e,t,n){for(n=n.child;n!==null;)Dh(e,t,n),n=n.sibling}function Dh(e,t,n){if(mt&&typeof mt.onCommitFiberUnmount=="function")try{mt.onCommitFiberUnmount(gs,n)}catch{}switch(n.tag){case 5:_e||Yn(n,t);case 6:var r=pe,i=tt;pe=null,jt(e,t,n),pe=r,tt=i,pe!==null&&(tt?(e=pe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):pe.removeChild(n.stateNode));break;case 18:pe!==null&&(tt?(e=pe,n=n.stateNode,e.nodeType===8?gu(e.parentNode,n):e.nodeType===1&&gu(e,n),oi(e)):gu(pe,n.stateNode));break;case 4:r=pe,i=tt,pe=n.stateNode.containerInfo,tt=!0,jt(e,t,n),pe=r,tt=i;break;case 0:case 11:case 14:case 15:if(!_e&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&gl(n,t,s),i=i.next}while(i!==r)}jt(e,t,n);break;case 1:if(!_e&&(Yn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){ee(n,t,u)}jt(e,t,n);break;case 21:jt(e,t,n);break;case 22:n.mode&1?(_e=(r=_e)||n.memoizedState!==null,jt(e,t,n),_e=r):jt(e,t,n);break;default:jt(e,t,n)}}function rc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Vm),t.forEach(function(r){var i=Zm.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ze(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;u!==null;){switch(u.tag){case 5:pe=u.stateNode,tt=!1;break e;case 3:pe=u.stateNode.containerInfo,tt=!0;break e;case 4:pe=u.stateNode.containerInfo,tt=!0;break e}u=u.return}if(pe===null)throw Error(O(160));Dh(o,s,i),pe=null,tt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(a){ee(i,t,a)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ph(t,e),t=t.sibling}function Ph(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ze(t,e),ht(e),r&4){try{Gr(3,e,e.return),Ps(3,e)}catch(g){ee(e,e.return,g)}try{Gr(5,e,e.return)}catch(g){ee(e,e.return,g)}}break;case 1:Ze(t,e),ht(e),r&512&&n!==null&&Yn(n,n.return);break;case 5:if(Ze(t,e),ht(e),r&512&&n!==null&&Yn(n,n.return),e.flags&32){var i=e.stateNode;try{ti(i,"")}catch(g){ee(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=n!==null?n.memoizedProps:o,u=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&Yc(i,o),Qu(u,s);var a=Qu(u,o);for(s=0;s<l.length;s+=2){var f=l[s],p=l[s+1];f==="style"?Zc(i,p):f==="dangerouslySetInnerHTML"?Xc(i,p):f==="children"?ti(i,p):Ul(i,f,p,a)}switch(u){case"input":$u(i,o);break;case"textarea":Gc(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var y=o.value;y!=null?Xn(i,!!o.multiple,y,!1):h!==!!o.multiple&&(o.defaultValue!=null?Xn(i,!!o.multiple,o.defaultValue,!0):Xn(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){ee(e,e.return,g)}}break;case 6:if(Ze(t,e),ht(e),r&4){if(e.stateNode===null)throw Error(O(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){ee(e,e.return,g)}}break;case 3:if(Ze(t,e),ht(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{oi(t.containerInfo)}catch(g){ee(e,e.return,g)}break;case 4:Ze(t,e),ht(e);break;case 13:Ze(t,e),ht(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Sa=re())),r&4&&rc(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(_e=(a=_e)||f,Ze(t,e),_e=a):Ze(t,e),ht(e),r&8192){if(a=e.memoizedState!==null,(e.stateNode.isHidden=a)&&!f&&e.mode&1)for(D=e,f=e.child;f!==null;){for(p=D=f;D!==null;){switch(h=D,y=h.child,h.tag){case 0:case 11:case 14:case 15:Gr(4,h,h.return);break;case 1:Yn(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){ee(r,n,g)}}break;case 5:Yn(h,h.return);break;case 22:if(h.memoizedState!==null){oc(p);continue}}y!==null?(y.return=h,D=y):oc(p)}f=f.sibling}e:for(f=null,p=e;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,a?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=p.stateNode,l=p.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,u.style.display=Jc("display",s))}catch(g){ee(e,e.return,g)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=a?"":p.memoizedProps}catch(g){ee(e,e.return,g)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Ze(t,e),ht(e),r&4&&rc(e);break;case 21:break;default:Ze(t,e),ht(e)}}function ht(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Th(n)){var r=n;break e}n=n.return}throw Error(O(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ti(i,""),r.flags&=-33);var o=nc(e);Ol(e,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,u=nc(e);Sl(e,u,s);break;default:throw Error(O(161))}}catch(l){ee(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Wm(e,t,n){D=e,Nh(e)}function Nh(e,t,n){for(var r=(e.mode&1)!==0;D!==null;){var i=D,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||uo;if(!s){var u=i.alternate,l=u!==null&&u.memoizedState!==null||_e;u=uo;var a=_e;if(uo=s,(_e=l)&&!a)for(D=i;D!==null;)s=D,l=s.child,s.tag===22&&s.memoizedState!==null?sc(i):l!==null?(l.return=s,D=l):sc(i);for(;o!==null;)D=o,Nh(o),o=o.sibling;D=i,uo=u,_e=a}ic(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,D=o):ic(e)}}function ic(e){for(;D!==null;){var t=D;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:_e||Ps(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!_e)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:et(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&$f(t,o,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}$f(t,s,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var a=t.alternate;if(a!==null){var f=a.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&oi(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}_e||t.flags&512&&El(t)}catch(h){ee(t,t.return,h)}}if(t===e){D=null;break}if(n=t.sibling,n!==null){n.return=t.return,D=n;break}D=t.return}}function oc(e){for(;D!==null;){var t=D;if(t===e){D=null;break}var n=t.sibling;if(n!==null){n.return=t.return,D=n;break}D=t.return}}function sc(e){for(;D!==null;){var t=D;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ps(4,t)}catch(l){ee(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){ee(t,i,l)}}var o=t.return;try{El(t)}catch(l){ee(t,o,l)}break;case 5:var s=t.return;try{El(t)}catch(l){ee(t,s,l)}}}catch(l){ee(t,t.return,l)}if(t===e){D=null;break}var u=t.sibling;if(u!==null){u.return=t.return,D=u;break}D=t.return}}var Qm=Math.ceil,Ho=Mt.ReactCurrentDispatcher,ga=Mt.ReactCurrentOwner,qe=Mt.ReactCurrentBatchConfig,$=0,fe=null,ie=null,he=0,Me=0,Gn=ln(0),se=0,yi=null,Cn=0,Ns=0,Ea=0,Kr=null,Ne=null,Sa=0,cr=1/0,Ot=null,Wo=!1,Rl=null,Kt=null,lo=!1,Ht=null,Qo=0,Xr=0,wl=null,Eo=-1,So=0;function Oe(){return $&6?re():Eo!==-1?Eo:Eo=re()}function Xt(e){return e.mode&1?$&2&&he!==0?he&-he:Cm.transition!==null?(So===0&&(So=cp()),So):(e=V,e!==0||(e=window.event,e=e===void 0?16:_p(e.type)),e):1}function ot(e,t,n,r){if(50<Xr)throw Xr=0,wl=null,Error(O(185));Ni(e,n,r),(!($&2)||e!==fe)&&(e===fe&&(!($&2)&&(Ns|=n),se===4&&$t(e,he)),Ae(e,r),n===1&&$===0&&!(t.mode&1)&&(cr=re()+500,ws&&an()))}function Ae(e,t){var n=e.callbackNode;Cy(e,t);var r=Co(e,e===fe?he:0);if(r===0)n!==null&&vf(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&vf(n),t===1)e.tag===0?Nm(uc.bind(null,e)):jp(uc.bind(null,e)),wm(function(){!($&6)&&an()}),n=null;else{switch(pp(r)){case 1:n=ql;break;case 4:n=ap;break;case 16:n=No;break;case 536870912:n=fp;break;default:n=No}n=bh(n,Ch.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ch(e,t){if(Eo=-1,So=0,$&6)throw Error(O(327));var n=e.callbackNode;if(nr()&&e.callbackNode!==n)return null;var r=Co(e,e===fe?he:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=qo(e,r);else{t=r;var i=$;$|=2;var o=kh();(fe!==e||he!==t)&&(Ot=null,cr=re()+500,wn(e,t));do try{Gm();break}catch(u){Lh(e,u)}while(!0);sa(),Ho.current=o,$=i,ie!==null?t=0:(fe=null,he=0,t=se)}if(t!==0){if(t===2&&(i=Xu(e),i!==0&&(r=i,t=Tl(e,i))),t===1)throw n=yi,wn(e,0),$t(e,r),Ae(e,re()),n;if(t===6)$t(e,r);else{if(i=e.current.alternate,!(r&30)&&!qm(i)&&(t=qo(e,r),t===2&&(o=Xu(e),o!==0&&(r=o,t=Tl(e,o))),t===1))throw n=yi,wn(e,0),$t(e,r),Ae(e,re()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(O(345));case 2:En(e,Ne,Ot);break;case 3:if($t(e,r),(r&130023424)===r&&(t=Sa+500-re(),10<t)){if(Co(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Oe(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ol(En.bind(null,e,Ne,Ot),t);break}En(e,Ne,Ot);break;case 4:if($t(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-it(r);o=1<<s,s=t[s],s>i&&(i=s),r&=~o}if(r=i,r=re()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Qm(r/1960))-r,10<r){e.timeoutHandle=ol(En.bind(null,e,Ne,Ot),r);break}En(e,Ne,Ot);break;case 5:En(e,Ne,Ot);break;default:throw Error(O(329))}}}return Ae(e,re()),e.callbackNode===n?Ch.bind(null,e):null}function Tl(e,t){var n=Kr;return e.current.memoizedState.isDehydrated&&(wn(e,t).flags|=256),e=qo(e,t),e!==2&&(t=Ne,Ne=n,t!==null&&Dl(t)),e}function Dl(e){Ne===null?Ne=e:Ne.push.apply(Ne,e)}function qm(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!st(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $t(e,t){for(t&=~Ea,t&=~Ns,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if($&6)throw Error(O(327));nr();var t=Co(e,0);if(!(t&1))return Ae(e,re()),null;var n=qo(e,t);if(e.tag!==0&&n===2){var r=Xu(e);r!==0&&(t=r,n=Tl(e,r))}if(n===1)throw n=yi,wn(e,0),$t(e,t),Ae(e,re()),n;if(n===6)throw Error(O(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,En(e,Ne,Ot),Ae(e,re()),null}function Oa(e,t){var n=$;$|=1;try{return e(t)}finally{$=n,$===0&&(cr=re()+500,ws&&an())}}function Ln(e){Ht!==null&&Ht.tag===0&&!($&6)&&nr();var t=$;$|=1;var n=qe.transition,r=V;try{if(qe.transition=null,V=1,e)return e()}finally{V=r,qe.transition=n,$=t,!($&6)&&an()}}function Ra(){Me=Gn.current,q(Gn)}function wn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Rm(n)),ie!==null)for(n=ie.return;n!==null;){var r=n;switch(ra(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Mo();break;case 3:ar(),q(Le),q(ge),pa();break;case 5:ca(r);break;case 4:ar();break;case 13:q(G);break;case 19:q(G);break;case 10:ua(r.type._context);break;case 22:case 23:Ra()}n=n.return}if(fe=e,ie=e=Jt(e.current,null),he=Me=t,se=0,yi=null,Ea=Ns=Cn=0,Ne=Kr=null,On!==null){for(t=0;t<On.length;t++)if(n=On[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}On=null}return e}function Lh(e,t){do{var n=ie;try{if(sa(),mo.current=Vo,Uo){for(var r=K.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Uo=!1}if(Nn=0,ae=oe=K=null,Yr=!1,hi=0,ga.current=null,n===null||n.return===null){se=1,yi=t,ie=null;break}e:{var o=e,s=n.return,u=n,l=t;if(t=he,u.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var a=l,f=u,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=Yf(s);if(y!==null){y.flags&=-257,Gf(y,s,u,o,t),y.mode&1&&qf(o,a,t),t=y,l=a;var m=t.updateQueue;if(m===null){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}else{if(!(t&1)){qf(o,a,t),wa();break e}l=Error(O(426))}}else if(Y&&u.mode&1){var w=Yf(s);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Gf(w,s,u,o,t),ia(fr(l,u));break e}}o=l=fr(l,u),se!==4&&(se=2),Kr===null?Kr=[o]:Kr.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var v=hh(o,l,t);zf(o,v);break e;case 1:u=l;var c=o.type,d=o.stateNode;if(!(o.flags&128)&&(typeof c.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Kt===null||!Kt.has(d)))){o.flags|=65536,t&=-t,o.lanes|=t;var _=dh(o,u,t);zf(o,_);break e}}o=o.return}while(o!==null)}Ih(n)}catch(E){t=E,ie===n&&n!==null&&(ie=n=n.return);continue}break}while(!0)}function kh(){var e=Ho.current;return Ho.current=Vo,e===null?Vo:e}function wa(){(se===0||se===3||se===2)&&(se=4),fe===null||!(Cn&268435455)&&!(Ns&268435455)||$t(fe,he)}function qo(e,t){var n=$;$|=2;var r=kh();(fe!==e||he!==t)&&(Ot=null,wn(e,t));do try{Ym();break}catch(i){Lh(e,i)}while(!0);if(sa(),$=n,Ho.current=r,ie!==null)throw Error(O(261));return fe=null,he=0,se}function Ym(){for(;ie!==null;)Ah(ie)}function Gm(){for(;ie!==null&&!Ey();)Ah(ie)}function Ah(e){var t=xh(e.alternate,e,Me);e.memoizedProps=e.pendingProps,t===null?Ih(e):ie=t,ga.current=null}function Ih(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Um(n,t),n!==null){n.flags&=32767,ie=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{se=6,ie=null;return}}else if(n=$m(n,t,Me),n!==null){ie=n;return}if(t=t.sibling,t!==null){ie=t;return}ie=t=e}while(t!==null);se===0&&(se=5)}function En(e,t,n){var r=V,i=qe.transition;try{qe.transition=null,V=1,Km(e,t,n,r)}finally{qe.transition=i,V=r}return null}function Km(e,t,n,r){do nr();while(Ht!==null);if($&6)throw Error(O(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(O(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(Ly(e,o),e===fe&&(ie=fe=null,he=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||lo||(lo=!0,bh(No,function(){return nr(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=qe.transition,qe.transition=null;var s=V;V=1;var u=$;$|=4,ga.current=null,Hm(e,n),Ph(n,e),ym(rl),Lo=!!nl,rl=nl=null,e.current=n,Wm(n),Sy(),$=u,V=s,qe.transition=o}else e.current=n;if(lo&&(lo=!1,Ht=e,Qo=i),o=e.pendingLanes,o===0&&(Kt=null),wy(n.stateNode),Ae(e,re()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wo)throw Wo=!1,e=Rl,Rl=null,e;return Qo&1&&e.tag!==0&&nr(),o=e.pendingLanes,o&1?e===wl?Xr++:(Xr=0,wl=e):Xr=0,an(),null}function nr(){if(Ht!==null){var e=pp(Qo),t=qe.transition,n=V;try{if(qe.transition=null,V=16>e?16:e,Ht===null)var r=!1;else{if(e=Ht,Ht=null,Qo=0,$&6)throw Error(O(331));var i=$;for($|=4,D=e.current;D!==null;){var o=D,s=o.child;if(D.flags&16){var u=o.deletions;if(u!==null){for(var l=0;l<u.length;l++){var a=u[l];for(D=a;D!==null;){var f=D;switch(f.tag){case 0:case 11:case 15:Gr(8,f,o)}var p=f.child;if(p!==null)p.return=f,D=p;else for(;D!==null;){f=D;var h=f.sibling,y=f.return;if(wh(f),f===a){D=null;break}if(h!==null){h.return=y,D=h;break}D=y}}}var m=o.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}D=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,D=s;else e:for(;D!==null;){if(o=D,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Gr(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,D=v;break e}D=o.return}}var c=e.current;for(D=c;D!==null;){s=D;var d=s.child;if(s.subtreeFlags&2064&&d!==null)d.return=s,D=d;else e:for(s=c;D!==null;){if(u=D,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Ps(9,u)}}catch(E){ee(u,u.return,E)}if(u===s){D=null;break e}var _=u.sibling;if(_!==null){_.return=u.return,D=_;break e}D=u.return}}if($=i,an(),mt&&typeof mt.onPostCommitFiberRoot=="function")try{mt.onPostCommitFiberRoot(gs,e)}catch{}r=!0}return r}finally{V=n,qe.transition=t}}return!1}function lc(e,t,n){t=fr(n,t),t=hh(e,t,1),e=Gt(e,t,1),t=Oe(),e!==null&&(Ni(e,1,t),Ae(e,t))}function ee(e,t,n){if(e.tag===3)lc(e,e,n);else for(;t!==null;){if(t.tag===3){lc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Kt===null||!Kt.has(r))){e=fr(n,e),e=dh(t,e,1),t=Gt(t,e,1),e=Oe(),t!==null&&(Ni(t,1,e),Ae(t,e));break}}t=t.return}}function Xm(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Oe(),e.pingedLanes|=e.suspendedLanes&n,fe===e&&(he&n)===n&&(se===4||se===3&&(he&130023424)===he&&500>re()-Sa?wn(e,0):Ea|=n),Ae(e,t)}function Mh(e,t){t===0&&(e.mode&1?(t=Ji,Ji<<=1,!(Ji&130023424)&&(Ji=4194304)):t=1);var n=Oe();e=kt(e,t),e!==null&&(Ni(e,t,n),Ae(e,n))}function Jm(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Mh(e,n)}function Zm(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(O(314))}r!==null&&r.delete(t),Mh(e,n)}var xh;xh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Le.current)Ce=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ce=!1,zm(e,t,n);Ce=!!(e.flags&131072)}else Ce=!1,Y&&t.flags&1048576&&Bp(t,jo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;go(e,t),e=t.pendingProps;var i=sr(t,ge.current);tr(t,n),i=da(null,t,r,e,i,n);var o=va();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ke(r)?(o=!0,xo(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,aa(t),i.updater=Ts,t.stateNode=i,i._reactInternals=t,pl(t,r,e,n),t=vl(null,t,r,!0,o,n)):(t.tag=0,Y&&o&&na(t),Se(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(go(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=t_(r),e=et(r,e),i){case 0:t=dl(null,t,r,e,n);break e;case 1:t=Jf(null,t,r,e,n);break e;case 11:t=Kf(null,t,r,e,n);break e;case 14:t=Xf(null,t,r,et(r.type,e),n);break e}throw Error(O(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:et(r,i),dl(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:et(r,i),Jf(e,t,r,i,n);case 3:e:{if(_h(t),e===null)throw Error(O(387));r=t.pendingProps,o=t.memoizedState,i=o.element,Up(e,t),zo(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=fr(Error(O(423)),t),t=Zf(e,t,r,n,i);break e}else if(r!==i){i=fr(Error(O(424)),t),t=Zf(e,t,r,n,i);break e}else for(xe=Yt(t.stateNode.containerInfo.firstChild),je=t,Y=!0,rt=null,n=Qp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ur(),r===i){t=At(e,t,n);break e}Se(e,t,r,n)}t=t.child}return t;case 5:return qp(t),e===null&&al(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,il(r,i)?s=null:o!==null&&il(r,o)&&(t.flags|=32),mh(e,t),Se(e,t,s,n),t.child;case 6:return e===null&&al(t),null;case 13:return gh(e,t,n);case 4:return fa(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=lr(t,null,r,n):Se(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:et(r,i),Kf(e,t,r,i,n);case 7:return Se(e,t,t.pendingProps,n),t.child;case 8:return Se(e,t,t.pendingProps.children,n),t.child;case 12:return Se(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,W(Bo,r._currentValue),r._currentValue=s,o!==null)if(st(o.value,s)){if(o.children===i.children&&!Le.current){t=At(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var u=o.dependencies;if(u!==null){s=o.child;for(var l=u.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Pt(-1,n&-n),l.tag=2;var a=o.updateQueue;if(a!==null){a=a.shared;var f=a.pending;f===null?l.next=l:(l.next=f.next,f.next=l),a.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),fl(o.return,n,t),u.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(O(341));s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),fl(s,n,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Se(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,tr(t,n),i=Ge(i),r=r(i),t.flags|=1,Se(e,t,r,n),t.child;case 14:return r=t.type,i=et(r,t.pendingProps),i=et(r.type,i),Xf(e,t,r,i,n);case 15:return vh(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:et(r,i),go(e,t),t.tag=1,ke(r)?(e=!0,xo(t)):e=!1,tr(t,n),Hp(t,r,i),pl(t,r,i,n),vl(null,t,r,!0,e,n);case 19:return Eh(e,t,n);case 22:return yh(e,t,n)}throw Error(O(156,t.tag))};function bh(e,t){return lp(e,t)}function e_(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qe(e,t,n,r){return new e_(e,t,n,r)}function Ta(e){return e=e.prototype,!(!e||!e.isReactComponent)}function t_(e){if(typeof e=="function")return Ta(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Hl)return 11;if(e===Wl)return 14}return 2}function Jt(e,t){var n=e.alternate;return n===null?(n=Qe(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oo(e,t,n,r,i,o){var s=2;if(r=e,typeof e=="function")Ta(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Fn:return Tn(n.children,i,o,t);case Vl:s=8,i|=8;break;case bu:return e=Qe(12,n,t,i|2),e.elementType=bu,e.lanes=o,e;case ju:return e=Qe(13,n,t,i),e.elementType=ju,e.lanes=o,e;case Bu:return e=Qe(19,n,t,i),e.elementType=Bu,e.lanes=o,e;case Wc:return Cs(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Vc:s=10;break e;case Hc:s=9;break e;case Hl:s=11;break e;case Wl:s=14;break e;case Bt:s=16,r=null;break e}throw Error(O(130,e==null?e:typeof e,""))}return t=Qe(s,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function Tn(e,t,n,r){return e=Qe(7,e,r,t),e.lanes=n,e}function Cs(e,t,n,r){return e=Qe(22,e,r,t),e.elementType=Wc,e.lanes=n,e.stateNode={isHidden:!1},e}function Pu(e,t,n){return e=Qe(6,e,null,t),e.lanes=n,e}function Nu(e,t,n){return t=Qe(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function n_(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lu(0),this.expirationTimes=lu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Da(e,t,n,r,i,o,s,u,l){return e=new n_(e,t,n,u,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Qe(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},aa(o),e}function r_(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function jh(e){if(!e)return nn;e=e._reactInternals;e:{if(xn(e)!==e||e.tag!==1)throw Error(O(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ke(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(O(171))}if(e.tag===1){var n=e.type;if(ke(n))return bp(e,n,t)}return t}function Bh(e,t,n,r,i,o,s,u,l){return e=Da(n,r,!0,e,i,o,s,u,l),e.context=jh(null),n=e.current,r=Oe(),i=Xt(n),o=Pt(r,i),o.callback=t??null,Gt(n,o,i),e.current.lanes=i,Ni(e,i,r),Ae(e,r),e}function Ls(e,t,n,r){var i=t.current,o=Oe(),s=Xt(i);return n=jh(n),t.context===null?t.context=n:t.pendingContext=n,t=Pt(o,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Gt(i,t,s),e!==null&&(ot(e,i,s,o),yo(e,i,s)),s}function Yo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ac(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Pa(e,t){ac(e,t),(e=e.alternate)&&ac(e,t)}function i_(){return null}var Fh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Na(e){this._internalRoot=e}ks.prototype.render=Na.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(O(409));Ls(e,t,null,null)};ks.prototype.unmount=Na.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ln(function(){Ls(null,e,null,null)}),t[Lt]=null}};function ks(e){this._internalRoot=e}ks.prototype.unstable_scheduleHydration=function(e){if(e){var t=vp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<zt.length&&t!==0&&t<zt[n].priority;n++);zt.splice(n,0,e),n===0&&mp(e)}};function Ca(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function As(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function fc(){}function o_(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var a=Yo(s);o.call(a)}}var s=Bh(t,r,e,0,null,!1,!1,"",fc);return e._reactRootContainer=s,e[Lt]=s.current,li(e.nodeType===8?e.parentNode:e),Ln(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var a=Yo(l);u.call(a)}}var l=Da(e,0,!1,null,null,!1,!1,"",fc);return e._reactRootContainer=l,e[Lt]=l.current,li(e.nodeType===8?e.parentNode:e),Ln(function(){Ls(t,l,n,r)}),l}function Is(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var u=i;i=function(){var l=Yo(s);u.call(l)}}Ls(t,s,e,i)}else s=o_(n,t,e,i,r);return Yo(s)}hp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Fr(t.pendingLanes);n!==0&&(Yl(t,n|1),Ae(t,re()),!($&6)&&(cr=re()+500,an()))}break;case 13:Ln(function(){var r=kt(e,1);if(r!==null){var i=Oe();ot(r,e,1,i)}}),Pa(e,1)}};Gl=function(e){if(e.tag===13){var t=kt(e,134217728);if(t!==null){var n=Oe();ot(t,e,134217728,n)}Pa(e,134217728)}};dp=function(e){if(e.tag===13){var t=Xt(e),n=kt(e,t);if(n!==null){var r=Oe();ot(n,e,t,r)}Pa(e,t)}};vp=function(){return V};yp=function(e,t){var n=V;try{return V=e,t()}finally{V=n}};Yu=function(e,t,n){switch(t){case"input":if($u(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Rs(r);if(!i)throw Error(O(90));qc(r),$u(r,i)}}}break;case"textarea":Gc(e,n);break;case"select":t=n.value,t!=null&&Xn(e,!!n.multiple,t,!1)}};np=Oa;rp=Ln;var s_={usingClientEntryPoint:!1,Events:[Li,Vn,Rs,ep,tp,Oa]},br={findFiberByHostInstance:Sn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},u_={bundleType:br.bundleType,version:br.version,rendererPackageName:br.rendererPackageName,rendererConfig:br.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=sp(e),e===null?null:e.stateNode},findFiberByHostInstance:br.findFiberByHostInstance||i_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ao=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ao.isDisabled&&ao.supportsFiber)try{gs=ao.inject(u_),mt=ao}catch{}}Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s_;Ue.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ca(t))throw Error(O(200));return r_(e,t,null,n)};Ue.createRoot=function(e,t){if(!Ca(e))throw Error(O(299));var n=!1,r="",i=Fh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Da(e,1,!1,null,null,n,!1,r,i),e[Lt]=t.current,li(e.nodeType===8?e.parentNode:e),new Na(t)};Ue.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(O(188)):(e=Object.keys(e).join(","),Error(O(268,e)));return e=sp(t),e=e===null?null:e.stateNode,e};Ue.flushSync=function(e){return Ln(e)};Ue.hydrate=function(e,t,n){if(!As(t))throw Error(O(200));return Is(null,e,t,!0,n)};Ue.hydrateRoot=function(e,t,n){if(!Ca(e))throw Error(O(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=Fh;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=Bh(t,null,e,1,n??null,i,!1,o,s),e[Lt]=t.current,li(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new ks(t)};Ue.render=function(e,t,n){if(!As(t))throw Error(O(200));return Is(null,e,t,!1,n)};Ue.unmountComponentAtNode=function(e){if(!As(e))throw Error(O(40));return e._reactRootContainer?(Ln(function(){Is(null,null,e,!1,function(){e._reactRootContainer=null,e[Lt]=null})}),!0):!1};Ue.unstable_batchedUpdates=Oa;Ue.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!As(n))throw Error(O(200));if(e==null||e._reactInternals===void 0)throw Error(O(38));return Is(e,t,n,!1,r)};Ue.version="18.2.0-next-9e3b772b8-20220608";function zh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zh)}catch(e){console.error(e)}}zh(),Bc.exports=Ue;var l_=Bc.exports,cc=l_;Mu.createRoot=cc.createRoot,Mu.hydrateRoot=cc.hydrateRoot;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Pl=function(e,t){return Pl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Pl(e,t)};function $h(e,t){Pl(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function a_(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function f_(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function c_(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f_(arguments[t]));return e}var Uh=function(){function e(t,n){this.target=n,this.type=t}return e}(),p_=function(e){$h(t,e);function t(n,r){var i=e.call(this,"error",r)||this;return i.message=n.message,i.error=n,i}return t}(Uh),h_=function(e){$h(t,e);function t(n,r,i){n===void 0&&(n=1e3),r===void 0&&(r="");var o=e.call(this,"close",i)||this;return o.wasClean=!0,o.code=n,o.reason=r,o}return t}(Uh);/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */var d_=function(){if(typeof WebSocket<"u")return WebSocket},v_=function(e){return typeof e<"u"&&!!e&&e.CLOSING===2},_n={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1},y_=function(){function e(t,n,r){var i=this;r===void 0&&(r={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(o){i._debug("open event");var s=i._options.minUptime,u=s===void 0?_n.minUptime:s;clearTimeout(i._connectTimeout),i._uptimeTimeout=setTimeout(function(){return i._acceptOpen()},u),i._ws.binaryType=i._binaryType,i._messageQueue.forEach(function(l){return i._ws.send(l)}),i._messageQueue=[],i.onopen&&i.onopen(o),i._listeners.open.forEach(function(l){return i._callEventListener(o,l)})},this._handleMessage=function(o){i._debug("message event"),i.onmessage&&i.onmessage(o),i._listeners.message.forEach(function(s){return i._callEventListener(o,s)})},this._handleError=function(o){i._debug("error event",o.message),i._disconnect(void 0,o.message==="TIMEOUT"?"timeout":void 0),i.onerror&&i.onerror(o),i._debug("exec error listeners"),i._listeners.error.forEach(function(s){return i._callEventListener(o,s)}),i._connect()},this._handleClose=function(o){i._debug("close event"),i._clearTimeouts(),i._shouldReconnect&&i._connect(),i.onclose&&i.onclose(o),i._listeners.close.forEach(function(s){return i._callEventListener(o,s)})},this._url=t,this._protocols=n,this._options=r,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(e,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CONNECTING",{get:function(){return e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OPEN",{get:function(){return e.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSING",{get:function(){return e.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSED",{get:function(){return e.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(t){this._binaryType=t,this._ws&&(this._ws.binaryType=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bufferedAmount",{get:function(){var t=this._messageQueue.reduce(function(n,r){return typeof r=="string"?n+=r.length:r instanceof Blob?n+=r.size:n+=r.byteLength,n},0);return t+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?e.CLOSED:e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),e.prototype.close=function(t,n){if(t===void 0&&(t=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(t,n)},e.prototype.reconnect=function(t,n){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(t,n),this._connect())},e.prototype.send=function(t){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",t),this._ws.send(t);else{var n=this._options.maxEnqueuedMessages,r=n===void 0?_n.maxEnqueuedMessages:n;this._messageQueue.length<r&&(this._debug("enqueue",t),this._messageQueue.push(t))}},e.prototype.addEventListener=function(t,n){this._listeners[t]&&this._listeners[t].push(n)},e.prototype.dispatchEvent=function(t){var n,r,i=this._listeners[t.type];if(i)try{for(var o=a_(i),s=o.next();!s.done;s=o.next()){var u=s.value;this._callEventListener(t,u)}}catch(l){n={error:l}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return!0},e.prototype.removeEventListener=function(t,n){this._listeners[t]&&(this._listeners[t]=this._listeners[t].filter(function(r){return r!==n}))},e.prototype._debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._options.debug&&console.log.apply(console,c_(["RWS>"],t))},e.prototype._getNextDelay=function(){var t=this._options,n=t.reconnectionDelayGrowFactor,r=n===void 0?_n.reconnectionDelayGrowFactor:n,i=t.minReconnectionDelay,o=i===void 0?_n.minReconnectionDelay:i,s=t.maxReconnectionDelay,u=s===void 0?_n.maxReconnectionDelay:s,l=0;return this._retryCount>0&&(l=o*Math.pow(r,this._retryCount-1),l>u&&(l=u)),this._debug("next delay",l),l},e.prototype._wait=function(){var t=this;return new Promise(function(n){setTimeout(n,t._getNextDelay())})},e.prototype._getNextUrl=function(t){if(typeof t=="string")return Promise.resolve(t);if(typeof t=="function"){var n=t();if(typeof n=="string")return Promise.resolve(n);if(n.then)return n}throw Error("Invalid URL")},e.prototype._connect=function(){var t=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var n=this._options,r=n.maxRetries,i=r===void 0?_n.maxRetries:r,o=n.connectionTimeout,s=o===void 0?_n.connectionTimeout:o,u=n.WebSocket,l=u===void 0?d_():u;if(this._retryCount>=i){this._debug("max retries reached",this._retryCount,">=",i);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!v_(l))throw Error("No valid WebSocket class provided");this._wait().then(function(){return t._getNextUrl(t._url)}).then(function(a){t._closeCalled||(t._debug("connect",{url:a,protocols:t._protocols}),t._ws=t._protocols?new l(a,t._protocols):new l(a),t._ws.binaryType=t._binaryType,t._connectLock=!1,t._addListeners(),t._connectTimeout=setTimeout(function(){return t._handleTimeout()},s))})}},e.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new p_(Error("TIMEOUT"),this))},e.prototype._disconnect=function(t,n){if(t===void 0&&(t=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(t,n),this._handleClose(new h_(t,n,this))}catch{}}},e.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},e.prototype._callEventListener=function(t,n){"handleEvent"in n?n.handleEvent(t):n(t)},e.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},e.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},e.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},e}();function Vh(e,...t){return(...n)=>e(...t,...n)}function Ai(e){return function(...t){var n=t.pop();return e.call(this,t,n)}}var m_=typeof queueMicrotask=="function"&&queueMicrotask,Hh=typeof setImmediate=="function"&&setImmediate,Wh=typeof process=="object"&&typeof process.nextTick=="function";function Qh(e){setTimeout(e,0)}function qh(e){return(t,...n)=>e(()=>t(...n))}var $r;m_?$r=queueMicrotask:Hh?$r=setImmediate:Wh?$r=process.nextTick:$r=Qh;var Zt=qh($r);function mi(e){return Ii(e)?function(...t){const n=t.pop(),r=e.apply(this,t);return pc(r,n)}:Ai(function(t,n){var r;try{r=e.apply(this,t)}catch(i){return n(i)}if(r&&typeof r.then=="function")return pc(r,n);n(null,r)})}function pc(e,t){return e.then(n=>{hc(t,null,n)},n=>{hc(t,n&&(n instanceof Error||n.message)?n:new Error(n))})}function hc(e,t,n){try{e(t,n)}catch(r){Zt(i=>{throw i},r)}}function Ii(e){return e[Symbol.toStringTag]==="AsyncFunction"}function __(e){return e[Symbol.toStringTag]==="AsyncGenerator"}function g_(e){return typeof e[Symbol.asyncIterator]=="function"}function F(e){if(typeof e!="function")throw new Error("expected a function");return Ii(e)?mi(e):e}function b(e,t){if(t||(t=e.length),!t)throw new Error("arity is undefined");function n(...r){return typeof r[t-1]=="function"?e.apply(this,r):new Promise((i,o)=>{r[t-1]=(s,...u)=>{if(s)return o(s);i(u.length>1?u:u[0])},e.apply(this,r)})}return n}function Yh(e){return function(n,...r){return b(function(o){var s=this;return e(n,(u,l)=>{F(u).apply(s,r.concat(l))},o)})}}function La(e,t,n,r){t=t||[];var i=[],o=0,s=F(n);return e(t,(u,l,a)=>{var f=o++;s(u,(p,h)=>{i[f]=h,a(p)})},u=>{r(u,i)})}function Ms(e){return e&&typeof e.length=="number"&&e.length>=0&&e.length%1===0}const E_={};var xs=E_;function fn(e){function t(...n){if(e!==null){var r=e;e=null,r.apply(this,n)}}return Object.assign(t,e),t}function S_(e){return e[Symbol.iterator]&&e[Symbol.iterator]()}function O_(e){var t=-1,n=e.length;return function(){return++t<n?{value:e[t],key:t}:null}}function R_(e){var t=-1;return function(){var r=e.next();return r.done?null:(t++,{value:r.value,key:t})}}function w_(e){var t=e?Object.keys(e):[],n=-1,r=t.length;return function i(){var o=t[++n];return o==="__proto__"?i():n<r?{value:e[o],key:o}:null}}function T_(e){if(Ms(e))return O_(e);var t=S_(e);return t?R_(t):w_(e)}function cn(e){return function(...t){if(e===null)throw new Error("Callback was already called.");var n=e;e=null,n.apply(this,t)}}function dc(e,t,n,r){let i=!1,o=!1,s=!1,u=0,l=0;function a(){u>=t||s||i||(s=!0,e.next().then(({value:h,done:y})=>{if(!(o||i)){if(s=!1,y){i=!0,u<=0&&r(null);return}u++,n(h,l,f),l++,a()}}).catch(p))}function f(h,y){if(u-=1,!o){if(h)return p(h);if(h===!1){i=!0,o=!0;return}if(y===xs||i&&u<=0)return i=!0,r(null);a()}}function p(h){o||(s=!1,i=!0,r(h))}a()}var lt=e=>(t,n,r)=>{if(r=fn(r),e<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!t)return r(null);if(__(t))return dc(t,e,n,r);if(g_(t))return dc(t[Symbol.asyncIterator](),e,n,r);var i=T_(t),o=!1,s=!1,u=0,l=!1;function a(p,h){if(!s)if(u-=1,p)o=!0,r(p);else if(p===!1)o=!0,s=!0;else{if(h===xs||o&&u<=0)return o=!0,r(null);l||f()}}function f(){for(l=!0;u<e&&!o;){var p=i();if(p===null){o=!0,u<=0&&r(null);return}u+=1,n(p.value,p.key,cn(a))}l=!1}f()};function D_(e,t,n,r){return lt(t)(e,F(n),r)}var pr=b(D_,4);function P_(e,t,n){n=fn(n);var r=0,i=0,{length:o}=e,s=!1;o===0&&n(null);function u(l,a){l===!1&&(s=!0),s!==!0&&(l?n(l):(++i===o||a===xs)&&n(null))}for(;r<o;r++)t(e[r],r,cn(u))}function N_(e,t,n){return pr(e,1/0,t,n)}function C_(e,t,n){var r=Ms(e)?P_:N_;return r(e,F(t),n)}var ze=b(C_,3);function L_(e,t,n){return La(ze,e,t,n)}var bs=b(L_,3),Gh=Yh(bs);function k_(e,t,n){return pr(e,1,t,n)}var ut=b(k_,3);function A_(e,t,n){return La(ut,e,t,n)}var ka=b(A_,3),Kh=Yh(ka);const Sr=Symbol("promiseCallback");function hr(){let e,t;function n(r,...i){if(r)return t(r);e(i.length>1?i:i[0])}return n[Sr]=new Promise((r,i)=>{e=r,t=i}),n}function Aa(e,t,n){typeof t!="number"&&(n=t,t=null),n=fn(n||hr());var r=Object.keys(e).length;if(!r)return n(null);t||(t=r);var i={},o=0,s=!1,u=!1,l=Object.create(null),a=[],f=[],p={};Object.keys(e).forEach(d=>{var _=e[d];if(!Array.isArray(_)){h(d,[_]),f.push(d);return}var E=_.slice(0,_.length-1),S=E.length;if(S===0){h(d,_),f.push(d);return}p[d]=S,E.forEach(R=>{if(!e[R])throw new Error("async.auto task `"+d+"` has a non-existent dependency `"+R+"` in "+E.join(", "));m(R,()=>{S--,S===0&&h(d,_)})})}),v(),y();function h(d,_){a.push(()=>w(d,_))}function y(){if(!s){if(a.length===0&&o===0)return n(null,i);for(;a.length&&o<t;){var d=a.shift();d()}}}function m(d,_){var E=l[d];E||(E=l[d]=[]),E.push(_)}function g(d){var _=l[d]||[];_.forEach(E=>E()),y()}function w(d,_){if(!u){var E=cn((R,...T)=>{if(o--,R===!1){s=!0;return}if(T.length<2&&([T]=T),R){var C={};if(Object.keys(i).forEach(L=>{C[L]=i[L]}),C[d]=T,u=!0,l=Object.create(null),s)return;n(R,C)}else i[d]=T,g(d)});o++;var S=F(_[_.length-1]);_.length>1?S(i,E):S(E)}}function v(){for(var d,_=0;f.length;)d=f.pop(),_++,c(d).forEach(E=>{--p[E]===0&&f.push(E)});if(_!==r)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}function c(d){var _=[];return Object.keys(e).forEach(E=>{const S=e[E];Array.isArray(S)&&S.indexOf(d)>=0&&_.push(E)}),_}return n[Sr]}var I_=/^(?:async\s+)?(?:function)?\s*\w*\s*\(\s*([^)]+)\s*\)(?:\s*{)/,M_=/^(?:async\s+)?\(?\s*([^)=]+)\s*\)?(?:\s*=>)/,x_=/,/,b_=/(=.+)?(\s*)$/;function j_(e){let t="",n=0,r=e.indexOf("*/");for(;n<e.length;)if(e[n]==="/"&&e[n+1]==="/"){let i=e.indexOf(`
`,n);n=i===-1?e.length:i}else if(r!==-1&&e[n]==="/"&&e[n+1]==="*"){let i=e.indexOf("*/",n);i!==-1?(n=i+2,r=e.indexOf("*/",n)):(t+=e[n],n++)}else t+=e[n],n++;return t}function B_(e){const t=j_(e.toString());let n=t.match(I_);if(n||(n=t.match(M_)),!n)throw new Error(`could not parse args in autoInject
Source:
`+t);let[,r]=n;return r.replace(/\s/g,"").split(x_).map(i=>i.replace(b_,"").trim())}function Xh(e,t){var n={};return Object.keys(e).forEach(r=>{var i=e[r],o,s=Ii(i),u=!s&&i.length===1||s&&i.length===0;if(Array.isArray(i))o=[...i],i=o.pop(),n[r]=o.concat(o.length>0?l:i);else if(u)n[r]=i;else{if(o=B_(i),i.length===0&&!s&&o.length===0)throw new Error("autoInject task functions require explicit parameters.");s||o.pop(),n[r]=o.concat(l)}function l(a,f){var p=o.map(h=>a[h]);p.push(f),F(i)(...p)}}),Aa(n,t)}class F_{constructor(){this.head=this.tail=null,this.length=0}removeLink(t){return t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev,t.prev=t.next=null,this.length-=1,t}empty(){for(;this.head;)this.shift();return this}insertAfter(t,n){n.prev=t,n.next=t.next,t.next?t.next.prev=n:this.tail=n,t.next=n,this.length+=1}insertBefore(t,n){n.prev=t.prev,n.next=t,t.prev?t.prev.next=n:this.head=n,t.prev=n,this.length+=1}unshift(t){this.head?this.insertBefore(this.head,t):vc(this,t)}push(t){this.tail?this.insertAfter(this.tail,t):vc(this,t)}shift(){return this.head&&this.removeLink(this.head)}pop(){return this.tail&&this.removeLink(this.tail)}toArray(){return[...this]}*[Symbol.iterator](){for(var t=this.head;t;)yield t.data,t=t.next}remove(t){for(var n=this.head;n;){var{next:r}=n;t(n)&&this.removeLink(n),n=r}return this}}function vc(e,t){e.length=1,e.head=e.tail=t}function Ia(e,t,n){if(t==null)t=1;else if(t===0)throw new RangeError("Concurrency must not be zero");var r=F(e),i=0,o=[];const s={error:[],drain:[],saturated:[],unsaturated:[],empty:[]};function u(c,d){s[c].push(d)}function l(c,d){const _=(...E)=>{a(c,_),d(...E)};s[c].push(_)}function a(c,d){if(!c)return Object.keys(s).forEach(_=>s[_]=[]);if(!d)return s[c]=[];s[c]=s[c].filter(_=>_!==d)}function f(c,...d){s[c].forEach(_=>_(...d))}var p=!1;function h(c,d,_,E){if(E!=null&&typeof E!="function")throw new Error("task callback must be a function");v.started=!0;var S,R;function T(L,...Z){if(L)return _?R(L):S();if(Z.length<=1)return S(Z[0]);S(Z)}var C=v._createTaskItem(c,_?T:E||T);if(d?v._tasks.unshift(C):v._tasks.push(C),p||(p=!0,Zt(()=>{p=!1,v.process()})),_||!E)return new Promise((L,Z)=>{S=L,R=Z})}function y(c){return function(d,..._){i-=1;for(var E=0,S=c.length;E<S;E++){var R=c[E],T=o.indexOf(R);T===0?o.shift():T>0&&o.splice(T,1),R.callback(d,..._),d!=null&&f("error",d,R.data)}i<=v.concurrency-v.buffer&&f("unsaturated"),v.idle()&&f("drain"),v.process()}}function m(c){return c.length===0&&v.idle()?(Zt(()=>f("drain")),!0):!1}const g=c=>d=>{if(!d)return new Promise((_,E)=>{l(c,(S,R)=>{if(S)return E(S);_(R)})});a(c),u(c,d)};var w=!1,v={_tasks:new F_,_createTaskItem(c,d){return{data:c,callback:d}},*[Symbol.iterator](){yield*v._tasks[Symbol.iterator]()},concurrency:t,payload:n,buffer:t/4,started:!1,paused:!1,push(c,d){return Array.isArray(c)?m(c)?void 0:c.map(_=>h(_,!1,!1,d)):h(c,!1,!1,d)},pushAsync(c,d){return Array.isArray(c)?m(c)?void 0:c.map(_=>h(_,!1,!0,d)):h(c,!1,!0,d)},kill(){a(),v._tasks.empty()},unshift(c,d){return Array.isArray(c)?m(c)?void 0:c.map(_=>h(_,!0,!1,d)):h(c,!0,!1,d)},unshiftAsync(c,d){return Array.isArray(c)?m(c)?void 0:c.map(_=>h(_,!0,!0,d)):h(c,!0,!0,d)},remove(c){v._tasks.remove(c)},process(){if(!w){for(w=!0;!v.paused&&i<v.concurrency&&v._tasks.length;){var c=[],d=[],_=v._tasks.length;v.payload&&(_=Math.min(_,v.payload));for(var E=0;E<_;E++){var S=v._tasks.shift();c.push(S),o.push(S),d.push(S.data)}i+=1,v._tasks.length===0&&f("empty"),i===v.concurrency&&f("saturated");var R=cn(y(c));r(d,R)}w=!1}},length(){return v._tasks.length},running(){return i},workersList(){return o},idle(){return v._tasks.length+i===0},pause(){v.paused=!0},resume(){v.paused!==!1&&(v.paused=!1,Zt(v.process))}};return Object.defineProperties(v,{saturated:{writable:!1,value:g("saturated")},unsaturated:{writable:!1,value:g("unsaturated")},empty:{writable:!1,value:g("empty")},drain:{writable:!1,value:g("drain")},error:{writable:!1,value:g("error")}}),v}function Jh(e,t){return Ia(e,1,t)}function Zh(e,t,n){return Ia(e,t,n)}function z_(e,t,n,r){r=fn(r);var i=F(n);return ut(e,(o,s,u)=>{i(t,o,(l,a)=>{t=a,u(l)})},o=>r(o,t))}var en=b(z_,4);function Ma(...e){var t=e.map(F);return function(...n){var r=this,i=n[n.length-1];return typeof i=="function"?n.pop():i=hr(),en(t,n,(o,s,u)=>{s.apply(r,o.concat((l,...a)=>{u(l,a)}))},(o,s)=>i(o,...s)),i[Sr]}}function ed(...e){return Ma(...e.reverse())}function $_(e,t,n,r){return La(lt(t),e,n,r)}var Mi=b($_,4);function U_(e,t,n,r){var i=F(n);return Mi(e,t,(o,s)=>{i(o,(u,...l)=>u?s(u):s(u,l))},(o,s)=>{for(var u=[],l=0;l<s.length;l++)s[l]&&(u=u.concat(...s[l]));return r(o,u)})}var dr=b(U_,4);function V_(e,t,n){return dr(e,1/0,t,n)}var Go=b(V_,3);function H_(e,t,n){return dr(e,1,t,n)}var Ko=b(H_,3);function td(...e){return function(...t){var n=t.pop();return n(null,...e)}}function xt(e,t){return(n,r,i,o)=>{var s=!1,u;const l=F(i);n(r,(a,f,p)=>{l(a,(h,y)=>{if(h||h===!1)return p(h);if(e(y)&&!u)return s=!0,u=t(!0,a),p(null,xs);p()})},a=>{if(a)return o(a);o(null,s?u:t(!1))})}}function W_(e,t,n){return xt(r=>r,(r,i)=>i)(ze,e,t,n)}var Xo=b(W_,3);function Q_(e,t,n,r){return xt(i=>i,(i,o)=>o)(lt(t),e,n,r)}var Jo=b(Q_,4);function q_(e,t,n){return xt(r=>r,(r,i)=>i)(lt(1),e,t,n)}var Zo=b(q_,3);function nd(e){return(t,...n)=>F(t)(...n,(r,...i)=>{typeof console=="object"&&(r?console.error&&console.error(r):console[e]&&i.forEach(o=>console[e](o)))})}var rd=nd("dir");function Y_(e,t,n){n=cn(n);var r=F(e),i=F(t),o;function s(l,...a){if(l)return n(l);l!==!1&&(o=a,i(...a,u))}function u(l,a){if(l)return n(l);if(l!==!1){if(!a)return n(null,...o);r(s)}}return u(null,!0)}var _i=b(Y_,3);function id(e,t,n){const r=F(t);return _i(e,(...i)=>{const o=i.pop();r(...i,(s,u)=>o(s,!u))},n)}function od(e){return(t,n,r)=>e(t,r)}function G_(e,t,n){return ze(e,od(F(t)),n)}var es=b(G_,3);function K_(e,t,n,r){return lt(t)(e,od(F(n)),r)}var gi=b(K_,4);function X_(e,t,n){return gi(e,1,t,n)}var Ei=b(X_,3);function xa(e){return Ii(e)?e:function(...t){var n=t.pop(),r=!0;t.push((...i)=>{r?Zt(()=>n(...i)):n(...i)}),e.apply(this,t),r=!1}}function J_(e,t,n){return xt(r=>!r,r=>!r)(ze,e,t,n)}var ts=b(J_,3);function Z_(e,t,n,r){return xt(i=>!i,i=>!i)(lt(t),e,n,r)}var ns=b(Z_,4);function eg(e,t,n){return xt(r=>!r,r=>!r)(ut,e,t,n)}var rs=b(eg,3);function tg(e,t,n,r){var i=new Array(t.length);e(t,(o,s,u)=>{n(o,(l,a)=>{i[s]=!!a,u(l)})},o=>{if(o)return r(o);for(var s=[],u=0;u<t.length;u++)i[u]&&s.push(t[u]);r(null,s)})}function ng(e,t,n,r){var i=[];e(t,(o,s,u)=>{n(o,(l,a)=>{if(l)return u(l);a&&i.push({index:s,value:o}),u(l)})},o=>{if(o)return r(o);r(null,i.sort((s,u)=>s.index-u.index).map(s=>s.value))})}function js(e,t,n,r){var i=Ms(t)?tg:ng;return i(e,t,F(n),r)}function rg(e,t,n){return js(ze,e,t,n)}var is=b(rg,3);function ig(e,t,n,r){return js(lt(t),e,n,r)}var os=b(ig,4);function og(e,t,n){return js(ut,e,t,n)}var ss=b(og,3);function sg(e,t){var n=cn(t),r=F(xa(e));function i(o){if(o)return n(o);o!==!1&&r(i)}return i()}var sd=b(sg,2);function ug(e,t,n,r){var i=F(n);return Mi(e,t,(o,s)=>{i(o,(u,l)=>u?s(u):s(u,{key:l,val:o}))},(o,s)=>{for(var u={},{hasOwnProperty:l}=Object.prototype,a=0;a<s.length;a++)if(s[a]){var{key:f}=s[a],{val:p}=s[a];l.call(u,f)?u[f].push(p):u[f]=[p]}return r(o,u)})}var Bs=b(ug,4);function ud(e,t,n){return Bs(e,1/0,t,n)}function ld(e,t,n){return Bs(e,1,t,n)}var ad=nd("log");function lg(e,t,n,r){r=fn(r);var i={},o=F(n);return lt(t)(e,(s,u,l)=>{o(s,u,(a,f)=>{if(a)return l(a);i[u]=f,l(a)})},s=>r(s,i))}var Fs=b(lg,4);function fd(e,t,n){return Fs(e,1/0,t,n)}function cd(e,t,n){return Fs(e,1,t,n)}function pd(e,t=n=>n){var n=Object.create(null),r=Object.create(null),i=F(e),o=Ai((s,u)=>{var l=t(...s);l in n?Zt(()=>u(null,...n[l])):l in r?r[l].push(u):(r[l]=[u],i(...s,(a,...f)=>{a||(n[l]=f);var p=r[l];delete r[l];for(var h=0,y=p.length;h<y;h++)p[h](a,...f)}))});return o.memo=n,o.unmemoized=e,o}var Ro;Wh?Ro=process.nextTick:Hh?Ro=setImmediate:Ro=Qh;var hd=qh(Ro),ba=b((e,t,n)=>{var r=Ms(t)?[]:{};e(t,(i,o,s)=>{F(i)((u,...l)=>{l.length<2&&([l]=l),r[o]=l,s(u)})},i=>n(i,r))},3);function dd(e,t){return ba(ze,e,t)}function vd(e,t,n){return ba(lt(t),e,n)}function ja(e,t){var n=F(e);return Ia((r,i)=>{n(r[0],i)},t,1)}class ag{constructor(){this.heap=[],this.pushCount=Number.MIN_SAFE_INTEGER}get length(){return this.heap.length}empty(){return this.heap=[],this}percUp(t){let n;for(;t>0&&Cu(this.heap[t],this.heap[n=yc(t)]);){let r=this.heap[t];this.heap[t]=this.heap[n],this.heap[n]=r,t=n}}percDown(t){let n;for(;(n=fg(t))<this.heap.length&&(n+1<this.heap.length&&Cu(this.heap[n+1],this.heap[n])&&(n=n+1),!Cu(this.heap[t],this.heap[n]));){let r=this.heap[t];this.heap[t]=this.heap[n],this.heap[n]=r,t=n}}push(t){t.pushCount=++this.pushCount,this.heap.push(t),this.percUp(this.heap.length-1)}unshift(t){return this.heap.push(t)}shift(){let[t]=this.heap;return this.heap[0]=this.heap[this.heap.length-1],this.heap.pop(),this.percDown(0),t}toArray(){return[...this]}*[Symbol.iterator](){for(let t=0;t<this.heap.length;t++)yield this.heap[t].data}remove(t){let n=0;for(let r=0;r<this.heap.length;r++)t(this.heap[r])||(this.heap[n]=this.heap[r],n++);this.heap.splice(n);for(let r=yc(this.heap.length-1);r>=0;r--)this.percDown(r);return this}}function fg(e){return(e<<1)+1}function yc(e){return(e+1>>1)-1}function Cu(e,t){return e.priority!==t.priority?e.priority<t.priority:e.pushCount<t.pushCount}function yd(e,t){var n=ja(e,t),{push:r,pushAsync:i}=n;n._tasks=new ag,n._createTaskItem=({data:s,priority:u},l)=>({data:s,priority:u,callback:l});function o(s,u){return Array.isArray(s)?s.map(l=>({data:l,priority:u})):{data:s,priority:u}}return n.push=function(s,u=0,l){return r(o(s,u),l)},n.pushAsync=function(s,u=0,l){return i(o(s,u),l)},delete n.unshift,delete n.unshiftAsync,n}function cg(e,t){if(t=fn(t),!Array.isArray(e))return t(new TypeError("First argument to race must be an array of functions"));if(!e.length)return t();for(var n=0,r=e.length;n<r;n++)F(e[n])(t)}var md=b(cg,2);function us(e,t,n,r){var i=[...e].reverse();return en(i,t,n,r)}function ls(e){var t=F(e);return Ai(function(r,i){return r.push((o,...s)=>{let u={};if(o&&(u.error=o),s.length>0){var l=s;s.length<=1&&([l]=s),u.value=l}i(null,u)}),t.apply(this,r)})}function _d(e){var t;return Array.isArray(e)?t=e.map(ls):(t={},Object.keys(e).forEach(n=>{t[n]=ls.call(this,e[n])})),t}function Ba(e,t,n,r){const i=F(n);return js(e,t,(o,s)=>{i(o,(u,l)=>{s(u,!l)})},r)}function pg(e,t,n){return Ba(ze,e,t,n)}var gd=b(pg,3);function hg(e,t,n,r){return Ba(lt(t),e,n,r)}var Ed=b(hg,4);function dg(e,t,n){return Ba(ut,e,t,n)}var Sd=b(dg,3);function Od(e){return function(){return e}}const Nl=5,Rd=0;function as(e,t,n){var r={times:Nl,intervalFunc:Od(Rd)};if(arguments.length<3&&typeof e=="function"?(n=t||hr(),t=e):(vg(r,e),n=n||hr()),typeof t!="function")throw new Error("Invalid arguments for async.retry");var i=F(t),o=1;function s(){i((u,...l)=>{u!==!1&&(u&&o++<r.times&&(typeof r.errorFilter!="function"||r.errorFilter(u))?setTimeout(s,r.intervalFunc(o-1)):n(u,...l))})}return s(),n[Sr]}function vg(e,t){if(typeof t=="object")e.times=+t.times||Nl,e.intervalFunc=typeof t.interval=="function"?t.interval:Od(+t.interval||Rd),e.errorFilter=t.errorFilter;else if(typeof t=="number"||typeof t=="string")e.times=+t||Nl;else throw new Error("Invalid arguments for async.retry")}function wd(e,t){t||(t=e,e=null);let n=e&&e.arity||t.length;Ii(t)&&(n+=1);var r=F(t);return Ai((i,o)=>{(i.length<n-1||o==null)&&(i.push(o),o=hr());function s(u){r(...i,u)}return e?as(e,s,o):as(s,o),o[Sr]})}function Td(e,t){return ba(ut,e,t)}function yg(e,t,n){return xt(Boolean,r=>r)(ze,e,t,n)}var fs=b(yg,3);function mg(e,t,n,r){return xt(Boolean,i=>i)(lt(t),e,n,r)}var cs=b(mg,4);function _g(e,t,n){return xt(Boolean,r=>r)(ut,e,t,n)}var ps=b(_g,3);function gg(e,t,n){var r=F(t);return bs(e,(o,s)=>{r(o,(u,l)=>{if(u)return s(u);s(u,{value:o,criteria:l})})},(o,s)=>{if(o)return n(o);n(null,s.sort(i).map(u=>u.value))});function i(o,s){var u=o.criteria,l=s.criteria;return u<l?-1:u>l?1:0}}var Dd=b(gg,3);function Pd(e,t,n){var r=F(e);return Ai((i,o)=>{var s=!1,u;function l(){var a=e.name||"anonymous",f=new Error('Callback function "'+a+'" timed out.');f.code="ETIMEDOUT",n&&(f.info=n),s=!0,o(f)}i.push((...a)=>{s||(o(...a),clearTimeout(u))}),u=setTimeout(l,t),r(...i)})}function Eg(e){for(var t=Array(e);e--;)t[e]=e;return t}function zs(e,t,n,r){var i=F(n);return Mi(Eg(e),t,i,r)}function Nd(e,t,n){return zs(e,1/0,t,n)}function Cd(e,t,n){return zs(e,1,t,n)}function Ld(e,t,n,r){arguments.length<=3&&typeof t=="function"&&(r=n,n=t,t=Array.isArray(e)?[]:{}),r=fn(r||hr());var i=F(n);return ze(e,(o,s,u)=>{i(t,o,s,u)},o=>r(o,t)),r[Sr]}function Sg(e,t){var n=null,r;return Ei(e,(i,o)=>{F(i)((s,...u)=>{if(s===!1)return o(s);u.length<2?[r]=u:r=u,n=s,o(s?null:{})})},()=>t(n,r))}var kd=b(Sg);function Ad(e){return(...t)=>(e.unmemoized||e)(...t)}function Og(e,t,n){n=cn(n);var r=F(t),i=F(e),o=[];function s(l,...a){if(l)return n(l);o=a,l!==!1&&i(u)}function u(l,a){if(l)return n(l);if(l!==!1){if(!a)return n(null,...o);r(s)}}return i(u)}var Si=b(Og,3);function Id(e,t,n){const r=F(e);return Si(i=>r((o,s)=>i(o,!s)),t,n)}function Rg(e,t){if(t=fn(t),!Array.isArray(e))return t(new Error("First argument to waterfall must be an array of functions"));if(!e.length)return t();var n=0;function r(o){var s=F(e[n++]);s(...o,cn(i))}function i(o,...s){if(o!==!1){if(o||n===e.length)return t(o,...s);r(s)}}r([])}var Md=b(Rg),wg={apply:Vh,applyEach:Gh,applyEachSeries:Kh,asyncify:mi,auto:Aa,autoInject:Xh,cargo:Jh,cargoQueue:Zh,compose:ed,concat:Go,concatLimit:dr,concatSeries:Ko,constant:td,detect:Xo,detectLimit:Jo,detectSeries:Zo,dir:rd,doUntil:id,doWhilst:_i,each:es,eachLimit:gi,eachOf:ze,eachOfLimit:pr,eachOfSeries:ut,eachSeries:Ei,ensureAsync:xa,every:ts,everyLimit:ns,everySeries:rs,filter:is,filterLimit:os,filterSeries:ss,forever:sd,groupBy:ud,groupByLimit:Bs,groupBySeries:ld,log:ad,map:bs,mapLimit:Mi,mapSeries:ka,mapValues:fd,mapValuesLimit:Fs,mapValuesSeries:cd,memoize:pd,nextTick:hd,parallel:dd,parallelLimit:vd,priorityQueue:yd,queue:ja,race:md,reduce:en,reduceRight:us,reflect:ls,reflectAll:_d,reject:gd,rejectLimit:Ed,rejectSeries:Sd,retry:as,retryable:wd,seq:Ma,series:Td,setImmediate:Zt,some:fs,someLimit:cs,someSeries:ps,sortBy:Dd,timeout:Pd,times:Nd,timesLimit:zs,timesSeries:Cd,transform:Ld,tryEach:kd,unmemoize:Ad,until:Id,waterfall:Md,whilst:Si,all:ts,allLimit:ns,allSeries:rs,any:fs,anyLimit:cs,anySeries:ps,find:Xo,findLimit:Jo,findSeries:Zo,flatMap:Go,flatMapLimit:dr,flatMapSeries:Ko,forEach:es,forEachSeries:Ei,forEachLimit:gi,forEachOf:ze,forEachOfSeries:ut,forEachOfLimit:pr,inject:en,foldl:en,foldr:us,select:is,selectLimit:os,selectSeries:ss,wrapSync:mi,during:Si,doDuring:_i};const Tg=Object.freeze(Object.defineProperty({__proto__:null,all:ts,allLimit:ns,allSeries:rs,any:fs,anyLimit:cs,anySeries:ps,apply:Vh,applyEach:Gh,applyEachSeries:Kh,asyncify:mi,auto:Aa,autoInject:Xh,cargo:Jh,cargoQueue:Zh,compose:ed,concat:Go,concatLimit:dr,concatSeries:Ko,constant:td,default:wg,detect:Xo,detectLimit:Jo,detectSeries:Zo,dir:rd,doDuring:_i,doUntil:id,doWhilst:_i,during:Si,each:es,eachLimit:gi,eachOf:ze,eachOfLimit:pr,eachOfSeries:ut,eachSeries:Ei,ensureAsync:xa,every:ts,everyLimit:ns,everySeries:rs,filter:is,filterLimit:os,filterSeries:ss,find:Xo,findLimit:Jo,findSeries:Zo,flatMap:Go,flatMapLimit:dr,flatMapSeries:Ko,foldl:en,foldr:us,forEach:es,forEachLimit:gi,forEachOf:ze,forEachOfLimit:pr,forEachOfSeries:ut,forEachSeries:Ei,forever:sd,groupBy:ud,groupByLimit:Bs,groupBySeries:ld,inject:en,log:ad,map:bs,mapLimit:Mi,mapSeries:ka,mapValues:fd,mapValuesLimit:Fs,mapValuesSeries:cd,memoize:pd,nextTick:hd,parallel:dd,parallelLimit:vd,priorityQueue:yd,queue:ja,race:md,reduce:en,reduceRight:us,reflect:ls,reflectAll:_d,reject:gd,rejectLimit:Ed,rejectSeries:Sd,retry:as,retryable:wd,select:is,selectLimit:os,selectSeries:ss,seq:Ma,series:Td,setImmediate:Zt,some:fs,someLimit:cs,someSeries:ps,sortBy:Dd,timeout:Pd,times:Nd,timesLimit:zs,timesSeries:Cd,transform:Ld,tryEach:kd,unmemoize:Ad,until:Id,waterfall:Md,whilst:Si,wrapSync:mi},Symbol.toStringTag,{value:"Module"})),Fa=Pc(Tg);var xd={exports:{}},Cl=xd.exports=function(e,t){if(t||(t=16),e===void 0&&(e=128),e<=0)return"0";for(var n=Math.log(Math.pow(2,e))/Math.log(t),r=2;n===1/0;r*=2)n=Math.log(Math.pow(2,e/r))/Math.log(t)*r;for(var i=n-Math.floor(n),o="",r=0;r<Math.floor(n);r++){var s=Math.floor(Math.random()*t).toString(t);o=s+o}if(i){var u=Math.pow(t,i),s=Math.floor(Math.random()*u).toString(t);o=s+o}var l=parseInt(o,t);return l!==1/0&&l>=Math.pow(2,e)?Cl(e,t):o};Cl.rack=function(e,t,n){var r=function(o){var s=0;do{if(s++>10)if(n)e+=n;else throw new Error("too many ID collisions, use more bits");var u=Cl(e,t)}while(Object.hasOwnProperty.call(i,u));return i[u]=o,u},i=r.hats={};return r.get=function(o){return r.hats[o]},r.set=function(o,s){return r.hats[o]=s,r},r.bits=e||128,r.base=t||16,r};var bd=xd.exports;function kn(e,t){this.code=e,this.message=t||"",Error.captureStackTrace?Error.captureStackTrace(this,kn):this.stack=new Error().stack}kn.prototype=Object.create(Error.prototype);kn.prototype.constructor=kn;kn.prototype.name="ShareDBError";kn.CODES={ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT:"ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT",ERR_APPLY_SNAPSHOT_NOT_PROVIDED:"ERR_APPLY_SNAPSHOT_NOT_PROVIDED",ERR_FIXUP_IS_ONLY_VALID_ON_APPLY:"ERR_FIXUP_IS_ONLY_VALID_ON_APPLY",ERR_CANNOT_FIXUP_DELETION:"ERR_CANNOT_FIXUP_DELETION",ERR_CLIENT_ID_BADLY_FORMED:"ERR_CLIENT_ID_BADLY_FORMED",ERR_CANNOT_PING_OFFLINE:"ERR_CANNOT_PING_OFFLINE",ERR_CONNECTION_SEQ_INTEGER_OVERFLOW:"ERR_CONNECTION_SEQ_INTEGER_OVERFLOW",ERR_CONNECTION_STATE_TRANSITION_INVALID:"ERR_CONNECTION_STATE_TRANSITION_INVALID",ERR_DATABASE_ADAPTER_NOT_FOUND:"ERR_DATABASE_ADAPTER_NOT_FOUND",ERR_DATABASE_DOES_NOT_SUPPORT_SUBSCRIBE:"ERR_DATABASE_DOES_NOT_SUPPORT_SUBSCRIBE",ERR_DATABASE_METHOD_NOT_IMPLEMENTED:"ERR_DATABASE_METHOD_NOT_IMPLEMENTED",ERR_DEFAULT_TYPE_MISMATCH:"ERR_DEFAULT_TYPE_MISMATCH",ERR_DOC_MISSING_VERSION:"ERR_DOC_MISSING_VERSION",ERR_DOC_ALREADY_CREATED:"ERR_DOC_ALREADY_CREATED",ERR_DOC_DOES_NOT_EXIST:"ERR_DOC_DOES_NOT_EXIST",ERR_DOC_TYPE_NOT_RECOGNIZED:"ERR_DOC_TYPE_NOT_RECOGNIZED",ERR_DOC_WAS_DELETED:"ERR_DOC_WAS_DELETED",ERR_INFLIGHT_OP_MISSING:"ERR_INFLIGHT_OP_MISSING",ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION:"ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION",ERR_MAX_SUBMIT_RETRIES_EXCEEDED:"ERR_MAX_SUBMIT_RETRIES_EXCEEDED",ERR_MESSAGE_BADLY_FORMED:"ERR_MESSAGE_BADLY_FORMED",ERR_MILESTONE_ARGUMENT_INVALID:"ERR_MILESTONE_ARGUMENT_INVALID",ERR_OP_ALREADY_SUBMITTED:"ERR_OP_ALREADY_SUBMITTED",ERR_OP_NOT_ALLOWED_IN_PROJECTION:"ERR_OP_NOT_ALLOWED_IN_PROJECTION",ERR_OP_SUBMIT_REJECTED:"ERR_OP_SUBMIT_REJECTED",ERR_PENDING_OP_REMOVED_BY_OP_SUBMIT_REJECTED:"ERR_PENDING_OP_REMOVED_BY_OP_SUBMIT_REJECTED",ERR_HARD_ROLLBACK_FETCH_FAILED:"ERR_HARD_ROLLBACK_FETCH_FAILED",ERR_OP_VERSION_MISMATCH_AFTER_TRANSFORM:"ERR_OP_VERSION_MISMATCH_AFTER_TRANSFORM",ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM:"ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM",ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT:"ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT",ERR_OT_LEGACY_JSON0_OP_CANNOT_BE_NORMALIZED:"ERR_OT_LEGACY_JSON0_OP_CANNOT_BE_NORMALIZED",ERR_OT_OP_BADLY_FORMED:"ERR_OT_OP_BADLY_FORMED",ERR_OT_OP_NOT_APPLIED:"ERR_OT_OP_NOT_APPLIED",ERR_OT_OP_NOT_PROVIDED:"ERR_OT_OP_NOT_PROVIDED",ERR_PRESENCE_TRANSFORM_FAILED:"ERR_PRESENCE_TRANSFORM_FAILED",ERR_PROTOCOL_VERSION_NOT_SUPPORTED:"ERR_PROTOCOL_VERSION_NOT_SUPPORTED",ERR_QUERY_CHANNEL_MISSING:"ERR_QUERY_CHANNEL_MISSING",ERR_QUERY_EMITTER_LISTENER_NOT_ASSIGNED:"ERR_QUERY_EMITTER_LISTENER_NOT_ASSIGNED",ERR_SNAPSHOT_READ_SILENT_REJECTION:"ERR_SNAPSHOT_READ_SILENT_REJECTION",ERR_SNAPSHOT_READS_REJECTED:"ERR_SNAPSHOT_READS_REJECTED",ERR_SUBMIT_TRANSFORM_OPS_NOT_FOUND:"ERR_SUBMIT_TRANSFORM_OPS_NOT_FOUND",ERR_TYPE_CANNOT_BE_PROJECTED:"ERR_TYPE_CANNOT_BE_PROJECTED",ERR_TYPE_DOES_NOT_SUPPORT_COMPOSE:"ERR_TYPE_DOES_NOT_SUPPORT_COMPOSE",ERR_TYPE_DOES_NOT_SUPPORT_PRESENCE:"ERR_TYPE_DOES_NOT_SUPPORT_PRESENCE",ERR_UNKNOWN_ERROR:"ERR_UNKNOWN_ERROR"};var Pe=kn,jd=["info","warn","error"];function Bd(){var e={};jd.forEach(function(t){e[t]=console[t].bind(console)}),this.setMethods(e)}var Dg=Bd;Bd.prototype.setMethods=function(e){e=e||{};var t=this;jd.forEach(function(n){typeof e[n]=="function"&&(t[n]=e[n])})};var Pg=Dg,Ng=new Pg,Or=Ng,gt={};gt.ACTIONS={initLegacy:"init",handshake:"hs",queryFetch:"qf",querySubscribe:"qs",queryUnsubscribe:"qu",queryUpdate:"q",bulkFetch:"bf",bulkSubscribe:"bs",bulkUnsubscribe:"bu",fetch:"f",fixup:"fixup",subscribe:"s",unsubscribe:"u",op:"op",snapshotFetch:"nf",snapshotFetchByTimestamp:"nt",pingPong:"pp",presence:"p",presenceSubscribe:"ps",presenceUnsubscribe:"pu",presenceRequest:"pr"};var bn={},Fd=Cg;function Cg(e,t,n,r){var i=function(s,u,l,a){t(l,s,u,"left"),t(a,u,s,"right")},o=e.transformX=function(s,u){n(s),n(u);for(var l=[],a=0;a<u.length;a++){for(var f=u[a],p=[],h=0;h<s.length;){var y=[];if(i(s[h],f,p,y),h++,y.length===1)f=y[0];else if(y.length===0){for(var m=h;m<s.length;m++)r(p,s[m]);f=null;break}else{for(var g=o(s.slice(h),y),w=0;w<g[0].length;w++)r(p,g[0][w]);for(var v=0;v<g[1].length;v++)r(l,g[1][v]);f=null;break}}f!=null&&r(l,f),s=p}return[s,l]};e.transform=function(s,u,l){if(!(l==="left"||l==="right"))throw new Error("type must be 'left' or 'right'");return u.length===0?s:s.length===1&&u.length===1?t([],s[0],u[0],l):l==="left"?o(s,u)[0]:o(u,s)[1]}}var zd={exports:{}},pn=zd.exports={name:"text0",uri:"http://sharejs.org/types/textv0",create:function(e){if(e!=null&&typeof e!="string")throw new Error("Initial data must be a string");return e||""}},Ll=function(e,t,n){return e.slice(0,t)+n+e.slice(t)},kl=function(e){if(typeof e.p!="number")throw new Error("component missing position field");if(typeof e.i=="string"==(typeof e.d=="string"))throw new Error("component needs an i or d field");if(e.p<0)throw new Error("position cannot be negative")},hs=function(e){for(var t=0;t<e.length;t++)kl(e[t])};pn.apply=function(e,t){var n;hs(t);for(var r=0;r<t.length;r++){var i=t[r];if(i.i!=null)e=Ll(e,i.p,i.i);else{if(n=e.slice(i.p,i.p+i.d.length),i.d!==n)throw new Error("Delete component '"+i.d+"' does not match deleted text '"+n+"'");e=e.slice(0,i.p)+e.slice(i.p+i.d.length)}}return e};var wt=pn._append=function(e,t){if(!(t.i===""||t.d===""))if(e.length===0)e.push(t);else{var n=e[e.length-1];n.i!=null&&t.i!=null&&n.p<=t.p&&t.p<=n.p+n.i.length?e[e.length-1]={i:Ll(n.i,t.p-n.p,t.i),p:n.p}:n.d!=null&&t.d!=null&&t.p<=n.p&&n.p<=t.p+t.d.length?e[e.length-1]={d:Ll(t.d,n.p-t.p,n.d),p:t.p}:e.push(t)}};pn.compose=function(e,t){hs(e),hs(t);for(var n=e.slice(),r=0;r<t.length;r++)wt(n,t[r]);return n};pn.normalize=function(e){var t=[];(e.i!=null||e.p!=null)&&(e=[e]);for(var n=0;n<e.length;n++){var r=e[n];r.p==null&&(r.p=0),wt(t,r)}return t};var Al=function(e,t,n){return t.i!=null?t.p<e||t.p===e&&n?e+t.i.length:e:e<=t.p?e:e<=t.p+t.d.length?t.p:e-t.d.length};pn.transformCursor=function(e,t,n){for(var r=n==="right",i=0;i<t.length;i++)e=Al(e,t[i],r);return e};var Lg=pn._tc=function(e,t,n,r){if(kl(t),kl(n),t.i!=null)wt(e,{i:t.i,p:Al(t.p,n,r==="right")});else if(n.i!=null){var i=t.d;t.p<n.p&&(wt(e,{d:i.slice(0,n.p-t.p),p:t.p}),i=i.slice(n.p-t.p)),i!==""&&wt(e,{d:i,p:t.p+n.i.length})}else if(t.p>=n.p+n.d.length)wt(e,{d:t.d,p:t.p-n.d.length});else if(t.p+t.d.length<=n.p)wt(e,t);else{var o={d:"",p:t.p};t.p<n.p&&(o.d=t.d.slice(0,n.p-t.p)),t.p+t.d.length>n.p+n.d.length&&(o.d+=t.d.slice(n.p+n.d.length-t.p));var s=Math.max(t.p,n.p),u=Math.min(t.p+t.d.length,n.p+n.d.length),l=t.d.slice(s-t.p,u-t.p),a=n.d.slice(s-n.p,u-n.p);if(l!==a)throw new Error("Delete ops delete different text in the same region of the document");o.d!==""&&(o.p=Al(o.p,n),wt(e,o))}return e},kg=function(e){return e.i!=null?{d:e.i,p:e.p}:{i:e.d,p:e.p}};pn.invert=function(e){e=e.slice().reverse();for(var t=0;t<e.length;t++)e[t]=kg(e[t]);return e};Fd(pn,Lg,hs,wt);var Ag=zd.exports,$s=function(e){return Object.prototype.toString.call(e)=="[object Array]"},Ig=function(e){return!!e&&e.constructor===Object},nt=function(e){return JSON.parse(JSON.stringify(e))},k={name:"json0",uri:"http://sharejs.org/types/JSONv0"},It={};k.registerSubtype=function(e){It[e.name]=e};k.create=function(e){return e===void 0?null:nt(e)};k.invertComponent=function(e){var t={p:e.p};return e.t&&It[e.t]&&(t.t=e.t,t.o=It[e.t].invert(e.o)),e.si!==void 0&&(t.sd=e.si),e.sd!==void 0&&(t.si=e.sd),e.oi!==void 0&&(t.od=e.oi),e.od!==void 0&&(t.oi=e.od),e.li!==void 0&&(t.ld=e.li),e.ld!==void 0&&(t.li=e.ld),e.na!==void 0&&(t.na=-e.na),e.lm!==void 0&&(t.lm=e.p[e.p.length-1],t.p=e.p.slice(0,e.p.length-1).concat([e.lm])),t};k.invert=function(e){for(var t=e.slice().reverse(),n=[],r=0;r<t.length;r++)n.push(k.invertComponent(t[r]));return n};k.checkValidOp=function(e){for(var t=0;t<e.length;t++)if(!$s(e[t].p))throw new Error("Missing path")};k.checkList=function(e){if(!$s(e))throw new Error("Referenced element not a list")};k.checkObj=function(e){if(!Ig(e))throw new Error("Referenced element not an object (it was "+JSON.stringify(e)+")")};function Oi(e){e.t="text0";var t={p:e.p.pop()};e.si!=null&&(t.i=e.si),e.sd!=null&&(t.d=e.sd),e.o=[t]}function Ur(e){e.p.push(e.o[0].p),e.o[0].i!=null&&(e.si=e.o[0].i),e.o[0].d!=null&&(e.sd=e.o[0].d),delete e.t,delete e.o}k.apply=function(e,t){k.checkValidOp(t),t=nt(t);for(var n={data:e},r=0;r<t.length;r++){var i=t[r];(i.si!=null||i.sd!=null)&&Oi(i);for(var o=null,s=n,u="data",l=0;l<i.p.length;l++){var a=i.p[l];if(o=s,s=s[u],u=a,o==null)throw new Error("Path invalid")}if(i.t&&i.o!==void 0&&It[i.t])s[u]=It[i.t].apply(s[u],i.o);else if(i.na!==void 0){if(typeof s[u]!="number")throw new Error("Referenced element not a number");s[u]+=i.na}else if(i.li!==void 0&&i.ld!==void 0)k.checkList(s),s[u]=i.li;else if(i.li!==void 0)k.checkList(s),s.splice(u,0,i.li);else if(i.ld!==void 0)k.checkList(s),s.splice(u,1);else if(i.lm!==void 0){if(k.checkList(s),i.lm!=u){var f=s[u];s.splice(u,1),s.splice(i.lm,0,f)}}else if(i.oi!==void 0)k.checkObj(s),s[u]=i.oi;else if(i.od!==void 0)k.checkObj(s),delete s[u];else throw new Error("invalid / missing instruction in op")}return n.data};k.shatter=function(e){for(var t=[],n=0;n<e.length;n++)t.push([e[n]]);return t};k.incrementalApply=function(e,t,n){for(var r=0;r<t.length;r++){var i=[t[r]];e=k.apply(e,i),n(i,e)}return e};var Mg=k.pathMatches=function(e,t,n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r]&&(!n||r!==e.length-1))return!1;return!0};k.append=function(e,t){if(t=nt(t),e.length===0){e.push(t);return}var n=e[e.length-1];if((t.si!=null||t.sd!=null)&&(n.si!=null||n.sd!=null)&&(Oi(t),Oi(n)),Mg(t.p,n.p))if(t.t&&n.t&&t.t===n.t&&It[t.t]){if(n.o=It[t.t].compose(n.o,t.o),t.si!=null||t.sd!=null){for(var r=t.p,i=0;i<n.o.length-1;i++)t.o=[n.o.pop()],t.p=r.slice(),Ur(t),e.push(t);Ur(n)}}else n.na!=null&&t.na!=null?e[e.length-1]={p:n.p,na:n.na+t.na}:n.li!==void 0&&t.li===void 0&&t.ld===n.li?n.ld!==void 0?delete n.li:e.pop():n.od!==void 0&&n.oi===void 0&&t.oi!==void 0&&t.od===void 0?n.oi=t.oi:n.oi!==void 0&&t.od!==void 0?t.oi!==void 0?n.oi=t.oi:n.od!==void 0?delete n.oi:e.pop():t.lm!==void 0&&t.p[t.p.length-1]===t.lm||e.push(t);else(t.si!=null||t.sd!=null)&&(n.si!=null||n.sd!=null)&&(Ur(t),Ur(n)),e.push(t)};k.compose=function(e,t){k.checkValidOp(e),k.checkValidOp(t);for(var n=nt(e),r=0;r<t.length;r++)k.append(n,t[r]);return n};k.normalize=function(e){var t=[];e=$s(e)?e:[e];for(var n=0;n<e.length;n++){var r=e[n];r.p==null&&(r.p=[]),k.append(t,r)}return t};k.commonLengthForOps=function(e,t){var n=e.p.length,r=t.p.length;if((e.na!=null||e.t)&&n++,(t.na!=null||t.t)&&r++,n===0)return-1;if(r===0)return null;n--,r--;for(var i=0;i<n;i++){var o=e.p[i];if(i>=r||o!==t.p[i])return null}return n};k.canOpAffectPath=function(e,t){return k.commonLengthForOps({p:t},e)!=null};k.transformComponent=function(e,t,n,r){t=nt(t);var i=k.commonLengthForOps(n,t),o=k.commonLengthForOps(t,n),s=t.p.length,u=n.p.length;if((t.na!=null||t.t)&&s++,(n.na!=null||n.t)&&u++,o!=null&&u>s&&t.p[o]==n.p[o]){if(t.ld!==void 0){var l=nt(n);l.p=l.p.slice(s),t.ld=k.apply(nt(t.ld),[l])}else if(t.od!==void 0){var l=nt(n);l.p=l.p.slice(s),t.od=k.apply(nt(t.od),[l])}}if(i!=null){var a=s==u,l=n;if((t.si!=null||t.sd!=null)&&(n.si!=null||n.sd!=null)&&(Oi(t),l=nt(n),Oi(l)),l.t&&It[l.t]){if(t.t&&t.t===l.t){var f=It[t.t].transform(t.o,l.o,r);if(t.si!=null||t.sd!=null)for(var p=t.p,h=0;h<f.length;h++)t.o=[f[h]],t.p=p.slice(),Ur(t),k.append(e,t);else(!$s(f)||f.length>0)&&(t.o=f,k.append(e,t));return e}}else if(n.na===void 0){if(n.li!==void 0&&n.ld!==void 0){if(n.p[i]===t.p[i])if(a){if(t.ld!==void 0)if(t.li!==void 0&&r==="left")t.ld=nt(n.li);else return e}else return e}else if(n.li!==void 0)t.li!==void 0&&t.ld===void 0&&a&&t.p[i]===n.p[i]?r==="right"&&t.p[i]++:n.p[i]<=t.p[i]&&t.p[i]++,t.lm!==void 0&&a&&n.p[i]<=t.lm&&t.lm++;else if(n.ld!==void 0){if(t.lm!==void 0&&a){if(n.p[i]===t.p[i])return e;var p=n.p[i],y=t.p[i],m=t.lm;(p<m||p===m&&y<m)&&t.lm--}if(n.p[i]<t.p[i])t.p[i]--;else if(n.p[i]===t.p[i]){if(u<s)return e;if(t.ld!==void 0)if(t.li!==void 0)delete t.ld;else return e}}else if(n.lm!==void 0)if(t.lm!==void 0&&s===u){var y=t.p[i],m=t.lm,g=n.p[i],w=n.lm;if(g!==w)if(y===g)if(r==="left")t.p[i]=w,y===m&&(t.lm=w);else return e;else y>g&&t.p[i]--,y>w?t.p[i]++:y===w&&g>w&&(t.p[i]++,y===m&&t.lm++),(m>g||m===g&&m>y)&&t.lm--,m>w?t.lm++:m===w&&(w>g&&m>y||w<g&&m<y?r==="right"&&t.lm++:m>y?t.lm++:m===g&&t.lm--)}else if(t.li!==void 0&&t.ld===void 0&&a){var y=n.p[i],m=n.lm;p=t.p[i],p>y&&t.p[i]--,p>m&&t.p[i]++}else{var y=n.p[i],m=n.lm;p=t.p[i],p===y?t.p[i]=m:(p>y&&t.p[i]--,(p>m||p===m&&y>m)&&t.p[i]++)}else if(n.oi!==void 0&&n.od!==void 0){if(t.p[i]===n.p[i])if(t.oi!==void 0&&a){if(r==="right")return e;t.od=n.oi}else return e}else if(n.oi!==void 0){if(t.oi!==void 0&&t.p[i]===n.p[i])if(r==="left")k.append(e,{p:t.p,od:n.oi});else return e}else if(n.od!==void 0&&t.p[i]==n.p[i]){if(!a)return e;if(t.oi!==void 0)delete t.od;else return e}}}return k.append(e,t),e};Fd(k,k.transformComponent,k.checkValidOp,k.append);var xg=Ag;k.registerSubtype(xg);var bg=k,$d={type:bg};(function(e){e.defaultType=$d.type,e.map={},e.register=function(t){t.name&&(e.map[t.name]=t),t.uri&&(e.map[t.uri]=t)},e.register(e.defaultType)})(bn);var J={};(function(e){e.doNothing=t;function t(){}e.hasKeys=function(n){for(var r in n)return!0;return!1},e.isInteger=Number.isInteger||function(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n},e.isValidVersion=function(n){return n===null?!0:e.isInteger(n)&&n>=0},e.isValidTimestamp=function(n){return e.isValidVersion(n)},e.MAX_SAFE_INTEGER=9007199254740991,e.dig=function(){for(var n=arguments[0],r=1;r<arguments.length;r++){var i=arguments[r];n=n[i]||(r===arguments.length-1?void 0:{})}return n},e.digOrCreate=function(){for(var n=arguments[0],r=arguments[arguments.length-1],i=1;i<arguments.length-1;i++){var o=arguments[i];n=n[o]||(n[o]=i===arguments.length-2?r():{})}return n},e.digAndRemove=function(){for(var n=arguments[0],r=[n],i=1;i<arguments.length-1;i++){var o=arguments[i];if(!n.hasOwnProperty(o))break;n=n[o],r.push(n)}for(var i=r.length-1;i>=0;i--){var s=r[i],o=arguments[i+1],u=s[o];(i===r.length-1||!e.hasKeys(u))&&delete s[o]}},e.supportsPresence=function(n){return n&&typeof n.transformPresence=="function"},e.callEach=function(n,r){var i=!1;return n.forEach(function(o){o&&(o(r),i=!0)}),i},e.truthy=function(n){return!!n},e.nextTick=function(n){if(typeof process<"u"&&process.nextTick)return process.nextTick.apply(null,arguments);for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];setTimeout(function(){n.apply(null,r)})},e.clone=function(n){return n===void 0?void 0:JSON.parse(JSON.stringify(n))}})(J);var jg=bd,Kn=Pe,rn=Or,A=gt.ACTIONS,ds=bn,on=J,Ut=Kn.CODES;function x(e,t){this.backend=e,this.stream=t,this.clientId=jg(),this.src=null,this.connectTime=Date.now(),this.subscribedDocs={},this.subscribedQueries={},this.subscribedPresences={},this.presenceSubscriptionSeq={},this.presenceRequests={},this.closed=!1,this.custom={},this._firstReceivedMessage=null,this._handshakeReceived=!1,this.send(this._initMessage(A.initLegacy))}var Ud=x;x.prototype.close=function(e){e&&rn.warn("Agent closed due to error",this._src(),e.stack||e),!this.closed&&this.stream.end()};x.prototype._cleanup=function(){if(!this.closed){this.closed=!0,this.backend.agentsCount--,this.stream.isServer||this.backend.remoteAgentsCount--;for(var e in this.subscribedDocs){var t=this.subscribedDocs[e];for(var n in t){var r=t[n];r.destroy()}}this.subscribedDocs={};for(var i in this.subscribedPresences)this.subscribedPresences[i].destroy();this.subscribedPresences={};for(var n in this.subscribedQueries){var o=this.subscribedQueries[n];o.destroy()}this.subscribedQueries={}}};x.prototype._subscribeToStream=function(e,t,n){if(this.closed)return n.destroy();var r=this.subscribedDocs[e]||(this.subscribedDocs[e]={}),i=r[t];i&&i.destroy(),r[t]=n;var o=this;n.on("data",function(s){if(s.error){rn.error("Doc subscription stream error",e,t,s.error);return}o._onOp(e,t,s)}),n.on("end",function(){var s=o.subscribedDocs[e];!s||s[t]!==n||(delete s[t],!on.hasKeys(s)&&delete o.subscribedDocs[e])})};x.prototype._subscribeToPresenceStream=function(e,t){if(this.closed)return t.destroy();var n=this;t.on("data",function(r){r.error&&rn.error("Presence subscription stream error",e,r.error),n._handlePresenceData(r)}),t.on("end",function(){var r=n.presenceRequests[e]||{};for(var i in r){var o=n.presenceRequests[e][i];o.seq++,o.p=null,n._broadcastPresence(o,function(s){s&&rn.error("Error broadcasting disconnect presence",e,s)})}n.subscribedPresences[e]===t&&delete n.subscribedPresences[e],delete n.presenceRequests[e]})};x.prototype._subscribeToQuery=function(e,t,n,r){var i=this.subscribedQueries[t];i&&i.destroy(),this.subscribedQueries[t]=e;var o=this;e.onExtra=function(s){o.send({a:A.queryUpdate,id:t,extra:s})},e.onDiff=function(s){for(var u=0;u<s.length;u++){var l=s[u];l.type==="insert"&&(l.values=za(l.values))}o.send({a:A.queryUpdate,id:t,diff:s})},e.onError=function(s){rn.error("Query subscription stream error",n,r,s)},e.onOp=function(s){var u=s.d;o._onOp(n,u,s)},e._open()};x.prototype._onOp=function(e,t,n){if(!this._isOwnOp(e,n)){var r=this;on.nextTick(function(){var i=Fg(n);r.backend.sanitizeOp(r,e,t,i,function(o){if(o){rn.error("Error sanitizing op emitted from subscription",e,t,i,o);return}r._sendOp(e,t,i)})})}};x.prototype._isOwnOp=function(e,t){return this._src()===t.src&&e===(t.i||t.c)};x.prototype.send=function(e){this.closed||(this.backend.emit("send",this,e),this.stream.write(e))};x.prototype._sendOp=function(e,t,n){var r={a:A.op,c:e,d:t,v:n.v,src:n.src,seq:n.seq};"op"in n&&(r.op=n.op),n.create&&(r.create=n.create),n.del&&(r.del=!0),this.send(r)};x.prototype._sendOps=function(e,t,n){for(var r=0;r<n.length;r++)this._sendOp(e,t,n[r])};x.prototype._sendOpsBulk=function(e,t){for(var n in t){var r=t[n];this._sendOps(e,n,r)}};function vs(e){return typeof e=="string"?{code:Ut.ERR_UNKNOWN_ERROR,message:e}:(e.stack&&rn.info(e.stack),{code:e.code,message:e.message})}x.prototype._reply=function(e,t,n){var r=this,i=r.backend;if(t){e.error=vs(t),r.send(e);return}n||(n={}),n.a=e.a,e.id?n.id=e.id:(e.c&&(n.c=e.c),e.d&&(n.d=e.d),e.b&&!n.data&&(n.b=e.b));var o={request:e,reply:n};i.trigger(i.MIDDLEWARE_ACTIONS.reply,r,o,function(s){s?(e.error=vs(s),r.send(e)):r.send(o.reply)})};x.prototype._open=function(){if(!this.closed){this.backend.agentsCount++,this.stream.isServer||this.backend.remoteAgentsCount++;var e=this;this.stream.on("data",function(n){if(!e.closed){if(typeof n!="object"){var r=new Kn(Ut.ERR_MESSAGE_BADLY_FORMED,"Received non-object message");return e.close(r)}var i={data:n};e.backend.trigger(e.backend.MIDDLEWARE_ACTIONS.receive,e,i,function(o){var s=function(u,l){e._reply(i.data,u,l)};if(o)return s(o);e._handleMessage(i.data,s)})}});var t=e._cleanup.bind(e);this.stream.on("end",t),this.stream.on("close",t)}};x.prototype._checkRequest=function(e){if(e.a===A.queryFetch||e.a===A.querySubscribe||e.a===A.queryUnsubscribe){if(typeof e.id!="number")return"Missing query ID"}else if(e.a===A.op||e.a===A.fetch||e.a===A.subscribe||e.a===A.unsubscribe||e.a===A.presence){if(e.c!=null&&typeof e.c!="string")return"Invalid collection";if(e.d!=null&&typeof e.d!="string")return"Invalid id";if((e.a===A.op||e.a===A.presence)&&e.v!=null&&(typeof e.v!="number"||e.v<0))return"Invalid version";if(e.a===A.presence&&typeof e.id!="string")return"Missing presence ID"}else if(e.a===A.bulkFetch||e.a===A.bulkSubscribe||e.a===A.bulkUnsubscribe){if(e.c!=null&&typeof e.c!="string")return"Invalid collection";if(typeof e.b!="object")return"Invalid bulk subscribe data"}};x.prototype._handleMessage=function(e,t){try{var n=this._checkRequest(e);if(n)return t(new Kn(Ut.ERR_MESSAGE_BADLY_FORMED,n));switch(this._checkFirstMessage(e),e.a){case A.handshake:return e.id&&(this.src=e.id),t(null,this._initMessage(A.handshake));case A.queryFetch:return this._queryFetch(e.id,e.c,e.q,mc(e),t);case A.querySubscribe:return this._querySubscribe(e.id,e.c,e.q,mc(e),t);case A.queryUnsubscribe:return this._queryUnsubscribe(e.id,t);case A.bulkFetch:return this._fetchBulk(e.c,e.b,t);case A.bulkSubscribe:return this._subscribeBulk(e.c,e.b,t);case A.bulkUnsubscribe:return this._unsubscribeBulk(e.c,e.b,t);case A.fetch:return this._fetch(e.c,e.d,e.v,t);case A.subscribe:return this._subscribe(e.c,e.d,e.v,t);case A.unsubscribe:return this._unsubscribe(e.c,e.d,t);case A.op:var r=Bg(e,this._src());return r.seq>=on.MAX_SAFE_INTEGER?t(new Kn(Ut.ERR_CONNECTION_SEQ_INTEGER_OVERFLOW,"Connection seq has exceeded the max safe integer, maybe from being open for too long")):r?this._submit(e.c,e.d,r,t):t(new Kn(Ut.ERR_MESSAGE_BADLY_FORMED,"Invalid op message"));case A.snapshotFetch:return this._fetchSnapshot(e.c,e.d,e.v,t);case A.snapshotFetchByTimestamp:return this._fetchSnapshotByTimestamp(e.c,e.d,e.ts,t);case A.presence:if(!this.backend.presenceEnabled)return;var i=this._createPresence(e);return i.t&&!on.supportsPresence(ds.map[i.t])?t({code:Ut.ERR_TYPE_DOES_NOT_SUPPORT_PRESENCE,message:"Type does not support presence: "+i.t}):this._broadcastPresence(i,t);case A.presenceSubscribe:return this.backend.presenceEnabled?this._subscribePresence(e.ch,e.seq,t):void 0;case A.presenceUnsubscribe:return this._unsubscribePresence(e.ch,e.seq,t);case A.presenceRequest:return this._requestPresence(e.ch,t);case A.pingPong:return this._pingPong(t);default:t(new Kn(Ut.ERR_MESSAGE_BADLY_FORMED,"Invalid or unknown message"))}}catch(o){t(o)}};function mc(e){var t=e.r,n,r,i;if(t){n=[];for(var o=0;o<t.length;o++){var s=t[o],u=s[0],l=s[1];n.push(u),l==null?r?r.push(u):r=[u]:(i||(i={}),i[u]=l)}}var a=e.o||{};return a.ids=n,a.fetch=r,a.fetchOps=i,a}x.prototype._queryFetch=function(e,t,n,r,i){this.backend.queryFetch(this,t,n,r,function(o,s,u){if(o)return i(o);var l={data:za(s),extra:u};i(null,l)})};x.prototype._querySubscribe=function(e,t,n,r,i){var o=this,s=1,u;function l(a){if(a)return i(a);--s||i(null,u)}r.fetch&&(s++,this.backend.fetchBulk(this,t,r.fetch,function(a,f){if(a)return l(a);u=$a(f),l()})),r.fetchOps&&(s++,this._fetchBulkOps(t,r.fetchOps,l)),this.backend.querySubscribe(this,t,n,r,function(a,f,p,h){if(a)return l(a);if(this.closed)return f.destroy();if(o._subscribeToQuery(f,e,t,n),!p){f.queryPoll(l);return}u={data:za(p),extra:h},l()})};x.prototype._pingPong=function(e){var t=null,n={a:A.pingPong};e(t,n)};function za(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=Us(r);i.d=r.id,t.push(i)}return t}function $a(e){var t={};for(var n in e){var r=e[n];r.error?t[n]={error:vs(r.error)}:t[n]=Us(r)}return{data:t}}function Us(e){var t={v:e.v,data:e.data};return ds.defaultType!==ds.map[e.type]&&(t.type=e.type),t}x.prototype._queryUnsubscribe=function(e,t){var n=this.subscribedQueries[e];n&&(n.destroy(),delete this.subscribedQueries[e]),on.nextTick(t)};x.prototype._fetch=function(e,t,n,r){n==null?this.backend.fetch(this,e,t,function(i,o){if(i)return r(i);r(null,{data:Us(o)})}):this._fetchOps(e,t,n,r)};x.prototype._fetchOps=function(e,t,n,r){var i=this;this.backend.getOps(this,e,t,n,null,function(o,s){if(o)return r(o);i._sendOps(e,t,s),r()})};x.prototype._fetchBulk=function(e,t,n){Array.isArray(t)?this.backend.fetchBulk(this,e,t,function(r,i){if(r)return n(r);if(i){var o=$a(i);n(null,o)}else n()}):this._fetchBulkOps(e,t,n)};x.prototype._fetchBulkOps=function(e,t,n){var r=this;this.backend.getOpsBulk(this,e,t,null,function(i,o){if(i)return n(i);r._sendOpsBulk(e,o),n()})};x.prototype._subscribe=function(e,t,n,r){var i=this;this.backend.subscribe(this,e,t,n,function(o,s,u,l){if(o)return r(o);l&&i._sendOps(e,t,l),i._subscribeToStream(e,t,s),u?r(null,{data:Us(u)}):r()})};x.prototype._subscribeBulk=function(e,t,n){var r=this;this.backend.subscribeBulk(this,e,t,function(i,o,s,u){if(i)return n(i);u&&r._sendOpsBulk(e,u);for(var l in o)r._subscribeToStream(e,l,o[l]);if(s){var a=$a(s);n(null,a)}else n()})};x.prototype._unsubscribe=function(e,t,n){var r=this.subscribedDocs[e],i=r&&r[t];i&&i.destroy(),on.nextTick(n)};x.prototype._unsubscribeBulk=function(e,t,n){var r=this.subscribedDocs[e];if(!r)return on.nextTick(n);for(var i=0;i<t.length;i++){var o=t[i],s=r[o];s&&s.destroy()}on.nextTick(n)};x.prototype._submit=function(e,t,n,r){var i=this;this.backend.submit(this,e,t,n,null,function(o,s,u){var l={src:n.src,seq:n.seq,v:n.v};if(u._fixupOps.length&&(l[A.fixup]=u._fixupOps),o)return o.code===Ut.ERR_OP_ALREADY_SUBMITTED?r(null,l):r(o);i._sendOps(e,t,s),r(null,l)})};x.prototype._fetchSnapshot=function(e,t,n,r){this.backend.fetchSnapshot(this,e,t,n,r)};x.prototype._fetchSnapshotByTimestamp=function(e,t,n,r){this.backend.fetchSnapshotByTimestamp(this,e,t,n,r)};x.prototype._initMessage=function(e){return{a:e,protocol:1,protocolMinor:1,id:this._src(),type:ds.defaultType.uri}};x.prototype._src=function(){return this.src||this.clientId};x.prototype._broadcastPresence=function(e,t){var n=this,r=this.backend,i=this.presenceRequests[e.ch]||(this.presenceRequests[e.ch]={}),o=i[e.id];(!o||o.pv<e.pv)&&(this.presenceRequests[e.ch][e.id]=e);var s={presence:e,collection:e.c},u=Date.now();r.trigger(r.MIDDLEWARE_ACTIONS.receivePresence,this,s,function(l){if(l)return t(l);r.transformPresenceToLatestVersion(n,e,function(a,f){if(a)return t(a);var p=n._getPresenceChannel(f.ch);n.backend.pubsub.publish([p],f,function(h){if(h)return t(h);r.emit("timing","presence.broadcast",Date.now()-u,s),t(null,f)})})})};x.prototype._createPresence=function(e){return{a:A.presence,ch:e.ch,src:this._src(),id:e.id,p:e.p,pv:e.pv,c:e.c,d:e.d,v:e.v,t:e.t}};x.prototype._subscribePresence=function(e,t,n){var r=this;function i(u){n(u,{ch:e,seq:t})}var o=r.subscribedPresences[e];if(o)return r.presenceSubscriptionSeq[e]=t,i();var s=this._getPresenceChannel(e);this.backend.pubsub.subscribe(s,function(u,l){if(u)return i(u);if(t<r.presenceSubscriptionSeq[e])return l.destroy(),i();r.presenceSubscriptionSeq[e]=t,r.subscribedPresences[e]=l,r._subscribeToPresenceStream(e,l),r._requestPresence(e,function(a){i(a)})})};x.prototype._unsubscribePresence=function(e,t,n){this.presenceSubscriptionSeq[e]=t;var r=this.subscribedPresences[e];r&&r.destroy(),delete this.subscribedPresences[e],n(null,{ch:e,seq:t})};x.prototype._getPresenceChannel=function(e){return"$presence."+e};x.prototype._requestPresence=function(e,t){var n=this._getPresenceChannel(e);this.backend.pubsub.publish([n],{ch:e,r:!0,src:this.clientId},t)};x.prototype._handlePresenceData=function(e){if(e.src!==this._src()){if(e.r)return this.send({a:A.presenceRequest,ch:e.ch});var t=this.backend,n={collection:e.c,presence:e},r=this;t.trigger(t.MIDDLEWARE_ACTIONS.sendPresence,this,n,function(i){if(i){t.doNotForwardSendPresenceErrorsToClient?t.errorHandler(i,{agent:r}):r.send({a:A.presence,ch:e.ch,id:e.id,error:vs(i)});return}r.send(e)})}};x.prototype._checkFirstMessage=function(e){this._handshakeReceived||(this._firstReceivedMessage||(this._firstReceivedMessage=e),e.a===A.handshake&&(this._handshakeReceived=!0,this._firstReceivedMessage.a!==A.handshake&&rn.warn("Unexpected message received before handshake",this._firstReceivedMessage),this._firstReceivedMessage=null))};function Bg(e,t){var n=e.src||t;return"op"in e?new $g(n,e.seq,e.v,e.op,e.x):e.create?new zg(n,e.seq,e.v,e.create,e.x):e.del?new Ug(n,e.seq,e.v,e.del,e.x):void 0}function Fg(e){var t={};for(var n in e)t[n]=e[n];return t}function zg(e,t,n,r,i,o,s,u){this.src=e,this.seq=t,this.v=n,this.create=r,this.c=o,this.d=s,this.m=u,this.x=i}function $g(e,t,n,r,i,o,s,u){this.src=e,this.seq=t,this.v=n,this.op=r,this.c=o,this.d=s,this.m=u,this.x=i}function Ug(e,t,n,r,i,o,s,u){this.src=e,this.seq=t,this.v=n,this.del=r,this.c=o,this.d=s,this.m=u,this.x=i}var at={},Ua={exports:{}},rr=typeof Reflect=="object"?Reflect:null,_c=rr&&typeof rr.apply=="function"?rr.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},wo;rr&&typeof rr.ownKeys=="function"?wo=rr.ownKeys:Object.getOwnPropertySymbols?wo=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:wo=function(t){return Object.getOwnPropertyNames(t)};function Vg(e){console&&console.warn&&console.warn(e)}var Vd=Number.isNaN||function(t){return t!==t};function H(){H.init.call(this)}Ua.exports=H;Ua.exports.once=qg;H.EventEmitter=H;H.prototype._events=void 0;H.prototype._eventsCount=0;H.prototype._maxListeners=void 0;var gc=10;function Vs(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(H,"defaultMaxListeners",{enumerable:!0,get:function(){return gc},set:function(e){if(typeof e!="number"||e<0||Vd(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");gc=e}});H.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};H.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Vd(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Hd(e){return e._maxListeners===void 0?H.defaultMaxListeners:e._maxListeners}H.prototype.getMaxListeners=function(){return Hd(this)};H.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=t==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(n.length>0&&(s=n[0]),s instanceof Error)throw s;var u=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw u.context=s,u}var l=o[t];if(l===void 0)return!1;if(typeof l=="function")_c(l,this,n);else for(var a=l.length,f=Gd(l,a),r=0;r<a;++r)_c(f[r],this,n);return!0};function Wd(e,t,n,r){var i,o,s;if(Vs(n),o=e._events,o===void 0?(o=e._events=Object.create(null),e._eventsCount=0):(o.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),s===void 0)s=o[t]=n,++e._eventsCount;else if(typeof s=="function"?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),i=Hd(e),i>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,Vg(u)}return e}H.prototype.addListener=function(t,n){return Wd(this,t,n,!1)};H.prototype.on=H.prototype.addListener;H.prototype.prependListener=function(t,n){return Wd(this,t,n,!0)};function Hg(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Qd(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=Hg.bind(r);return i.listener=n,r.wrapFn=i,i}H.prototype.once=function(t,n){return Vs(n),this.on(t,Qd(this,t,n)),this};H.prototype.prependOnceListener=function(t,n){return Vs(n),this.prependListener(t,Qd(this,t,n)),this};H.prototype.removeListener=function(t,n){var r,i,o,s,u;if(Vs(n),i=this._events,i===void 0)return this;if(r=i[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(o=-1,s=r.length-1;s>=0;s--)if(r[s]===n||r[s].listener===n){u=r[s].listener,o=s;break}if(o<0)return this;o===0?r.shift():Wg(r,o),r.length===1&&(i[t]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",t,u||n)}return this};H.prototype.off=H.prototype.removeListener;H.prototype.removeAllListeners=function(t){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var o=Object.keys(r),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(t,n[i]);return this};function qd(e,t,n){var r=e._events;if(r===void 0)return[];var i=r[t];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?Qg(i):Gd(i,i.length)}H.prototype.listeners=function(t){return qd(this,t,!0)};H.prototype.rawListeners=function(t){return qd(this,t,!1)};H.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Yd.call(e,t)};H.prototype.listenerCount=Yd;function Yd(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}H.prototype.eventNames=function(){return this._eventsCount>0?wo(this._events):[]};function Gd(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function Wg(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function Qg(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function qg(e,t){return new Promise(function(n,r){function i(s){e.removeListener(t,o),r(s)}function o(){typeof e.removeListener=="function"&&e.removeListener("error",i),n([].slice.call(arguments))}Kd(e,t,o,{once:!0}),t!=="error"&&Yg(e,i,{once:!0})})}function Yg(e,t,n){typeof e.on=="function"&&Kd(e,"error",t,n)}function Kd(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(o){r.once&&e.removeEventListener(t,i),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Xd=Ua.exports,Il=Xd.EventEmitter;at.EventEmitter=Il;at.mixin=Gg;function Gg(e){for(var t in Il.prototype)e.prototype[t]=Il.prototype[t]}var Jd=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var s=o[i];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n},Zd=at,ev=Or,Re=Pe,Hs=bn,Xe=J,Kg=Xe.clone,Xg=Jd,Lu=gt.ACTIONS,de=Re.CODES,Jg=j;function j(e,t,n){Zd.EventEmitter.call(this),this.connection=e,this.collection=t,this.id=n,this.version=null,this.type=null,this.data=void 0,this.inflightFetch=[],this.inflightSubscribe=null,this.pendingFetch=[],this.pendingSubscribe=[],this.subscribed=!1,this.wantSubscribe=!1,this._wantsDestroy=!1,this.inflightOp=null,this.pendingOps=[],this.type=null,this.applyStack=null,this.preventCompose=!1,this.submitSource=!1,this.paused=!1,this._dataStateVersion=0}Zd.mixin(j);j.prototype.destroy=function(e){this._wantsDestroy=!0;var t=this;t.whenNothingPending(function(){t.wantSubscribe?t.unsubscribe(function(n){if(n)return e?e(n):t.emit("error",n);t.connection._destroyDoc(t),e&&e()}):(t.connection._destroyDoc(t),e&&e())})};j.prototype._setType=function(e){if(typeof e=="string"&&(e=Hs.map[e]),e)this.type=e;else if(e===null)this.type=e,this._setData(void 0);else{var t=new Re(de.ERR_DOC_TYPE_NOT_RECOGNIZED,"Missing type "+e);return this.emit("error",t)}};j.prototype._setData=function(e){this.data=e,this._dataStateVersion++};j.prototype.ingestSnapshot=function(e,t){if(!e)return t&&t();if(typeof e.v!="number"){var n=new Re(de.ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION,"Missing version in ingested snapshot. "+this.collection+"."+this.id);return t?t(n):this.emit("error",n)}if(this.type||this.hasWritePending()){if(this.version==null){if(this.hasWritePending())return t&&this.once("no write pending",t);var n=new Re(de.ERR_DOC_MISSING_VERSION,"Cannot ingest snapshot in doc with null version. "+this.collection+"."+this.id);return t?t(n):this.emit("error",n)}return e.v>this.version?this.fetch(t):t&&t()}if(this.version>e.v)return t&&t();this.version=e.v;var r=e.type===void 0?Hs.defaultType:e.type;this._setType(r),this._setData(this.type&&this.type.deserialize?this.type.deserialize(e.data):e.data),this.emit("load"),t&&t()};j.prototype.whenNothingPending=function(e){var t=this;Xe.nextTick(function(){if(t.hasPending()){t.once("nothing pending",e);return}e()})};j.prototype.hasPending=function(){return!!(this.inflightOp||this.pendingOps.length||this.inflightFetch.length||this.inflightSubscribe||this.pendingFetch.length||this.pendingSubscribe.length)};j.prototype.hasWritePending=function(){return!!(this.inflightOp||this.pendingOps.length)};j.prototype._emitNothingPending=function(){this.hasWritePending()||(this.emit("no write pending"),!this.hasPending()&&this.emit("nothing pending"))};j.prototype._emitResponseError=function(e,t){if(e&&e.code===de.ERR_SNAPSHOT_READ_SILENT_REJECTION){this.wantSubscribe=!1,t&&t(),this._emitNothingPending();return}if(t){t(e),this._emitNothingPending();return}this._emitNothingPending(),this.emit("error",e)};j.prototype._handleFetch=function(e,t){var n=this.pendingFetch;this.pendingFetch=[];var r=this.inflightFetch.shift();if(r&&n.push(r),n.length&&(r=function(i){Xe.callEach(n,i)}),e)return this._emitResponseError(e,r);this.ingestSnapshot(t,r),this._emitNothingPending()};j.prototype._handleSubscribe=function(e,t){var n=this.inflightSubscribe;this.inflightSubscribe=null;var r=this.pendingFetch;this.pendingFetch=[],n.callback&&r.push(n.callback);var i;if(r.length&&(i=function(o){Xe.callEach(r,o)}),e)return this._emitResponseError(e,i);this.subscribed=n.wantSubscribe,this.subscribed?this.ingestSnapshot(t,i):i&&i(),this._emitNothingPending(),this._flushSubscribe()};j.prototype._handleOp=function(e,t){if(e)return this.inflightOp?this._rollback(e):this.emit("error",e);if(this.inflightOp&&t.src===this.inflightOp.src&&t.seq===this.inflightOp.seq){this._opAcknowledged(t);return}if(this.version==null||t.v>this.version){this.fetch();return}if(!(t.v<this.version)){if(this.inflightOp){var n=Ri(this.inflightOp,t);if(n)return this._hardRollback(n)}for(var r=0;r<this.pendingOps.length;r++){var n=Ri(this.pendingOps[r],t);if(n)return this._hardRollback(n)}this.version++;try{this._otApply(t,!1)}catch(i){return this._hardRollback(i)}}};j.prototype._onConnectionStateChanged=function(){this.connection.canSend?(this.flush(),this._resubscribe()):(this.inflightOp&&(this.pendingOps.unshift(this.inflightOp),this.inflightOp=null),this.subscribed=!1,this.inflightSubscribe&&(this.inflightSubscribe.wantSubscribe?(this.pendingSubscribe.unshift(this.inflightSubscribe),this.inflightSubscribe=null):this._handleSubscribe()),this.inflightFetch.length&&(this.pendingFetch=this.pendingFetch.concat(this.inflightFetch),this.inflightFetch.length=0))};j.prototype._resubscribe=function(){if(!this.pendingSubscribe.length&&this.wantSubscribe)return this.subscribe();var e=this.pendingSubscribe.some(function(t){return t.wantSubscribe});!e&&this.pendingFetch.length&&this.fetch(),this._flushSubscribe()};j.prototype.fetch=function(e){this._fetch({},e)};j.prototype._fetch=function(e,t){this.pendingFetch.push(t);var n=this.connection.canSend&&(e.force||!this.inflightFetch.length);n&&(this.inflightFetch.push(this.pendingFetch.shift()),this.connection.sendFetch(this))};j.prototype.subscribe=function(e){var t=!0;this._queueSubscribe(t,e)};j.prototype.unsubscribe=function(e){var t=!1;this._queueSubscribe(t,e)};j.prototype._queueSubscribe=function(e,t){var n=this.pendingSubscribe[this.pendingSubscribe.length-1]||this.inflightSubscribe,r=n&&n.wantSubscribe===e;if(r){n.callback=Zg([n.callback,t]);return}this.pendingSubscribe.push({wantSubscribe:!!e,callback:t}),this._flushSubscribe()};j.prototype._flushSubscribe=function(){if(!(this.inflightSubscribe||!this.pendingSubscribe.length)){if(this.connection.canSend){this.inflightSubscribe=this.pendingSubscribe.shift(),this.wantSubscribe=this.inflightSubscribe.wantSubscribe,this.wantSubscribe?this.connection.sendSubscribe(this):(this.subscribed=!1,this.connection.sendUnsubscribe(this));return}if(!this.pendingSubscribe[0].wantSubscribe){this.inflightSubscribe=this.pendingSubscribe.shift();var e=this;Xe.nextTick(function(){e._handleSubscribe()})}}};function Zg(e){return e=e.filter(Xe.truthy),e.length?function(t){Xe.callEach(e,t)}:null}j.prototype.flush=function(){!this.connection.canSend||this.inflightOp||!this.paused&&this.pendingOps.length&&this._sendOp()};function eE(e){delete e.op,delete e.create,delete e.del}function Ri(e,t){if(e.del)return eE(t);if(t.del)return new Re(de.ERR_DOC_WAS_DELETED,"Document was deleted");if(t.create)return new Re(de.ERR_DOC_ALREADY_CREATED,"Document already created");if("op"in t){if(e.create)return new Re(de.ERR_DOC_ALREADY_CREATED,"Document already created");if(e.type.transformX){var n=e.type.transformX(e.op,t.op);e.op=n[0],t.op=n[1]}else{var r=e.type.transform(e.op,t.op,"left"),i=e.type.transform(t.op,e.op,"right");e.op=r,t.op=i}}}j.prototype._otApply=function(e,t){if("op"in e){if(!this.type)throw new Re(de.ERR_DOC_DOES_NOT_EXIST,"Cannot apply op to uncreated document. "+this.collection+"."+this.id);if(this.emit("before op batch",e.op,t),!t&&this.type===Hs.defaultType&&e.op.length>1){this.applyStack||(this.applyStack=[]);for(var n=this.applyStack.length,r=0;r<e.op.length;r++){var i=e.op[r],o={op:[i]};this.emit("before op",o.op,t,e.src);for(var s=n;s<this.applyStack.length;s++){var u=Ri(this.applyStack[s],o);if(u)return this._hardRollback(u)}this._setData(this.type.apply(this.data,o.op)),this.emit("op",o.op,t,e.src)}this.emit("op batch",e.op,t),this._popApplyStack(n);return}this.emit("before op",e.op,t,e.src),this._setData(this.type.apply(this.data,e.op)),this.emit("op",e.op,t,e.src),this.emit("op batch",e.op,t);return}if(e.create){this._setType(e.create.type),this.type.deserialize?this.type.createDeserialized?this._setData(this.type.createDeserialized(e.create.data)):this._setData(this.type.deserialize(this.type.create(e.create.data))):this._setData(this.type.create(e.create.data)),this.emit("create",t);return}if(e.del){var l=this.data;this._setType(null),this.emit("del",l,t);return}};j.prototype._sendOp=function(){if(this.connection.canSend){var e=this.connection.id;this.inflightOp||(this.inflightOp=this.pendingOps.shift());var t=this.inflightOp;if(!t){var n=new Re(de.ERR_INFLIGHT_OP_MISSING,"No op to send on call to _sendOp");return this.emit("error",n)}if(t.sentAt=Date.now(),t.retries=t.retries==null?0:t.retries+1,t.seq==null){if(this.connection.seq>=Xe.MAX_SAFE_INTEGER)return this.emit("error",new Re(de.ERR_CONNECTION_SEQ_INTEGER_OVERFLOW,"Connection seq has exceeded the max safe integer, maybe from being open for too long"));t.seq=this.connection.seq++}this.connection.sendOp(this,t),t.src==null&&(t.src=e)}};j.prototype._submit=function(e,t,n){if(t||(t=!0),"op"in e){if(!this.type){var r=new Re(de.ERR_DOC_DOES_NOT_EXIST,"Cannot submit op. Document has not been created. "+this.collection+"."+this.id);return n?n(r):this.emit("error",r)}this.type.normalize&&(e.op=this.type.normalize(e.op))}try{this._pushOp(e,t,n),this._otApply(e,t)}catch(o){return this._hardRollback(o)}var i=this;Xe.nextTick(function(){i.flush()})};j.prototype._pushOp=function(e,t,n){if(e.source=t,this.applyStack)this.applyStack.push(e);else{var r=this._tryCompose(e);if(r){r.callbacks.push(n);return}}e.type=this.type,e.callbacks=[n],this.pendingOps.push(e)};j.prototype._popApplyStack=function(e){if(e>0){this.applyStack.length=e;return}var t=this.applyStack[0];if(this.applyStack=null,!!t){var n=this.pendingOps.indexOf(t);if(n!==-1)for(var r=this.pendingOps.splice(n),n=0;n<r.length;n++){var t=r[n],i=this._tryCompose(t);i?i.callbacks=i.callbacks.concat(t.callbacks):this.pendingOps.push(t)}}};j.prototype._tryCompose=function(e){if(!this.preventCompose){var t=this.pendingOps[this.pendingOps.length-1];if(!(!t||t.sentAt)&&!(this.submitSource&&!Xg(e.source,t.source))){if(t.create&&"op"in e)return t.create.data=this.type.apply(t.create.data,e.op),t;if("op"in t&&"op"in e&&this.type.compose)return t.op=this.type.compose(t.op,e.op),t}}};j.prototype.submitOp=function(e,t,n){typeof t=="function"&&(n=t,t=null);var r={op:e},i=t&&t.source;this._submit(r,i,n)};j.prototype.create=function(e,t,n,r){if(typeof t=="function"?(r=t,n=null,t=null):typeof n=="function"&&(r=n,n=null),t||(t=Hs.defaultType.uri),this.type){var i=new Re(de.ERR_DOC_ALREADY_CREATED,"Document already exists");return r?r(i):this.emit("error",i)}var o={create:{type:t,data:e}},s=n&&n.source;this._submit(o,s,r)};j.prototype.del=function(e,t){if(typeof e=="function"&&(t=e,e=null),!this.type){var n=new Re(de.ERR_DOC_DOES_NOT_EXIST,"Document does not exist");return t?t(n):this.emit("error",n)}var r={del:!0},i=e&&e.source;this._submit(r,i,t)};j.prototype.pause=function(){this.paused=!0};j.prototype.resume=function(){this.paused=!1,this.flush()};j.prototype.toSnapshot=function(){return{v:this.version,data:Kg(this.data),type:this.type.uri}};j.prototype._opAcknowledged=function(e){if(this.inflightOp.create)this.version=e.v;else if(e.v!==this.version)return ev.warn("Invalid version from server. Expected: "+this.version+" Received: "+e.v,e),this.fetch();if(e[Lu.fixup])for(var t=0;t<e[Lu.fixup].length;t++){for(var n=e[Lu.fixup][t],r=0;r<this.pendingOps.length;r++){var i=Ri(this.pendingOps[t],n);if(i)return this._hardRollback(i)}try{this._otApply(n,!1)}catch(o){return this._hardRollback(o)}}this.version++,this._clearInflightOp()};j.prototype._rollback=function(e){var t=this.inflightOp;if(!("op"in t&&t.type.invert))return this._hardRollback(e);try{t.op=t.type.invert(t.op)}catch{return this._hardRollback(e)}for(var n=0;n<this.pendingOps.length;n++){var r=Ri(this.pendingOps[n],t);if(r)return this._hardRollback(r)}try{this._otApply(t,!1)}catch(i){return this._hardRollback(i)}if(e.code===de.ERR_OP_SUBMIT_REJECTED)return this._clearInflightOp(null);this._clearInflightOp(e)};j.prototype._hardRollback=function(e){var t=this.pendingOps,n=this.inflightOp;this._setType(null),this.version=null,this.inflightOp=null,this.pendingOps=[];var r=this;this._fetch({force:!0},function(i){if(i&&(ev.error("Hard rollback doc fetch failed.",i,n),r.emit("error",new Re(de.ERR_HARD_ROLLBACK_FETCH_FAILED,"Hard rollback fetch failed: "+i.message))),e.code===de.ERR_OP_SUBMIT_REJECTED){if(n&&(Xe.callEach(n.callbacks),n=null),!t.length)return;e=new Re(de.ERR_PENDING_OP_REMOVED_BY_OP_SUBMIT_REJECTED,"Discarding pending op because of hard rollback during ERR_OP_SUBMIT_REJECTED")}n&&t.unshift(n);for(var o=!!t.length,s=0;s<t.length;s++)o=Xe.callEach(t[s].callbacks,e)&&o;e&&!o&&r.emit("error",e)})};j.prototype._clearInflightOp=function(e){var t=this.inflightOp;this.inflightOp=null;var n=Xe.callEach(t.callbacks,e);if(this.flush(),this._emitNothingPending(),e&&!n)return this.emit("error",e)};var tv=at,Ec=gt.ACTIONS,tE=J,nE=Ie;function Ie(e,t,n,r,i,o,s){tv.EventEmitter.call(this),this.action=e,this.connection=t,this.id=n,this.collection=r,this.query=i,this.results=null,o&&o.results&&(this.results=o.results,delete o.results),this.extra=void 0,this.options=o,this.callback=s,this.ready=!1,this.sent=!1}tv.mixin(Ie);Ie.prototype.hasPending=function(){return!this.ready};Ie.prototype.send=function(){if(this.connection.canSend){var e={a:this.action,id:this.id,c:this.collection,q:this.query};if(this.options&&(e.o=this.options),this.results){for(var t=[],n=0;n<this.results.length;n++){var r=this.results[n];t.push([r.id,r.version])}e.r=t}this.connection.send(e),this.sent=!0}};Ie.prototype.destroy=function(e){this.connection.canSend&&this.action===Ec.querySubscribe&&this.connection.send({a:Ec.queryUnsubscribe,id:this.id}),this.connection._destroyQuery(this),e&&tE.nextTick(e)};Ie.prototype._onConnectionStateChanged=function(){this.connection.canSend&&!this.sent?this.send():this.sent=!1};Ie.prototype._handleFetch=function(e,t,n){this.connection._destroyQuery(this),this._handleResponse(e,t,n)};Ie.prototype._handleSubscribe=function(e,t,n){this._handleResponse(e,t,n)};Ie.prototype._handleResponse=function(e,t,n){var r=this.callback;if(this.callback=null,e)return this._finishResponse(e,r);if(!t)return this._finishResponse(null,r);var i=this,o=1,s=function(f){if(f)return i._finishResponse(f,r);--o||i._finishResponse(null,r)};if(Array.isArray(t))o+=t.length,this.results=this._ingestSnapshots(t,s),this.extra=n;else for(var u in t){o++;var l=t[u],a=this.connection.get(l.c||this.collection,u);a.ingestSnapshot(l,s)}s()};Ie.prototype._ingestSnapshots=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],o=this.connection.get(i.c||this.collection,i.d);o.ingestSnapshot(i,t),n.push(o)}return n};Ie.prototype._finishResponse=function(e,t){if(this.emit("ready"),this.ready=!0,e)return this.connection._destroyQuery(this),t?t(e):this.emit("error",e);t&&t(null,this.results,this.extra)};Ie.prototype._handleError=function(e){this.emit("error",e)};Ie.prototype._handleDiff=function(e){for(var t=0;t<e.length;t++){var n=e[t];n.type==="insert"&&(n.values=this._ingestSnapshots(n.values))}for(var t=0;t<e.length;t++){var n=e[t];switch(n.type){case"insert":var r=n.values;Array.prototype.splice.apply(this.results,[n.index,0].concat(r)),this.emit("insert",r,n.index);break;case"remove":var o=n.howMany||1,i=this.results.splice(n.index,o);this.emit("remove",i,n.index);break;case"move":var o=n.howMany||1,s=this.results.splice(n.from,o);Array.prototype.splice.apply(this.results,[n.to,0].concat(s)),this.emit("move",s,n.from,n.to);break}}this.emit("changed",this.results)};Ie.prototype._handleExtra=function(e){this.extra=e,this.emit("extra",e)};var nv=at,rE=gt.ACTIONS,iE=J,rv=Et;function Et(e,t){if(nv.EventEmitter.call(this),!t||typeof t!="string")throw new Error("LocalPresence presenceId must be a string");this.presence=e,this.presenceId=t,this.connection=e.connection,this.presenceVersion=0,this.value=null,this._pendingMessages=[],this._callbacksByPresenceVersion={}}nv.mixin(Et);Et.prototype.submit=function(e,t){this.value=e,this.send(t)};Et.prototype.send=function(e){var t=this._message();this._pendingMessages.push(t),this._callbacksByPresenceVersion[t.pv]=e,this._sendPending()};Et.prototype.destroy=function(e){var t=this;this.submit(null,function(n){if(n)return t._callbackOrEmit(n,e);delete t.presence.localPresences[t.presenceId],e&&e()})};Et.prototype._sendPending=function(){if(this.connection.canSend){var e=this;this._pendingMessages.forEach(function(t){e.connection.send(t)}),this._pendingMessages=[]}};Et.prototype._ack=function(e,t){var n=this._getCallback(t);this._callbackOrEmit(e,n)};Et.prototype._message=function(){return{a:rE.presence,ch:this.presence.channel,id:this.presenceId,p:this.value,pv:this.presenceVersion++}};Et.prototype._getCallback=function(e){var t=this._callbacksByPresenceVersion[e];return delete this._callbacksByPresenceVersion[e],t};Et.prototype._callbackOrEmit=function(e,t){if(t)return iE.nextTick(t,e);e&&this.emit("error",e)};var oE=J,iv=Va;function Va(e,t){this.presence=e,this.presenceId=t,this.connection=this.presence.connection,this.value=null,this.presenceVersion=0}Va.prototype.receiveUpdate=function(e){e.pv<this.presenceVersion||(this.value=e.p,this.presenceVersion=e.pv,this.presence._updateRemotePresence(this))};Va.prototype.destroy=function(e){delete this.presence._remotePresenceInstances[this.presenceId],delete this.presence.remotePresences[this.presenceId],e&&oE.nextTick(e)};var ov=at,sE=rv,uE=iv,wi=J,ku=Fa,lE=bd,Sc=gt.ACTIONS,sv=te;function te(e,t){if(ov.EventEmitter.call(this),!t||typeof t!="string")throw new Error("Presence channel must be provided");this.connection=e,this.channel=t,this.wantSubscribe=!1,this.subscribed=!1,this.remotePresences={},this.localPresences={},this._remotePresenceInstances={},this._subscriptionCallbacksBySeq={},this._wantsDestroy=!1}ov.mixin(te);te.prototype.subscribe=function(e){this._sendSubscriptionAction(!0,e)};te.prototype.unsubscribe=function(e){this._sendSubscriptionAction(!1,e)};te.prototype.create=function(e){if(this._wantsDestroy)throw new Error("Presence is being destroyed");e=e||lE();var t=this._createLocalPresence(e);return this.localPresences[e]=t,t};te.prototype.destroy=function(e){this._wantsDestroy=!0;var t=this,n=Object.keys(t.localPresences);this.unsubscribe(function(r){if(r)return t._callbackOrEmit(r,e);var i=Object.keys(t._remotePresenceInstances);ku.parallel([function(o){ku.each(n,function(s,u){t.localPresences[s].destroy(u)},o)},function(o){if(!t._wantsDestroy)return o();ku.each(i,function(s,u){t._remotePresenceInstances[s].destroy(u)},o)}],function(o){t._wantsDestroy&&delete t.connection._presences[t.channel],t._callbackOrEmit(o,e)})})};te.prototype._sendSubscriptionAction=function(e,t){if(e=!!e,e===this.wantSubscribe){if(!t)return;if(e===this.subscribed)return wi.nextTick(t);if(Object.keys(this._subscriptionCallbacksBySeq).length)return this._combineSubscribeCallbackWithLastAdded(t)}this.wantSubscribe=e;var n=this.wantSubscribe?Sc.presenceSubscribe:Sc.presenceUnsubscribe,r=this.connection._presenceSeq++;this._subscriptionCallbacksBySeq[r]=t,this.connection.canSend&&this.connection._sendPresenceAction(n,r,this)};te.prototype._requestRemotePresence=function(){this.connection._requestRemotePresence(this.channel)};te.prototype._handleSubscribe=function(e,t){this.wantSubscribe&&(this.subscribed=!0);var n=this._subscriptionCallback(t);this._callbackOrEmit(e,n)};te.prototype._handleUnsubscribe=function(e,t){this.subscribed=!1;var n=this._subscriptionCallback(t);this._callbackOrEmit(e,n)};te.prototype._receiveUpdate=function(e,t){var n=wi.dig(this.localPresences,t.id);if(n)return n._ack(e,t.pv);if(e)return this.emit("error",e);var r=this,i=wi.digOrCreate(this._remotePresenceInstances,t.id,function(){return r._createRemotePresence(t.id)});i.receiveUpdate(t)};te.prototype._updateRemotePresence=function(e){this.remotePresences[e.presenceId]=e.value,e.value===null&&this._removeRemotePresence(e.presenceId),this.emit("receive",e.presenceId,e.value)};te.prototype._broadcastAllLocalPresence=function(e){if(e)return this.emit("error",e);for(var t in this.localPresences){var n=this.localPresences[t];n.value!==null&&n.send()}};te.prototype._removeRemotePresence=function(e){this._remotePresenceInstances[e].destroy(),delete this._remotePresenceInstances[e],delete this.remotePresences[e]};te.prototype._onConnectionStateChanged=function(){if(!this.connection.canSend){this.subscribed=!1;return}this._resubscribe();for(var e in this.localPresences)this.localPresences[e]._sendPending()};te.prototype._resubscribe=function(){var e=[];for(var t in this._subscriptionCallbacksBySeq){var n=this._subscriptionCallback(t);e.push(n)}if(!this.wantSubscribe)return this._callEachOrEmit(e);var r=this;this.subscribe(function(i){r._callEachOrEmit(e,i)})};te.prototype._subscriptionCallback=function(e){var t=this._subscriptionCallbacksBySeq[e];return delete this._subscriptionCallbacksBySeq[e],t};te.prototype._callbackOrEmit=function(e,t){if(t)return wi.nextTick(t,e);e&&this.emit("error",e)};te.prototype._createLocalPresence=function(e){return new sE(this,e)};te.prototype._createRemotePresence=function(e){return new uE(this,e)};te.prototype._callEachOrEmit=function(e,t){var n=wi.callEach(e,t);!n&&t&&this.emit("error",t)};te.prototype._combineSubscribeCallbackWithLastAdded=function(e){var t=Object.keys(this._subscriptionCallbacksBySeq),n=t[t.length-1],r=this._subscriptionCallbacksBySeq[n];if(!r)return this._subscriptionCallbacksBySeq[n]=e;this._subscriptionCallbacksBySeq[n]=function(i){r(i),e(i)}};var xi=rv,uv=Pe,aE=J,lv=uv.CODES,fE=ft;function ft(e,t){xi.call(this,e,t),this.collection=this.presence.collection,this.id=this.presence.id,this._doc=this.connection.get(this.collection,this.id),this._emitter=this.connection._docPresenceEmitter,this._isSending=!1,this._docDataVersionByPresenceVersion={},this._opHandler=this._transformAgainstOp.bind(this),this._createOrDelHandler=this._handleCreateOrDel.bind(this),this._loadHandler=this._handleLoad.bind(this),this._destroyHandler=this.destroy.bind(this),this._registerWithDoc()}ft.prototype=Object.create(xi.prototype);ft.prototype.submit=function(e,t){if(!this._doc.type){if(e===null)return this._callbackOrEmit(null,t);var n={code:lv.ERR_DOC_DOES_NOT_EXIST,message:"Cannot submit presence. Document has not been created"};return this._callbackOrEmit(n,t)}this._docDataVersionByPresenceVersion[this.presenceVersion]=this._doc._dataStateVersion,xi.prototype.submit.call(this,e,t)};ft.prototype.destroy=function(e){this._emitter.removeEventListener(this._doc,"op",this._opHandler),this._emitter.removeEventListener(this._doc,"create",this._createOrDelHandler),this._emitter.removeEventListener(this._doc,"del",this._createOrDelHandler),this._emitter.removeEventListener(this._doc,"load",this._loadHandler),this._emitter.removeEventListener(this._doc,"destroy",this._destroyHandler),xi.prototype.destroy.call(this,e)};ft.prototype._sendPending=function(){if(!this._isSending){this._isSending=!0;var e=this;this._doc.whenNothingPending(function(){e._isSending=!1,e.connection.canSend&&(e._pendingMessages.forEach(function(t){t.t=e._doc.type.uri,t.v=e._doc.version,e.connection.send(t)}),e._pendingMessages=[],e._docDataVersionByPresenceVersion={})})}};ft.prototype._registerWithDoc=function(){this._emitter.addEventListener(this._doc,"op",this._opHandler),this._emitter.addEventListener(this._doc,"create",this._createOrDelHandler),this._emitter.addEventListener(this._doc,"del",this._createOrDelHandler),this._emitter.addEventListener(this._doc,"load",this._loadHandler),this._emitter.addEventListener(this._doc,"destroy",this._destroyHandler)};ft.prototype._transformAgainstOp=function(e,t){var n=this,r=this._doc._dataStateVersion;this._pendingMessages.forEach(function(i){var o=n._docDataVersionByPresenceVersion[i.pv];if(!(o>=r))try{i.p=n._transformPresence(i.p,e,t),n._docDataVersionByPresenceVersion[i.pv]=r}catch(u){var s=n._getCallback(i.pv);n._callbackOrEmit(u,s)}});try{this.value=this._transformPresence(this.value,e,t)}catch(i){this.emit("error",i)}};ft.prototype._handleCreateOrDel=function(){this._pendingMessages.forEach(function(e){e.p=null}),this.value=null};ft.prototype._handleLoad=function(){this.value=null,this._pendingMessages=[],this._docDataVersionByPresenceVersion={}};ft.prototype._message=function(){var e=xi.prototype._message.call(this);return e.c=this.collection,e.d=this.id,e.v=null,e.t=null,e};ft.prototype._transformPresence=function(e,t,n){var r=this._doc.type;if(!aE.supportsPresence(r))throw new uv(lv.ERR_TYPE_DOES_NOT_SUPPORT_PRESENCE,"Type does not support presence: "+r.name);return r.transformPresence(e,t,n)};var bi={};(function(e){var t=bn,n=Pe,r=J,i=n.CODES;e.checkOp=function(u){if(u==null||typeof u!="object")return new n(i.ERR_OT_OP_BADLY_FORMED,"Op must be an object");if(u.create!=null){if(typeof u.create!="object")return new n(i.ERR_OT_OP_BADLY_FORMED,"Create data must be an object");var l=u.create.type;if(typeof l!="string")return new n(i.ERR_OT_OP_BADLY_FORMED,"Missing create type");var a=t.map[l];if(a==null||typeof a!="object")return new n(i.ERR_DOC_TYPE_NOT_RECOGNIZED,"Unknown type")}else if(u.del!=null){if(u.del!==!0)return new n(i.ERR_OT_OP_BADLY_FORMED,"del value must be true")}else if(!("op"in u))return new n(i.ERR_OT_OP_BADLY_FORMED,"Missing op, create, or del");if(u.src!=null&&typeof u.src!="string")return new n(i.ERR_OT_OP_BADLY_FORMED,"src must be a string");if(u.seq!=null&&typeof u.seq!="number")return new n(i.ERR_OT_OP_BADLY_FORMED,"seq must be a number");if(u.src==null&&u.seq!=null||u.src!=null&&u.seq==null)return new n(i.ERR_OT_OP_BADLY_FORMED,"Both src and seq must be set together");if(u.m!=null&&typeof u.m!="object")return new n(i.ERR_OT_OP_BADLY_FORMED,"op.m must be an object or null")},e.normalizeType=function(u){return t.map[u]&&t.map[u].uri},e.apply=function(u,l){if(typeof u!="object")return new n(i.ERR_APPLY_SNAPSHOT_NOT_PROVIDED,"Missing snapshot");if(u.v!=null&&l.v!=null&&u.v!==l.v)return new n(i.ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT,"Version mismatch");if(l.create){if(u.type)return new n(i.ERR_DOC_ALREADY_CREATED,"Document already exists");var a=l.create,f=t.map[a.type];if(!f)return new n(i.ERR_DOC_TYPE_NOT_RECOGNIZED,"Unknown type");try{u.data=f.create(a.data),u.type=f.uri,u.v++}catch(h){return h}}else if(l.del)u.data=void 0,u.type=null,u.v++;else if("op"in l){var p=o(u,l.op);if(p)return p;u.v++}else u.v++};function o(u,l){if(!u.type)return new n(i.ERR_DOC_DOES_NOT_EXIST,"Document does not exist");if(l===void 0)return new n(i.ERR_OT_OP_NOT_PROVIDED,"Missing op");var a=t.map[u.type];if(!a)return new n(i.ERR_DOC_TYPE_NOT_RECOGNIZED,"Unknown type");try{u.data=a.apply(u.data,l)}catch(f){return new n(i.ERR_OT_OP_NOT_APPLIED,f.message)}}e.transform=function(u,l,a){if(l.v!=null&&l.v!==a.v)return new n(i.ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM,"Version mismatch");if(a.del){if(l.create||"op"in l)return new n(i.ERR_DOC_WAS_DELETED,"Document was deleted")}else{if(a.create&&("op"in l||l.create||l.del)||"op"in a&&l.create)return new n(i.ERR_DOC_ALREADY_CREATED,"Document was created remotely");if("op"in a&&"op"in l){if(!u)return new n(i.ERR_DOC_DOES_NOT_EXIST,"Document does not exist");if(typeof u=="string"&&(u=t.map[u],!u))return new n(i.ERR_DOC_TYPE_NOT_RECOGNIZED,"Unknown type");try{l.op=u.transform(l.op,a.op,"left")}catch(f){return f}}}l.v!=null&&l.v++},e.applyOps=function(u,l,a){a=a||{};for(var f=0;f<l.length;f++){var p=l[f];if(a._normalizeLegacyJson0Ops)try{s(u,p)}catch{return new n(i.ERR_OT_LEGACY_JSON0_OP_CANNOT_BE_NORMALIZED,"Cannot normalize legacy json0 op")}u.v=p.v;var h=e.apply(u,p);if(h)return h}},e.transformPresence=function(u,l,a){var f=this.checkOp(l);if(f)return f;var p=u.t;if(typeof p=="string"&&(p=t.map[p]),!p)return{code:i.ERR_DOC_TYPE_NOT_RECOGNIZED,message:"Unknown type"};if(!r.supportsPresence(p))return{code:i.ERR_TYPE_DOES_NOT_SUPPORT_PRESENCE,message:"Type does not support presence"};if(l.create||l.del){u.p=null,u.v++;return}try{u.p=u.p===null?null:p.transformPresence(u.p,l.op,a)}catch(h){return{code:i.ERR_PRESENCE_TRANSFORM_FAILED,message:h.message||h}}u.v++};function s(u,l){if(u.type===t.defaultType.uri){var a=l.op;if(a){var f=u.data;a.length>1&&(f=r.clone(f));for(var p=0;p<a.length;p++){var h=a[p];typeof h.lm=="string"&&(h.lm=+h.lm);for(var y=h.p,m=f,g=0;g<y.length;g++){var w=y[g];Object.prototype.toString.call(m)=="[object Array]"?y[g]=+w:m.constructor===Object&&(y[g]=w.toString()),m=m[w]}p<a.length-1&&(f=t.defaultType.apply(f,[h]))}}}}})(bi);var ji=iv,cE=bi,pE=Je;function Je(e,t){ji.call(this,e,t),this.collection=this.presence.collection,this.id=this.presence.id,this.src=null,this.presenceVersion=null,this._doc=this.connection.get(this.collection,this.id),this._emitter=this.connection._docPresenceEmitter,this._pending=null,this._opCache=null,this._pendingSetPending=!1,this._opHandler=this._handleOp.bind(this),this._createDelHandler=this._handleCreateDel.bind(this),this._loadHandler=this._handleLoad.bind(this),this._registerWithDoc()}Je.prototype=Object.create(ji.prototype);Je.prototype.receiveUpdate=function(e){this._pending&&e.pv<this._pending.pv||(this.src=e.src,this._pending=e,this._setPendingPresence())};Je.prototype.destroy=function(e){this._emitter.removeEventListener(this._doc,"op",this._opHandler),this._emitter.removeEventListener(this._doc,"create",this._createDelHandler),this._emitter.removeEventListener(this._doc,"del",this._createDelHandler),this._emitter.removeEventListener(this._doc,"load",this._loadHandler),ji.prototype.destroy.call(this,e)};Je.prototype._registerWithDoc=function(){this._emitter.addEventListener(this._doc,"op",this._opHandler),this._emitter.addEventListener(this._doc,"create",this._createDelHandler),this._emitter.addEventListener(this._doc,"del",this._createDelHandler),this._emitter.addEventListener(this._doc,"load",this._loadHandler)};Je.prototype._setPendingPresence=function(){if(!this._pendingSetPending){this._pendingSetPending=!0;var e=this;this._doc.whenNothingPending(function(){if(e._pendingSetPending=!1,!!e._pending){if(e._pending.pv<e.presenceVersion)return e._pending=null;if(e._pending.v>e._doc.version)return e._doc.fetch();e._catchUpStalePresence()&&(e.value=e._pending.p,e.presenceVersion=e._pending.pv,e._pending=null,e.presence._updateRemotePresence(e))}})}};Je.prototype._handleOp=function(e,t,n){var r=n===this.src;this._transformAgainstOp(e,r),this._cacheOp(e,r),this._setPendingPresence()};ji.prototype._handleCreateDel=function(){this._cacheOp(null),this._setPendingPresence()};ji.prototype._handleLoad=function(){this.value=null,this._pending=null,this._opCache=null,this.presence._updateRemotePresence(this)};Je.prototype._transformAgainstOp=function(e,t){if(this.value){try{this.value=this._doc.type.transformPresence(this.value,e,t)}catch(n){return this.presence.emit("error",n)}this.presence._updateRemotePresence(this)}};Je.prototype._catchUpStalePresence=function(){if(this._pending.v>=this._doc.version)return!0;if(!this._opCache)return this._startCachingOps(),this._doc.fetch(),this.presence._requestRemotePresence(),!1;for(;this._opCache[this._pending.v];){var e=this._opCache[this._pending.v],t=e.op,n=e.isOwnOp;t===null?(this._pending.p=null,this._pending.v++):cE.transformPresence(this._pending,t,n)}var r=this._pending.v>=this._doc.version;return r&&this._stopCachingOps(),r};Je.prototype._startCachingOps=function(){this._opCache=[]};Je.prototype._stopCachingOps=function(){this._opCache=null};Je.prototype._cacheOp=function(e,t){this._opCache&&(e=e?{op:e}:null,this._opCache[this._doc.version-1]={op:e,isOwnOp:t})};var av=sv,hE=fE,dE=pE;function Rr(e,t,n){var r=Rr.channel(t,n);av.call(this,e,r),this.collection=t,this.id=n}var vE=Rr;Rr.prototype=Object.create(av.prototype);Rr.channel=function(e,t){return e+"."+t};Rr.prototype._createLocalPresence=function(e){return new hE(this,e)};Rr.prototype._createRemotePresence=function(e){return new dE(this,e)};var Ha=yE;function yE(e,t,n,r,i){this.id=e,this.v=t,this.type=n,this.data=r,this.m=i}var mE=Ha,fv=at,cv=Bi;function Bi(e,t,n,r,i){if(fv.EventEmitter.call(this),typeof i!="function")throw new Error("Callback is required for SnapshotRequest");this.requestId=t,this.connection=e,this.id=r,this.collection=n,this.callback=i,this.sent=!1}fv.mixin(Bi);Bi.prototype.send=function(){this.connection.canSend&&(this.connection.send(this._message()),this.sent=!0)};Bi.prototype._onConnectionStateChanged=function(){this.connection.canSend?this.sent||this.send():this.sent=!1};Bi.prototype._handleResponse=function(e,t){if(this.emit("ready"),e)return this.callback(e);var n=t.meta?t.meta:null,r=new mE(this.id,t.v,t.type,t.data,n);this.callback(null,r)};var pv=cv,_E=J,gE=gt.ACTIONS,EE=Wa;function Wa(e,t,n,r,i,o){if(pv.call(this,e,t,n,r,o),!_E.isValidVersion(i))throw new Error("Snapshot version must be a positive integer or null");this.version=i}Wa.prototype=Object.create(pv.prototype);Wa.prototype._message=function(){return{a:gE.snapshotFetch,id:this.requestId,c:this.collection,d:this.id,v:this.version}};var hv=cv,SE=J,OE=gt.ACTIONS,RE=Qa;function Qa(e,t,n,r,i,o){if(hv.call(this,e,t,n,r,o),!SE.isValidTimestamp(i))throw new Error("Snapshot timestamp must be a positive integer or null");this.timestamp=i}Qa.prototype=Object.create(hv.prototype);Qa.prototype._message=function(){return{a:OE.snapshotFetchByTimestamp,id:this.requestId,c:this.collection,d:this.id,ts:this.timestamp}};var yt=J,wE=Xd.EventEmitter,TE=["create","del","destroy","load","op"],DE=Fi;function Fi(){this._docs={},this._forwarders={},this._emitters={}}Fi.prototype.addEventListener=function(e,t,n){this._registerDoc(e);var r=yt.dig(this._emitters,e.collection,e.id);r.on(t,n)};Fi.prototype.removeEventListener=function(e,t,n){var r=yt.dig(this._emitters,e.collection,e.id);r&&(r.off(t,n),r._eventsCount===1&&this._unregisterDoc(e))};Fi.prototype._registerDoc=function(e){var t=!0;if(yt.digOrCreate(this._docs,e.collection,e.id,function(){return t=!1,e}),!t){var n=yt.digOrCreate(this._emitters,e.collection,e.id,function(){var i=new wE;return i.setMaxListeners(1e3),i}),r=this;TE.forEach(function(i){var o=yt.digOrCreate(r._forwarders,e.collection,e.id,i,function(){return n.emit.bind(n,i)});e.on(i,o)}),this.addEventListener(e,"destroy",this._unregisterDoc.bind(this,e))}};Fi.prototype._unregisterDoc=function(e){var t=yt.dig(this._forwarders,e.collection,e.id);for(var n in t)e.off(n,t[n]);var r=yt.dig(this._emitters,e.collection,e.id);r.removeAllListeners(),yt.digAndRemove(this._forwarders,e.collection,e.id),yt.digAndRemove(this._emitters,e.collection,e.id),yt.digAndRemove(this._docs,e.collection,e.id)};var PE=Jg,NE=nE,CE=sv,Oc=vE,LE=EE,kE=RE,dv=at,ir=Pe,U=gt.ACTIONS,Rc=bn,ct=J,Ti=Or,AE=DE,Jr=ir.CODES;function vv(e){return e.readyState===0||e.readyState===1?"connecting":"disconnected"}var IE=N;function N(e){dv.EventEmitter.call(this),this.collections={},this.nextQueryId=1,this.nextSnapshotRequestId=1,this.queries={},this._presences={},this._docPresenceEmitter=new AE,this._snapshotRequests={},this.seq=1,this._presenceSeq=1,this.id=null,this.agent=null,this.debug=!1,this.state=vv(e),this.bindToSocket(e)}dv.mixin(N);N.prototype.bindToSocket=function(e){this.socket&&(this.socket.close(),this.socket.onmessage=null,this.socket.onopen=null,this.socket.onerror=null,this.socket.onclose=null),this.socket=e;var t=vv(e);this._setState(t),this.canSend=!1;var n=this;e.onmessage=function(r){try{var i=typeof r.data=="string"?JSON.parse(r.data):r.data}catch{Ti.warn("Failed to parse message",r);return}n.debug&&Ti.info("RECV",JSON.stringify(i));var o={data:i};if(n.emit("receive",o),!!o.data)try{n.handleMessage(o.data)}catch(s){ct.nextTick(function(){n.emit("error",s)})}},e.readyState===1&&n._initializeHandshake(),e.onopen=function(){n._setState("connecting"),n._initializeHandshake()},e.onerror=function(r){n.emit("connection error",r)},e.onclose=function(r){r==="closed"||r==="Closed"?n._setState("closed",r):r==="stopped"||r==="Stopped by server"?n._setState("stopped",r):n._setState("disconnected",r)}};N.prototype.handleMessage=function(e){var t=null;switch(e.error&&(t=yv(e.error,e),delete e.error),e.a){case U.initLegacy:return this._handleLegacyInit(e);case U.handshake:return this._handleHandshake(t,e);case U.queryFetch:var n=this.queries[e.id];n&&n._handleFetch(t,e.data,e.extra);return;case U.querySubscribe:var n=this.queries[e.id];n&&n._handleSubscribe(t,e.data,e.extra);return;case U.queryUnsubscribe:return;case U.queryUpdate:var n=this.queries[e.id];if(!n)return;if(t)return n._handleError(t);e.diff&&n._handleDiff(e.diff),e.hasOwnProperty("extra")&&n._handleExtra(e.extra);return;case U.bulkFetch:return this._handleBulkMessage(t,e,"_handleFetch");case U.bulkSubscribe:case U.bulkUnsubscribe:return this._handleBulkMessage(t,e,"_handleSubscribe");case U.snapshotFetch:case U.snapshotFetchByTimestamp:return this._handleSnapshotFetch(t,e);case U.fetch:var r=this.getExisting(e.c,e.d);r&&r._handleFetch(t,e.data);return;case U.subscribe:case U.unsubscribe:var r=this.getExisting(e.c,e.d);r&&r._handleSubscribe(t,e.data);return;case U.op:var r=this.getExisting(e.c,e.d);r&&r._handleOp(t,e);return;case U.presence:return this._handlePresence(t,e);case U.presenceSubscribe:return this._handlePresenceSubscribe(t,e);case U.presenceUnsubscribe:return this._handlePresenceUnsubscribe(t,e);case U.presenceRequest:return this._handlePresenceRequest(t,e);case U.pingPong:return this._handlePingPong(t);default:Ti.warn("Ignoring unrecognized message",e)}};function yv(e,t){var n=new Error(e.message);return n.code=e.code,t&&(n.data=t),n}N.prototype._handleBulkMessage=function(e,t,n){if(t.data)for(var r in t.data){var i=t.data[r],o=this.getExisting(t.c,r);o&&(e?o[n](e):i.error?o[n](yv(i.error)):o[n](null,i))}else if(Array.isArray(t.b))for(var s=0;s<t.b.length;s++){var r=t.b[s],o=this.getExisting(t.c,r);o&&o[n](e)}else if(t.b)for(var r in t.b){var o=this.getExisting(t.c,r);o&&o[n](e)}else Ti.error("Invalid bulk message",t)};N.prototype._reset=function(){this.agent=null};N.prototype._setState=function(e,t){if(this.state!==e){if(e==="connecting"&&this.state!=="disconnected"&&this.state!=="stopped"&&this.state!=="closed"||e==="connected"&&this.state!=="connecting"){var n=new ir(Jr.ERR_CONNECTION_STATE_TRANSITION_INVALID,"Cannot transition directly from "+this.state+" to "+e);return this.emit("error",n)}this.state=e,this.canSend=e==="connected",(e==="disconnected"||e==="stopped"||e==="closed")&&this._reset(),this.startBulk();for(var r in this.queries){var i=this.queries[r];i._onConnectionStateChanged()}for(var o in this.collections){var s=this.collections[o];for(var r in s)s[r]._onConnectionStateChanged()}for(var u in this._presences)this._presences[u]._onConnectionStateChanged();for(var r in this._snapshotRequests){var l=this._snapshotRequests[r];l._onConnectionStateChanged()}this.endBulk(),this.emit(e,t),this.emit("state",e,t)}};N.prototype.startBulk=function(){this.bulk||(this.bulk={})};N.prototype.endBulk=function(){if(this.bulk)for(var e in this.bulk){var t=this.bulk[e];this._sendBulk("f",e,t.f),this._sendBulk("s",e,t.s),this._sendBulk("u",e,t.u)}this.bulk=null};N.prototype._sendBulk=function(e,t,n){if(n){var r=[],i={},o=0,s;for(var u in n){var l=n[u];l==null?r.push(u):(i[u]=l,s=u,o++)}if(r.length===1){var u=r[0];this.send({a:e,c:t,d:u})}else r.length&&this.send({a:"b"+e,c:t,b:r});if(o===1){var a=i[s];this.send({a:e,c:t,d:s,v:a})}else o&&this.send({a:"b"+e,c:t,b:i})}};N.prototype._sendActions=function(e,t,n){if(this._addDoc(t),this.bulk){var r=this.bulk[t.collection]||(this.bulk[t.collection]={}),i=r[e]||(r[e]={}),o=i.hasOwnProperty(t.id);return i[t.id]=n,o}else{var s={a:e,c:t.collection,d:t.id,v:n};this.send(s)}};N.prototype.sendFetch=function(e){return this._sendActions(U.fetch,e,e.version)};N.prototype.sendSubscribe=function(e){return this._sendActions(U.subscribe,e,e.version)};N.prototype.sendUnsubscribe=function(e){return this._sendActions(U.unsubscribe,e)};N.prototype.sendOp=function(e,t){this._addDoc(e);var n={a:U.op,c:e.collection,d:e.id,v:e.version,src:t.src,seq:t.seq,x:{}};"op"in t&&(n.op=t.op),t.create&&(n.create=t.create),t.del&&(n.del=t.del),e.submitSource&&(n.x.source=t.source),this.send(n)};N.prototype.send=function(e){this.debug&&Ti.info("SEND",JSON.stringify(e)),this.emit("send",e),this.socket.send(JSON.stringify(e))};N.prototype.ping=function(){if(!this.canSend)throw new ir(Jr.ERR_CANNOT_PING_OFFLINE,"Socket must be CONNECTED to ping");var e={a:U.pingPong};this.send(e)};N.prototype.close=function(){this.socket.close()};N.prototype.getExisting=function(e,t){if(this.collections[e])return this.collections[e][t]};N.prototype.get=function(e,t){var n=this.collections[e]||(this.collections[e]={}),r=n[t];return r||(r=n[t]=new PE(this,e,t),this.emit("doc",r)),r._wantsDestroy=!1,r};N.prototype._destroyDoc=function(e){e._wantsDestroy&&(ct.digAndRemove(this.collections,e.collection,e.id),e.emit("destroy"))};N.prototype._addDoc=function(e){var t=this.collections[e.collection];t||(t=this.collections[e.collection]={}),t[e.id]!==e&&(t[e.id]=e)};N.prototype._createQuery=function(e,t,n,r,i){var o=this.nextQueryId++,s=new NE(e,this,o,t,n,r,i);return this.queries[o]=s,s.send(),s};N.prototype._destroyQuery=function(e){delete this.queries[e.id]};N.prototype.createFetchQuery=function(e,t,n,r){return this._createQuery(U.queryFetch,e,t,n,r)};N.prototype.createSubscribeQuery=function(e,t,n,r){return this._createQuery(U.querySubscribe,e,t,n,r)};N.prototype.hasPending=function(){return!!(this._firstDoc(ys)||this._firstQuery(ys)||this._firstSnapshotRequest())};function ys(e){return e.hasPending()}N.prototype.hasWritePending=function(){return!!this._firstDoc(ME)};function ME(e){return e.hasWritePending()}N.prototype.whenNothingPending=function(e){var t=this._firstDoc(ys);if(t){t.once("nothing pending",this._nothingPendingRetry(e));return}var n=this._firstQuery(ys);if(n){n.once("ready",this._nothingPendingRetry(e));return}var r=this._firstSnapshotRequest();if(r){r.once("ready",this._nothingPendingRetry(e));return}ct.nextTick(e)};N.prototype._nothingPendingRetry=function(e){var t=this;return function(){ct.nextTick(function(){t.whenNothingPending(e)})}};N.prototype._firstDoc=function(e){for(var t in this.collections){var n=this.collections[t];for(var r in n){var i=n[r];if(e(i))return i}}};N.prototype._firstQuery=function(e){for(var t in this.queries){var n=this.queries[t];if(e(n))return n}};N.prototype._firstSnapshotRequest=function(){for(var e in this._snapshotRequests)return this._snapshotRequests[e]};N.prototype.fetchSnapshot=function(e,t,n,r){typeof n=="function"&&(r=n,n=null);var i=this.nextSnapshotRequestId++,o=new LE(this,i,e,t,n,r);this._snapshotRequests[o.requestId]=o,o.send()};N.prototype.fetchSnapshotByTimestamp=function(e,t,n,r){typeof n=="function"&&(r=n,n=null);var i=this.nextSnapshotRequestId++,o=new kE(this,i,e,t,n,r);this._snapshotRequests[o.requestId]=o,o.send()};N.prototype._handleSnapshotFetch=function(e,t){var n=this._snapshotRequests[t.id];n&&(delete this._snapshotRequests[t.id],n._handleResponse(e,t))};N.prototype._handleLegacyInit=function(e){if(e.protocolMinor)return this._initializeHandshake();this._initialize(e)};N.prototype._initializeHandshake=function(){this.send({a:U.handshake,id:this.id})};N.prototype._handleHandshake=function(e,t){if(e)return this.emit("error",e);this._initialize(t)};N.prototype._handlePingPong=function(e){if(e)return this.emit("error",e);this.emit("pong")};N.prototype._initialize=function(e){if(this.state==="connecting"){if(e.protocol!==1)return this.emit("error",new ir(Jr.ERR_PROTOCOL_VERSION_NOT_SUPPORTED,"Unsupported protocol version: "+e.protocol));if(Rc.map[e.type]!==Rc.defaultType)return this.emit("error",new ir(Jr.ERR_DEFAULT_TYPE_MISMATCH,e.type+" does not match the server default type"));if(typeof e.id!="string")return this.emit("error",new ir(Jr.ERR_CLIENT_ID_BADLY_FORMED,"Client id must be a string"));this.id=e.id,this._setState("connected")}};N.prototype.getPresence=function(e){var t=this,n=ct.digOrCreate(this._presences,e,function(){return new CE(t,e)});return n._wantsDestroy=!1,n};N.prototype.getDocPresence=function(e,t){var n=Oc.channel(e,t),r=this,i=ct.digOrCreate(this._presences,n,function(){return new Oc(r,e,t)});return i._wantsDestroy=!1,i};N.prototype._sendPresenceAction=function(e,t,n){this._addPresence(n);var r={a:e,ch:n.channel,seq:t};return this.send(r),r.seq};N.prototype._addPresence=function(e){ct.digOrCreate(this._presences,e.channel,function(){return e})};N.prototype._requestRemotePresence=function(e){this.send({a:U.presenceRequest,ch:e})};N.prototype._handlePresenceSubscribe=function(e,t){var n=ct.dig(this._presences,t.ch);n&&n._handleSubscribe(e,t.seq)};N.prototype._handlePresenceUnsubscribe=function(e,t){var n=ct.dig(this._presences,t.ch);n&&n._handleUnsubscribe(e,t.seq)};N.prototype._handlePresence=function(e,t){var n=ct.dig(this._presences,t.ch);n&&n._receiveUpdate(e,t)};N.prototype._handlePresenceRequest=function(e,t){var n=ct.dig(this._presences,t.ch);n&&n._broadcastAllLocalPresence(e,t)};var mv=Fa,wr=Pe,zi=wr.CODES;function Ee(e){this.pollDebounce=e&&e.pollDebounce}var _v=Ee;Ee.prototype.projectsSnapshots=!1;Ee.prototype.disableSubscribe=!1;Ee.prototype.close=function(e){e&&e()};Ee.prototype.commit=function(e,t,n,r,i,o){o(new wr(zi.ERR_DATABASE_METHOD_NOT_IMPLEMENTED,"commit DB method unimplemented"))};Ee.prototype.getSnapshot=function(e,t,n,r,i){i(new wr(zi.ERR_DATABASE_METHOD_NOT_IMPLEMENTED,"getSnapshot DB method unimplemented"))};Ee.prototype.getSnapshotBulk=function(e,t,n,r,i){var o={},s=this;mv.each(t,function(u,l){s.getSnapshot(e,u,n,r,function(a,f){if(a)return l(a);o[u]=f,l()})},function(u){if(u)return i(u);i(null,o)})};Ee.prototype.getOps=function(e,t,n,r,i,o){o(new wr(zi.ERR_DATABASE_METHOD_NOT_IMPLEMENTED,"getOps DB method unimplemented"))};Ee.prototype.getOpsToSnapshot=function(e,t,n,r,i,o){var s=r.v;this.getOps(e,t,n,s,i,o)};Ee.prototype.getOpsBulk=function(e,t,n,r,i){var o={},s=this;mv.forEachOf(t,function(u,l,a){var f=n&&n[l];s.getOps(e,l,u,f,r,function(p,h){if(p)return a(p);o[l]=h,a()})},function(u){if(u)return i(u);i(null,o)})};Ee.prototype.getCommittedOpVersion=function(e,t,n,r,i,o){this.getOpsToSnapshot(e,t,0,n,i,function(s,u){if(s)return o(s);for(var l=u.length;l--;){var a=u[l];if(r.src===a.src&&r.seq===a.seq)return o(null,a.v)}o()})};Ee.prototype.query=function(e,t,n,r,i){i(new wr(zi.ERR_DATABASE_METHOD_NOT_IMPLEMENTED,"query DB method unimplemented"))};Ee.prototype.queryPoll=function(e,t,n,r){var i={};this.query(e,t,i,n,function(o,s,u){if(o)return r(o);for(var l=[],a=0;a<s.length;a++)l.push(s[a].id);r(null,l,u)})};Ee.prototype.queryPollDoc=function(e,t,n,r,i){i(new wr(zi.ERR_DATABASE_METHOD_NOT_IMPLEMENTED,"queryPollDoc DB method unimplemented"))};Ee.prototype.canPollDoc=function(){return!1};Ee.prototype.skipPoll=function(){return!1};var gv=_v,wc=Ha,$i=J,Di=$i.clone;function we(e){if(!(this instanceof we))return new we(e);gv.call(this,e),this.docs={},this.ops={},this.closed=!1}var Ev=we;we.prototype=Object.create(gv.prototype);we.prototype.close=function(e){this.closed=!0,e&&e()};we.prototype.commit=function(e,t,n,r,i,o){var s=this;if(typeof o!="function")throw new Error("Callback required");$i.nextTick(function(){var u=s._getVersionSync(e,t);if(r.v!==u+1){var a=!1;return o(null,a)}var l=s._writeOpSync(e,t,n);if(l||(l=s._writeSnapshotSync(e,t,r),l))return o(l);var a=!0;o(null,a)})};we.prototype.getSnapshot=function(e,t,n,r,i){var o=n&&n.$submit||r&&r.metadata,s=this;if(typeof i!="function")throw new Error("Callback required");$i.nextTick(function(){var u=s._getSnapshotSync(e,t,o);i(null,u)})};we.prototype.getOps=function(e,t,n,r,i,o){var s=i&&i.metadata,u=this;if(typeof o!="function")throw new Error("Callback required");$i.nextTick(function(){var l=u._getOpLogSync(e,t);r==null&&(r=l.length);var a=Di(l.slice(n,r));if(!s)for(var f=0;f<a.length;f++)delete a[f].m;o(null,a)})};we.prototype.query=function(e,t,n,r,i){var o=r&&r.metadata,s=this;if(typeof i!="function")throw new Error("Callback required");$i.nextTick(function(){var u=s.docs[e],l=[];for(var a in u||{}){var f=s._getSnapshotSync(e,a,o);l.push(f)}try{var p=s._querySync(l,t,r);i(null,p.snapshots,p.extra)}catch(h){i(h)}})};we.prototype._querySync=function(e){return{snapshots:e}};we.prototype._writeOpSync=function(e,t,n){var r=this._getOpLogSync(e,t);r[n.v]=Di(n)};we.prototype._writeSnapshotSync=function(e,t,n){var r=this.docs[e]||(this.docs[e]={});n.type?r[t]=Di(n):delete r[t]};we.prototype._getSnapshotSync=function(e,t,n){var r=this.docs[e],i=r&&r[t],o;if(i){var s=Di(i.data),u=n?Di(i.m):null;o=new wc(t,i.v,i.type,s,u)}else{var l=this._getVersionSync(e,t);o=new wc(t,l,null,void 0,null)}return o};we.prototype._getOpLogSync=function(e,t){var n=this.ops[e]||(this.ops[e]={});return n[t]||(n[t]=[])};we.prototype._getVersionSync=function(e,t){var n=this.ops[e];return n&&n[t]&&n[t].length||0};var Sv=at,Ui=Pe,Ws=J,Qs=Ui.CODES,qa=St;function St(e){Sv.EventEmitter.call(this),this.interval=e&&e.interval}Sv.mixin(St);St.prototype.close=function(e){e&&Ws.nextTick(e)};St.prototype.getMilestoneSnapshot=function(e,t,n,r){var i=new Ui(Qs.ERR_DATABASE_METHOD_NOT_IMPLEMENTED,"getMilestoneSnapshot MilestoneDB method unimplemented");this._callBackOrEmitError(i,r)};St.prototype.saveMilestoneSnapshot=function(e,t,n){var r=new Ui(Qs.ERR_DATABASE_METHOD_NOT_IMPLEMENTED,"saveMilestoneSnapshot MilestoneDB method unimplemented");this._callBackOrEmitError(r,n)};St.prototype.getMilestoneSnapshotAtOrBeforeTime=function(e,t,n,r){var i=new Ui(Qs.ERR_DATABASE_METHOD_NOT_IMPLEMENTED,"getMilestoneSnapshotAtOrBeforeTime MilestoneDB method unimplemented");this._callBackOrEmitError(i,r)};St.prototype.getMilestoneSnapshotAtOrAfterTime=function(e,t,n,r){var i=new Ui(Qs.ERR_DATABASE_METHOD_NOT_IMPLEMENTED,"getMilestoneSnapshotAtOrAfterTime MilestoneDB method unimplemented");this._callBackOrEmitError(i,r)};St.prototype._isValidVersion=function(e){return Ws.isValidVersion(e)};St.prototype._isValidTimestamp=function(e){return Ws.isValidTimestamp(e)};St.prototype._callBackOrEmitError=function(e,t){if(t)return Ws.nextTick(t,e);this.emit("error",e)};var Ov=qa,qs=J,xE=Tr;function Tr(e){Ov.call(this,e)}Tr.prototype=Object.create(Ov.prototype);Tr.prototype.getMilestoneSnapshot=function(e,t,n,r){var i=void 0;qs.nextTick(r,null,i)};Tr.prototype.saveMilestoneSnapshot=function(e,t,n){if(n)return qs.nextTick(n,null);this.emit("save",e,t)};Tr.prototype.getMilestoneSnapshotAtOrBeforeTime=function(e,t,n,r){var i=void 0;qs.nextTick(r,null,i)};Tr.prototype.getMilestoneSnapshotAtOrAfterTime=function(e,t,n,r){var i=void 0;qs.nextTick(r,null,i)};const bE={},jE=Object.freeze(Object.defineProperty({__proto__:null,default:bE},Symbol.toStringTag,{value:"Module"})),Ys=Pc(jE);var BE=Ys.inherits,Rv=Ys.Readable,FE=J;function Vi(){Rv.call(this,{objectMode:!0}),this.id=null,this.open=!0}var zE=Vi;BE(Vi,Rv);Vi.prototype._read=FE.doNothing;Vi.prototype.pushData=function(e){this.open&&this.push(e)};Vi.prototype.destroy=function(){this.open&&(this.open=!1,this.push(null),this.emit("close"))};var wv=at,$E=zE,Gs=Pe,Dr=J,Ya=Gs.CODES;function $e(e){if(!(this instanceof $e))return new $e(e);wv.EventEmitter.call(this),this.prefix=e&&e.prefix,this.nextStreamId=1,this.streamsCount=0,this.streams={},this.subscribed={};var t=this;this._defaultCallback=function(n){if(n)return t.emit("error",n)}}var Tv=$e;wv.mixin($e);$e.prototype.close=function(e){for(var t in this.streams){var n=this.streams[t];for(var r in n)n[r].destroy()}e&&Dr.nextTick(e)};$e.prototype._subscribe=function(e,t){Dr.nextTick(function(){t(new Gs(Ya.ERR_DATABASE_METHOD_NOT_IMPLEMENTED,"_subscribe PubSub method unimplemented"))})};$e.prototype._unsubscribe=function(e,t){Dr.nextTick(function(){t(new Gs(Ya.ERR_DATABASE_METHOD_NOT_IMPLEMENTED,"_unsubscribe PubSub method unimplemented"))})};$e.prototype._publish=function(e,t,n){Dr.nextTick(function(){n(new Gs(Ya.ERR_DATABASE_METHOD_NOT_IMPLEMENTED,"_publish PubSub method unimplemented"))})};$e.prototype.subscribe=function(e,t){t||(t=this._defaultCallback),this.prefix&&(e=this.prefix+" "+e);var n=this;if(this.subscribed[e]){Dr.nextTick(function(){var r=n._createStream(e);t(null,r)});return}this._subscribe(e,function(r){if(r)return t(r);n.subscribed[e]=!0;var i=n._createStream(e);t(null,i)})};$e.prototype.publish=function(e,t,n){if(n||(n=this._defaultCallback),this.prefix)for(var r=0;r<e.length;r++)e[r]=this.prefix+" "+e[r];this._publish(e,t,n)};$e.prototype._emit=function(e,t){var n=this.streams[e];if(n)for(var r in n)n[r].pushData(t)};$e.prototype._createStream=function(e){var t=new $E,n=this;t.once("close",function(){n._removeStream(e,t)}),this.streamsCount++;var r=this.streams[e]||(this.streams[e]={});return t.id=this.nextStreamId++,r[t.id]=t,t};$e.prototype._removeStream=function(e,t){var n=this.streams[e];n&&(this.streamsCount--,delete n[t.id],!Dr.hasKeys(n)&&(delete this.streams[e],delete this.subscribed[e],this._unsubscribe(e,this._defaultCallback)))};var Dv=Tv,Ga=J;function An(e){if(!(this instanceof An))return new An(e);Dv.call(this,e)}var Pv=An;An.prototype=Object.create(Dv.prototype);An.prototype._subscribe=function(e,t){Ga.nextTick(t)};An.prototype._unsubscribe=function(e,t){Ga.nextTick(t)};An.prototype._publish=function(e,t,n){var r=this;Ga.nextTick(function(){for(var i=0;i<e.length;i++){var o=e[i];r.subscribed[o]&&r._emit(o,t)}n()})};var hn={},Ka=$d.type,UE=Pe,VE=UE.CODES;hn.projectSnapshot=Xa;hn.projectSnapshots=HE;hn.projectOp=WE;hn.isSnapshotAllowed=Nv;hn.isOpAllowed=qE;function Xa(e,t){if(t.type&&t.type!==Ka.uri)throw new Error(VE.ERR_TYPE_CANNOT_BE_PROJECTED,"Cannot project snapshots of type "+t.type);t.data=Ml(e,t.data)}function HE(e,t){for(var n=0;n<t.length;n++){var r=t[n];Xa(e,r)}}function WE(e,t){t.create&&Xa(e,t.create),"op"in t&&(t.op=QE(e,t.op))}function QE(e,t){for(var n=[],r=0;r<t.length;r++){var i=t[r],o=i.p;if(o.length===0){var s={p:[]};(i.od!==void 0||i.oi!==void 0)&&(i.od!==void 0&&(s.od=Ml(e,i.od)),i.oi!==void 0&&(s.oi=Ml(e,i.oi)),n.push(s))}else e[o[0]]&&n.push(i)}return n}function qE(e,t,n){return n.create?Nv(t,n.create):"op"in n?e&&e!==Ka.uri?!1:YE(t,n.op):!0}function Nv(e,t){if(t.type&&t.type!==Ka.uri)return!1;if(t.data==null)return!0;if(typeof t.data!="object"||Array.isArray(t.data))return!1;for(var n in t.data)if(!e[n])return!1;return!0}function YE(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(r.p.length===0)return!1;if(!e[r.p[0]])return!1}return!0}function Ml(e,t){if(t==null)return t;if(typeof t!="object"||Array.isArray(t))return null;var n={};for(var r in e)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}var GE=Zs;Zs.InsertDiff=Ks;Zs.RemoveDiff=Xs;Zs.MoveDiff=Js;function Ks(e,t){this.index=e,this.values=t}Ks.prototype.type="insert";Ks.prototype.toJSON=function(){return{type:this.type,index:this.index,values:this.values}};function Xs(e,t){this.index=e,this.howMany=t}Xs.prototype.type="remove";Xs.prototype.toJSON=function(){return{type:this.type,index:this.index,howMany:this.howMany}};function Js(e,t,n){this.from=e,this.to=t,this.howMany=n}Js.prototype.type="move";Js.prototype.toJSON=function(){return{type:this.type,from:this.from,to:this.to,howMany:this.howMany}};function KE(e,t){return e===t}function Zs(e,t,n){n||(n=KE);for(var r=e.length,i=t.length,o=[],s={},u={},l=0;l<r;l++)for(var a=e[l],f=0;f<i;f++)if(!u[f]&&n(a,t[f])){var p=l,h=f,y=0;do s[l++]=u[f++]=!0,y++;while(l<r&&f<i&&n(e[l],t[f])&&!u[f]);o.push(new Js(p,h,y)),l--;break}var m=[];for(l=0;l<r;){if(s[l]){l++;continue}for(var g=l,y=0;l<r&&!s[l++];)y++;m.push(new Xs(g,y))}for(var w=[],f=0;f<i;){if(u[f]){f++;continue}for(var g=f,y=0;f<i&&!u[f++];)y++;var v=t.slice(g,g+y);w.push(new Ks(g,v))}var c=w.length,d=m.length,_=o.length,E,S,R=0;for(E=0;E<d;E++){var T=m[E];for(T.index-=R,R+=T.howMany,S=0;S<_;S++){var C=o[S];C.from>=T.index&&(C.from-=T.howMany)}}for(E=c;E--;){var L=w[E],y=L.values.length;for(S=_;S--;){var C=o[S];C.to>=L.index&&(C.to-=y)}}for(E=_;E-- >1;){var C=o[E];if(C.to!==C.from)for(S=E;S--;){var Z=o[S];Z.to>=C.to&&(Z.to-=C.howMany),Z.to>=C.from&&(Z.to+=C.howMany)}}var bt=[];for(E=0;E<_;E++){var C=o[E];if(C.to!==C.from)for(bt.push(C),S=E+1;S<_;S++){var pt=o[S];pt.from>=C.from&&(pt.from-=C.howMany),pt.from>=C.to&&(pt.from+=C.howMany)}}return m.concat(bt,w)}var vr=GE,XE=Jd,Cv=Pe,JE=J,ZE=Cv.CODES;function be(e,t,n,r){this.backend=e.backend,this.agent=e.agent,this.db=e.db,this.index=e.index,this.query=e.query,this.collection=e.collection,this.fields=e.fields,this.options=e.options,this.snapshotProjection=e.snapshotProjection,this.streams=t,this.ids=n,this.extra=r,this.skipPoll=this.options.skipPoll||JE.doNothing,this.canPollDoc=this.db.canPollDoc(this.collection,this.query),this.pollDebounce=typeof this.options.pollDebounce=="number"?this.options.pollDebounce:typeof this.db.pollDebounce=="number"?this.db.pollDebounce:t.length>1?1e3:0,this.pollInterval=typeof this.options.pollInterval=="number"?this.options.pollInterval:typeof this.db.pollInterval=="number"?this.db.pollInterval:t.length>1?1e3:0,this._polling=!1,this._pendingPoll=null,this._pollDebounceId=null,this._pollIntervalId=null}var Lv=be;be.prototype._open=function(){var e=this;this._defaultCallback=function(t){t&&e.onError(t)},e.streams.forEach(function(t){t.on("data",function(n){if(n.error)return e.onError(n.error);e._update(n)}),t.on("end",function(){e.destroy()})}),this._flushPoll()};be.prototype.destroy=function(){clearTimeout(this._pollDebounceId),clearTimeout(this._pollIntervalId);for(var e;e=this.streams.pop();)e.destroy()};be.prototype._emitTiming=function(e,t){this.backend.emit("timing",e,Date.now()-t,this)};be.prototype._update=function(e){var t=e.d,n=this._defaultCallback;if(this.ids.indexOf(t)!==-1){var r=this;n=function(i){r.onOp(e),i&&r.onError(i)}}try{if(this.db.skipPoll(this.collection,t,e,this.query)||this.skipPoll(this.collection,t,e,this.query))return n()}catch(i){return n(i)}this.canPollDoc?this.queryPollDoc(t,n):this.queryPoll(n)};be.prototype._flushPoll=function(){if(!(this._polling||this._pollDebounceId)){if(this._pendingPoll)this.queryPoll();else if(this.pollInterval){var e=this;this._pollIntervalId=setTimeout(function(){e._pollIntervalId=null,e.queryPoll(e._defaultCallback)},this.pollInterval)}}};be.prototype.queryPoll=function(e){var t=this;if(this._polling||this._pollDebounceId){this._pendingPoll?this._pendingPoll.push(e):this._pendingPoll=[e];return}this._polling=!0;var n=this._pendingPoll;this._pendingPoll=null,this.pollDebounce&&(this._pollDebounceId=setTimeout(function(){t._pollDebounceId=null,t._flushPoll()},this.pollDebounce)),clearTimeout(this._pollIntervalId);var r=Date.now();this.db.queryPoll(this.collection,this.query,this.options,function(i,o,s){if(i)return t._finishPoll(i,e,n);t._emitTiming("queryEmitter.poll",r),XE(t.extra,s)||(t.extra=s,t.onExtra(s));var u=vr(t.ids,o);if(u.length){t.ids=o;var l=e0(u);if(l.length){let p=function(h,y){if(h)return t._finishPoll(h,e,n);var m=t.backend._getSnapshotsFromMap(l,y),g=t.backend.SNAPSHOT_TYPES.current;t.backend._sanitizeSnapshots(t.agent,t.snapshotProjection,t.collection,m,g,function(w){if(w)return t._finishPoll(w,e,n);t._emitTiming("queryEmitter.pollGetSnapshotBulk",r);var v=t0(u,y);t.onDiff(v),t._finishPoll(w,e,n)})};var f=p,a={};a.agentCustom=t.agent.custom,t.db.getSnapshotBulk(t.collection,l,t.fields,a,p)}else t.onDiff(u),t._finishPoll(i,e,n)}else t._finishPoll(i,e,n)})};be.prototype._finishPoll=function(e,t,n){if(this._polling=!1,t&&t(e),n)for(var r=0;r<n.length;r++)t=n[r],t&&t(e);this._flushPoll()};be.prototype.queryPollDoc=function(e,t){var n=this,r=Date.now();this.db.queryPollDoc(this.collection,e,this.query,this.options,function(i,o){if(i)return t(i);n._emitTiming("queryEmitter.pollDoc",r);var s=n.ids.indexOf(e);if(s===-1&&o){var u=n.ids.push(e)-1,l={};l.agentCustom=n.agent.custom,n.db.getSnapshot(n.collection,e,n.fields,l,function(a,f){if(a)return t(a);var p=[f],h=n.backend.SNAPSHOT_TYPES.current;n.backend._sanitizeSnapshots(n.agent,n.snapshotProjection,n.collection,p,h,function(y){if(y)return t(y);n.onDiff([new vr.InsertDiff(u,p)]),n._emitTiming("queryEmitter.pollDocGetSnapshot",r),t()})});return}if(s!==-1&&!o)return n.ids.splice(s,1),n.onDiff([new vr.RemoveDiff(s,1)]),t();t()})};be.prototype.onError=be.prototype.onDiff=be.prototype.onExtra=be.prototype.onOp=function(){throw new Cv(ZE.ERR_QUERY_EMITTER_LISTENER_NOT_ASSIGNED,"Required QueryEmitter listener not assigned")};function e0(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(r instanceof vr.InsertDiff)for(var i=0;i<r.values.length;i++)t.push(r.values[i])}return t}function t0(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r];if(i instanceof vr.InsertDiff){for(var o=[],s=0;s<i.values.length;s++){var u=i.values[s];o.push(t[u])}n.push(new vr.InsertDiff(i.index,o))}else n.push(i)}return n}var kv=Ys.Duplex,n0=Ys.inherits,r0=Or,Pr=J;function dn(){this.readyState=0,this.stream=new Hi(this)}var i0=dn;dn.prototype._open=function(){this.readyState===0&&(this.readyState=1,this.onopen())};dn.prototype.close=function(e){this.readyState!==3&&(this.readyState=3,this.stream.push(null),this.onclose(e||"closed"))};dn.prototype.send=function(e){this.stream.push(JSON.parse(e))};dn.prototype.onmessage=Pr.doNothing;dn.prototype.onclose=Pr.doNothing;dn.prototype.onerror=Pr.doNothing;dn.prototype.onopen=Pr.doNothing;function Hi(e){kv.call(this,{objectMode:!0}),this.socket=e,this.on("error",function(t){r0.warn("ShareDB client message stream error",t),e.close("stopped")}),this.on("finish",function(){e.close("stopped")})}n0(Hi,kv);Hi.prototype.isServer=!0;Hi.prototype._read=Pr.doNothing;Hi.prototype._write=function(e,t,n){var r=this.socket;Pr.nextTick(function(){r.readyState===1&&(r.onmessage({data:JSON.stringify(e)}),n())})};var Ja=bi,o0=hn,Be=Pe,s0=bn,Ye=Be.CODES;function ue(e,t,n,r,i,o){this.backend=e,this.agent=t;var s=e.projections[n];this.index=n,this.projection=s,this.collection=s?s.target:n,this.id=r,this.op=i,this.options=o,this.extra=i.x,delete i.x,this.start=Date.now(),this._addOpMeta(),this.action=null,this.custom={},this.saveMilestoneSnapshot=null,this.suppressPublish=e.suppressPublish,this.maxRetries=e.maxSubmitRetries,this.retries=0,this.snapshot=null,this.ops=[],this.channels=null,this._fixupOps=[]}var Av=ue;ue.prototype.$fixup=function(e){if(this.action!==this.backend.MIDDLEWARE_ACTIONS.apply)throw new Be(Ye.ERR_FIXUP_IS_ONLY_VALID_ON_APPLY,"fixup can only be called during the apply middleware");if(this.op.del)throw new Be(Ye.ERR_CANNOT_FIXUP_DELETION,"fixup cannot be applied on deletion ops");var t=this.op.create?this.op.create.type:this.snapshot.type,n=s0.map[t];if(typeof n.compose!="function")throw new Be(Ye.ERR_TYPE_DOES_NOT_SUPPORT_COMPOSE,t+" does not support compose");this.op.create?this.op.create.data=n.apply(this.op.create.data,e):this.op.op=n.compose(this.op.op,e);var r={src:this.op.src,seq:this.op.seq,v:this.op.v,op:e};this._fixupOps.push(r)};ue.prototype.submit=function(e){var t=this,n=this.backend,r=this.collection,i=this.id,o=this.op,s={$submit:!0},u={};u.agentCustom=t.agent.custom,n.db.getSnapshot(r,i,s,u,function(l,a){if(l)return e(l);if(t.snapshot=a,t._addSnapshotMeta(),o.v==null){if(o.create&&a.type&&o.src){n.db.getCommittedOpVersion(r,i,a,o,null,function(p,h){if(p)return e(p);h==null?e(t.alreadyCreatedError()):(o.v=h,e(t.alreadySubmittedError()))});return}o.v=a.v}if(o.v===a.v)return t.apply(e);if(o.v>a.v)return e(t.newerVersionError());var f=o.v;n.db.getOpsToSnapshot(r,i,f,a,{metadata:!0},function(p,h){if(p)return e(p);if(h.length!==a.v-f)return e(t.missingOpsError());if(p=t._transformOp(h),p)return e(p);if(o.v!==a.v)return e(t.versionAfterTransformError());t.apply(e)})})};ue.prototype.apply=function(e){var t=this.projection;if(t&&!o0.isOpAllowed(this.snapshot.type,t.fields,this.op))return e(this.projectionError());this.channels=this.backend.getChannels(this.collection,this.id),this._fixupOps=[],delete this.op.m.fixup;var n=this;this.backend.trigger(this.backend.MIDDLEWARE_ACTIONS.apply,this.agent,this,function(r){if(r||(r=Ja.apply(n.snapshot,n.op),r))return e(r);n.commit(e)})};ue.prototype.commit=function(e){var t=this,n=this.backend;n.trigger(n.MIDDLEWARE_ACTIONS.commit,this.agent,this,function(r){if(r)return e(r);t._fixupOps.length&&(t.op.m.fixup=t._fixupOps),n.db.commit(t.collection,t.id,t.op,t.snapshot,t.options,function(i,o){if(i)return e(i);if(!o)return t.retry(e);if(!t.suppressPublish){var s=t.op;s.c=t.collection,s.d=t.id,s.m=void 0,t.collection!==t.index&&(s.i=t.index),n.pubsub.publish(t.channels,s)}t._shouldSaveMilestoneSnapshot(t.snapshot)&&t.backend.milestoneDb.saveMilestoneSnapshot(t.collection,t.snapshot),e()})})};ue.prototype.retry=function(e){if(this.retries++,this.maxRetries!=null&&this.retries>this.maxRetries)return e(this.maxRetriesError());this.backend.emit("timing","submit.retry",Date.now()-this.start,this),this.submit(e)};ue.prototype._transformOp=function(e){for(var t=this.snapshot.type,n=0;n<e.length;n++){var r=e[n];if(this.op.src&&this.op.src===r.src&&this.op.seq===r.seq)return r.m.fixup&&(this._fixupOps=r.m.fixup),this.alreadySubmittedError();if(this.op.v!==r.v)return this.versionDuringTransformError();var i=Ja.transform(t,this.op,r);if(i)return i;delete r.m,this.ops.push(r)}};ue.prototype._addOpMeta=function(){this.op.m={ts:this.start},this.op.create&&(this.op.create.type=Ja.normalizeType(this.op.create.type))};ue.prototype._addSnapshotMeta=function(){var e=this.snapshot.m||(this.snapshot.m={});this.op.create?e.ctime=this.start:this.op.del&&(this.op.m.data=this.snapshot.data),e.mtime=this.start};ue.prototype._shouldSaveMilestoneSnapshot=function(e){return this.saveMilestoneSnapshot===null?e&&e.v%this.backend.milestoneDb.interval===0:this.saveMilestoneSnapshot};ue.prototype.alreadySubmittedError=function(){return new Be(Ye.ERR_OP_ALREADY_SUBMITTED,"Op already submitted")};ue.prototype.rejectedError=function(){return new Be(Ye.ERR_OP_SUBMIT_REJECTED,"Op submit rejected")};ue.prototype.alreadyCreatedError=function(){return new Be(Ye.ERR_DOC_ALREADY_CREATED,"Invalid op submitted. Document already created")};ue.prototype.newerVersionError=function(){return new Be(Ye.ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT,"Invalid op submitted. Op version newer than current snapshot")};ue.prototype.projectionError=function(){return new Be(Ye.ERR_OP_NOT_ALLOWED_IN_PROJECTION,"Invalid op submitted. Operation invalid in projected collection")};ue.prototype.missingOpsError=function(){return new Be(Ye.ERR_SUBMIT_TRANSFORM_OPS_NOT_FOUND,"Op submit failed. DB missing ops needed to transform it up to the current snapshot version")};ue.prototype.versionDuringTransformError=function(){return new Be(Ye.ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM,"Op submit failed. Versions mismatched during op transform")};ue.prototype.versionAfterTransformError=function(){return new Be(Ye.ERR_OP_VERSION_MISMATCH_AFTER_TRANSFORM,"Op submit failed. Op version mismatches snapshot after op transform")};ue.prototype.maxRetriesError=function(){return new Be(Ye.ERR_MAX_SUBMIT_RETRIES_EXCEEDED,"Op submit failed. Exceeded max submit retries of "+this.maxRetries)};var ms=Pe,u0=Nr;function Nr(e,t,n){this.collection=e,this.snapshots=t,this.snapshotType=n,this.action=null,this.agent=null,this.backend=null,this._idToError=null}Nr.prototype.rejectSnapshotRead=function(e,t){this._idToError||(this._idToError={}),this._idToError[e.id]=t};Nr.prototype.rejectSnapshotReadSilent=function(e,t){this.rejectSnapshotRead(e,this.silentRejectionError(t))};Nr.prototype.silentRejectionError=function(e){return new ms(ms.CODES.ERR_SNAPSHOT_READ_SILENT_REJECTION,e)};Nr.prototype.hasSnapshotRejection=function(){return this._idToError!=null};Nr.prototype.getReadSnapshotsError=function(){var e=this.snapshots,t=this._idToError;if(e.length!==0){if(e.length===1){var n=t[e[0].id];return n||void 0}var r=new ms(ms.CODES.ERR_SNAPSHOT_READS_REJECTED);return r.idToError=t,r}};var Za=Fa,l0=Ud,a0=IE,Iv=at,f0=Ev,c0=xE,p0=Pv,ef=bi,Mv=hn,Tc=Lv,yr=Pe,h0=Ha,d0=i0,v0=Av,y0=u0,m0=J,xl=Or,mr=yr.CODES;function M(e){if(!(this instanceof M))return new M(e);Iv.EventEmitter.call(this),e||(e={}),this.db=e.db||new f0,this.pubsub=e.pubsub||new p0,this.extraDbs=e.extraDbs||{},this.milestoneDb=e.milestoneDb||new c0,this.projections={},this.suppressPublish=!!e.suppressPublish,this.maxSubmitRetries=e.maxSubmitRetries||null,this.presenceEnabled=!!e.presence,this.doNotForwardSendPresenceErrorsToClient=!!e.doNotForwardSendPresenceErrorsToClient,this.presenceEnabled&&!this.doNotForwardSendPresenceErrorsToClient&&xl.warn(`Broadcasting "sendPresence" middleware errors to clients is deprecated and will be removed in a future release. Disable this behaviour with:

new Backend({doNotForwardSendPresenceErrorsToClient: true})

`),this.middleware={},this.agentsCount=0,this.remoteAgentsCount=0,this.errorHandler=typeof e.errorHandler=="function"?e.errorHandler:function(t,n){xl.error(t)}}var _0=M;Iv.mixin(M);M.prototype.MIDDLEWARE_ACTIONS={afterWrite:"afterWrite",apply:"apply",commit:"commit",connect:"connect",op:"op",query:"query",readSnapshots:"readSnapshots",receive:"receive",reply:"reply",receivePresence:"receivePresence",sendPresence:"sendPresence",submit:"submit"};M.prototype.SNAPSHOT_TYPES={current:"current",byVersion:"byVersion",byTimestamp:"byTimestamp"};M.prototype.close=function(e){var t=4,n=this;function r(o){if(o)return e?e(o):n.emit("error",o);--t||e&&e()}this.pubsub.close(r),this.db.close(r),this.milestoneDb.close(r);for(var i in this.extraDbs)t++,this.extraDbs[i].close(r);r()};M.prototype.connect=function(e,t,n){var r=new d0;e?e.bindToSocket(r):e=new a0(r),r._open();var i=this.listen(r.stream,t);return e.agent=i,typeof n=="function"&&e.once("connected",function(){n(e)}),e};M.prototype.listen=function(e,t){var n=new l0(this,e);return this.trigger(this.MIDDLEWARE_ACTIONS.connect,n,{stream:e,req:t},function(r){if(r)return n.close(r);n._open()}),n};M.prototype.addProjection=function(e,t,n){if(this.projections[e])throw new Error("Projection "+e+" already exists");for(var r in n)if(n[r]!==!0)throw new Error("Invalid field "+r+" - fields must be {somekey: true}. Subfields not currently supported.");this.projections[e]={target:t,fields:n}};M.prototype.use=function(e,t){if(Array.isArray(e)){for(var n=0;n<e.length;n++)this.use(e[n],t);return this}var r=this.middleware[e]||(this.middleware[e]=[]);return r.push(t),this};M.prototype.trigger=function(e,t,n,r){n.action=e,n.agent=t,n.backend=this;var i=this.middleware[e];if(!i)return r();i=i.slice();var o=function(s){if(s)return r(s);var u=i.shift();if(!u)return r();u(n,o)};o()};M.prototype.submit=function(e,t,n,r,i,o){var s=this,u=new v0(this,e,t,n,r,i),l=function(f,p){s.emit("submitRequestEnd",f,u),o(f,p,u)},a=ef.checkOp(r);if(a)return l(a);s.trigger(s.MIDDLEWARE_ACTIONS.submit,e,u,function(f){if(f)return l(f);u.submit(function(p){if(p)return l(p);s.trigger(s.MIDDLEWARE_ACTIONS.afterWrite,e,u,function(h){if(h)return l(h);s._sanitizeOps(e,u.projection,u.collection,n,u.ops,function(y){if(y)return l(y);s.emit("timing","submit.total",Date.now()-u.start,u),l(y,u.ops)})})})})};M.prototype.sanitizeOp=function(e,t,n,r,i){var o=this.projections[t],s=o?o.target:t;this._sanitizeOp(e,o,s,n,r,i)};M.prototype._sanitizeOp=function(e,t,n,r,i,o){if(t)try{Mv.projectOp(t.fields,i)}catch(s){return o(s)}this.trigger(this.MIDDLEWARE_ACTIONS.op,e,{collection:n,id:r,op:i},o)};M.prototype._sanitizeOps=function(e,t,n,r,i,o){var s=this;Za.each(i,function(u,l){s._sanitizeOp(e,t,n,r,u,function(a){m0.nextTick(l,a)})},o)};M.prototype._sanitizeOpsBulk=function(e,t,n,r,i){var o=this;Za.forEachOf(r,function(s,u,l){o._sanitizeOps(e,t,n,u,s,l)},i)};M.prototype._sanitizeSnapshots=function(e,t,n,r,i,o){if(t)try{Mv.projectSnapshots(t.fields,r)}catch(u){return o(u)}var s=new y0(n,r,i);this.trigger(this.MIDDLEWARE_ACTIONS.readSnapshots,e,s,function(u){if(u)return o(u);s.hasSnapshotRejection()&&(u=s.getReadSnapshotsError()),u?o(u):o()})};M.prototype._getSnapshotProjection=function(e,t){return e.projectsSnapshots?null:t};M.prototype._getSnapshotsFromMap=function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++){var i=e[r];n[r]=t[i]}return n};M.prototype._getSanitizedOps=function(e,t,n,r,i,o,s,u){var l=this;s||(s={}),e&&(s.agentCustom=e.custom),l.db.getOps(n,r,i,o,s,function(a,f){if(a)return u(a);l._sanitizeOps(e,t,n,r,f,function(p){if(p)return u(p);u(null,f)})})};M.prototype._getSanitizedOpsBulk=function(e,t,n,r,i,o,s){var u=this;o||(o={}),e&&(o.agentCustom=e.custom),u.db.getOpsBulk(n,r,i,o,function(l,a){if(l)return s(l);u._sanitizeOpsBulk(e,t,n,a,function(f){if(f)return s(f);s(null,a)})})};M.prototype.getOps=function(e,t,n,r,i,o,s){typeof o=="function"&&(s=o,o=null);var u=Date.now(),l=this.projections[t],a=l?l.target:t,f=this,p={agent:e,index:t,collection:a,id:n,from:r,to:i},h=o&&o.opsOptions;f._getSanitizedOps(e,l,a,n,r,i,h,function(y,m){if(y)return s(y);f.emit("timing","getOps",Date.now()-u,p),s(null,m)})};M.prototype.getOpsBulk=function(e,t,n,r,i,o){typeof i=="function"&&(o=i,i=null);var s=Date.now(),u=this.projections[t],l=u?u.target:t,a=this,f={agent:e,index:t,collection:l,fromMap:n,toMap:r},p=i&&i.opsOptions;a._getSanitizedOpsBulk(e,u,l,n,r,p,function(h,y){if(h)return o(h);a.emit("timing","getOpsBulk",Date.now()-s,f),o(null,y)})};M.prototype.fetch=function(e,t,n,r,i){typeof r=="function"&&(i=r,r=null);var o=Date.now(),s=this.projections[t],u=s?s.target:t,l=s&&s.fields,a=this,f={agent:e,index:t,collection:u,id:n},p=r&&r.snapshotOptions||{};p.agentCustom=e.custom,a.db.getSnapshot(u,n,l,p,function(h,y){if(h)return i(h);var m=a._getSnapshotProjection(a.db,s),g=[y];a._sanitizeSnapshots(e,m,u,g,a.SNAPSHOT_TYPES.current,function(w){if(w)return i(w);a.emit("timing","fetch",Date.now()-o,f),i(null,y)})})};M.prototype.fetchBulk=function(e,t,n,r,i){typeof r=="function"&&(i=r,r=null);var o=Date.now(),s=this.projections[t],u=s?s.target:t,l=s&&s.fields,a=this,f={agent:e,index:t,collection:u,ids:n},p=r&&r.snapshotOptions||{};p.agentCustom=e.custom,a.db.getSnapshotBulk(u,n,l,p,function(h,y){if(h)return i(h);var m=a._getSnapshotProjection(a.db,s),g=a._getSnapshotsFromMap(n,y);a._sanitizeSnapshots(e,m,u,g,a.SNAPSHOT_TYPES.current,function(w){if(w)if(w.code===mr.ERR_SNAPSHOT_READS_REJECTED){for(var v in w.idToError)y[v]={error:w.idToError[v]};w=void 0}else y=void 0;a.emit("timing","fetchBulk",Date.now()-o,f),i(w,y)})})};M.prototype.subscribe=function(e,t,n,r,i,o){if(typeof i=="function"&&(o=i,i=null),i)return o(new yr(mr.ERR_DATABASE_METHOD_NOT_IMPLEMENTED,"Passing options to subscribe has not been implemented"));var s=Date.now(),u=this.projections[t],l=u?u.target:t,a=this.getDocChannel(l,n),f=this,p={agent:e,index:t,collection:l,id:n,version:r};f.pubsub.subscribe(a,function(h,y){if(h)return o(h);r==null?f.fetch(e,t,n,function(m,g){if(m)return y.destroy(),o(m);f.emit("timing","subscribe.snapshot",Date.now()-s,p),o(null,y,g)}):f._getSanitizedOps(e,u,l,n,r,null,null,function(m,g){if(m)return y.destroy(),o(m);f.emit("timing","subscribe.ops",Date.now()-s,p),o(null,y,null,g)})})};M.prototype.subscribeBulk=function(e,t,n,r){var i=Date.now(),o=this.projections[t],s=o?o.target:t,u=this,l={},a=Array.isArray(n),f=a?n:Object.keys(n),p={agent:e,index:t,collection:s,versions:n};Za.each(f,function(h,y){var m=u.getDocChannel(s,h);u.pubsub.subscribe(m,function(g,w){if(g)return y(g);l[h]=w,y()})},function(h){if(h)return Au(l),r(h);a?u.fetchBulk(e,t,f,function(y,m){y&&(Au(l),l=void 0,m=void 0);for(var g in m)m[g].error&&(l[g].destroy(),delete l[g]);u.emit("timing","subscribeBulk.snapshot",Date.now()-i,p),r(y,l,m)}):u._getSanitizedOpsBulk(e,o,s,n,null,null,function(y,m){if(y)return Au(l),r(y);u.emit("timing","subscribeBulk.ops",Date.now()-i,p),r(null,l,null,m)})})};function Au(e){for(var t in e)e[t].destroy()}M.prototype.queryFetch=function(e,t,n,r,i){var o=Date.now(),s=this;s._triggerQuery(e,t,n,r,function(u,l){if(u)return i(u);s._query(e,l,function(a,f,p){if(a)return i(a);s.emit("timing","queryFetch",Date.now()-o,l),i(null,f,p)})})};M.prototype.querySubscribe=function(e,t,n,r,i){var o=Date.now(),s=this;s._triggerQuery(e,t,n,r,function(u,l){if(u)return i(u);if(l.db.disableSubscribe)return i(new yr(mr.ERR_DATABASE_DOES_NOT_SUPPORT_SUBSCRIBE,"DB does not support subscribe"));var a=l.channels;if(l.channel&&(xl.warn(`[DEPRECATED] "query" middleware's context.channel is deprecated, use context.channels instead. Read more: https://share.github.io/sharedb/middleware/actions#query`),a=[l.channel]),!a||!a.length)return i(new yr(mr.ERR_QUERY_CHANNEL_MISSING,"Required minimum one query channel."));var f=[];function p(){f.forEach(function(y){y.destroy()})}function h(){if(r.ids){var y=new Tc(l,f,r.ids);s.emit("timing","querySubscribe.reconnect",Date.now()-o,l),i(null,y);return}s._query(e,l,function(m,g,w){if(m)return p(),i(m);var v=g0(g),c=new Tc(l,f,v,w);s.emit("timing","querySubscribe.initial",Date.now()-o,l),i(null,c,g,w)})}a.forEach(function(y){s.pubsub.subscribe(y,function(m,g){if(m)return p(),i(m);f.push(g);var w=f.length===a.length;w&&h()})})})};M.prototype._triggerQuery=function(e,t,n,r,i){var o=this.projections[t],s=o?o.target:t,u=o&&o.fields,l={index:t,collection:s,projection:o,fields:u,channels:[this.getCollectionChannel(s)],query:n,options:r,db:null,snapshotProjection:null},a=this;a.trigger(a.MIDDLEWARE_ACTIONS.query,e,l,function(f){if(f)return i(f);if(l.db=r.db?a.extraDbs[r.db]:a.db,!l.db)return i(new yr(mr.ERR_DATABASE_ADAPTER_NOT_FOUND,"DB not found"));l.snapshotProjection=a._getSnapshotProjection(l.db,o),i(null,l)})};M.prototype._query=function(e,t,n){var r=this;t.db.query(t.collection,t.query,t.fields,t.options,function(i,o,s){if(i)return n(i);r._sanitizeSnapshots(e,t.snapshotProjection,t.collection,o,r.SNAPSHOT_TYPES.current,function(u){n(u,o,s)})})};M.prototype.getCollectionChannel=function(e){return e};M.prototype.getDocChannel=function(e,t){return e+"."+t};M.prototype.getChannels=function(e,t){return[this.getCollectionChannel(e),this.getDocChannel(e,t)]};M.prototype.fetchSnapshot=function(e,t,n,r,i){var o=Date.now(),s=this,u=this.projections[t],l=u?u.target:t,a={agent:e,index:t,collection:l,id:n,version:r};this._fetchSnapshot(l,n,r,function(f,p){if(f)return i(f);var h=s._getSnapshotProjection(s.db,u),y=[p],m=s.SNAPSHOT_TYPES.byVersion;s._sanitizeSnapshots(e,h,l,y,m,function(g){if(g)return i(g);s.emit("timing","fetchSnapshot",Date.now()-o,a),i(null,p)})})};M.prototype._fetchSnapshot=function(e,t,n,r){var i=this.db,o=this,s=n===null;if(s)return o.db.getSnapshot(e,t,null,null,function(u,l){if(u)return r(u);r(null,l)});this.milestoneDb.getMilestoneSnapshot(e,t,n,function(u,l){if(u)return r(u);var a=l?l.v:0;i.getOps(e,t,a,n,null,function(f,p){if(f)return r(f);o._buildSnapshotFromOps(t,l,p,function(h,y){if(h)return r(h);if(n>y.v)return r(new yr(mr.ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT,"Requested version exceeds latest snapshot version"));r(null,y)})})})};M.prototype.fetchSnapshotByTimestamp=function(e,t,n,r,i){var o=Date.now(),s=this,u=this.projections[t],l=u?u.target:t,a={agent:e,index:t,collection:l,id:n,timestamp:r};this._fetchSnapshotByTimestamp(l,n,r,function(f,p){if(f)return i(f);var h=s._getSnapshotProjection(s.db,u),y=[p],m=s.SNAPSHOT_TYPES.byTimestamp;s._sanitizeSnapshots(e,h,l,y,m,function(g){if(g)return i(g);s.emit("timing","fetchSnapshot",Date.now()-o,a),i(null,p)})})};M.prototype._fetchSnapshotByTimestamp=function(e,t,n,r){var i=this.db,o=this.milestoneDb,s=this,u,l=0,a=null,f=n===null;if(f)return s.db.getSnapshot(e,t,null,null,function(p,h){if(p)return r(p);r(null,h)});o.getMilestoneSnapshotAtOrBeforeTime(e,t,n,function(p,h){if(p)return r(p);u=h,h&&(l=h.v),o.getMilestoneSnapshotAtOrAfterTime(e,t,n,function(y,m){if(y)return r(y);m&&(a=m.v);var g={metadata:!0};i.getOps(e,t,l,a,g,function(w,v){if(w)return r(w);E0(v,n),s._buildSnapshotFromOps(t,u,v,r)})})})};M.prototype._buildSnapshotFromOps=function(e,t,n,r){var i=t||new h0(e,0,null,void 0,null),o=ef.applyOps(i,n,{_normalizeLegacyJson0Ops:!0});r(o,i)};M.prototype.transformPresenceToLatestVersion=function(e,t,n){if(!t.c||!t.d)return n(null,t);this.getOps(e,t.c,t.d,t.v,null,function(r,i){if(r)return n(r);for(var o=0;o<i.length;o++){var s=i[o],u=s.src===t.src,l=ef.transformPresence(t,s,u);if(l)return n(l)}n(null,t)})};function g0(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].id);return t}function E0(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=r.m&&r.m.ts;if(i>t){e.length=n;return}}}var xv=qa,sn=Pe,Nt=J,In=sn.CODES,S0=vn;function vn(e){xv.call(this,e),this._milestoneSnapshots={}}vn.prototype=Object.create(xv.prototype);vn.prototype.getMilestoneSnapshot=function(e,t,n,r){if(!this._isValidVersion(n))return Nt.nextTick(r,new sn(In.ERR_MILESTONE_ARGUMENT_INVALID,"Invalid version"));var i=O0(n);this._findMilestoneSnapshot(e,t,i,r)};vn.prototype.saveMilestoneSnapshot=function(e,t,n){if(n=n||(function(i){if(i)return this.emit("error",i);this.emit("save",e,t)}).bind(this),!e)return n(new sn(In.ERR_MILESTONE_ARGUMENT_INVALID,"Missing collection"));if(!t)return n(new sn(In.ERR_MILESTONE_ARGUMENT_INVALID,"Missing snapshot"));var r=this._getMilestoneSnapshotsSync(e,t.id);r.push(t),r.sort(function(i,o){return i.v-o.v}),Nt.nextTick(n,null)};vn.prototype.getMilestoneSnapshotAtOrBeforeTime=function(e,t,n,r){if(!this._isValidTimestamp(n))return Nt.nextTick(r,new sn(In.ERR_MILESTONE_ARGUMENT_INVALID,"Invalid timestamp"));var i=w0(n);this._findMilestoneSnapshot(e,t,i,r)};vn.prototype.getMilestoneSnapshotAtOrAfterTime=function(e,t,n,r){if(!this._isValidTimestamp(n))return Nt.nextTick(r,new sn(In.ERR_MILESTONE_ARGUMENT_INVALID,"Invalid timestamp"));var i=R0(n);this._findMilestoneSnapshot(e,t,i,function(o,s){if(o)return Nt.nextTick(r,o);var u=s&&s.m&&s.m.mtime;n!==null&&u<n&&(s=void 0),Nt.nextTick(r,null,s)})};vn.prototype._findMilestoneSnapshot=function(e,t,n,r){if(!e)return Nt.nextTick(r,new sn(In.ERR_MILESTONE_ARGUMENT_INVALID,"Missing collection"));if(!t)return Nt.nextTick(r,new sn(In.ERR_MILESTONE_ARGUMENT_INVALID,"Missing ID"));for(var i=this._getMilestoneSnapshotsSync(e,t),o,s=0;s<i.length;s++){var u=i[s];if(n(o,u))break;o=u}Nt.nextTick(r,null,o)};vn.prototype._getMilestoneSnapshotsSync=function(e,t){var n=this._milestoneSnapshots[e]||(this._milestoneSnapshots[e]={});return n[t]||(n[t]=[])};function O0(e){return function(t,n){return e===null?!1:n.v>e}}function R0(e){return function(t){if(e===null)return!1;var n=t&&t.m&&t.m.mtime;return n>=e}}function w0(e){return function(t,n){if(e===null)return!!t;var r=n&&n.m&&n.m.mtime;return r>e}}var ce=_0,T0=ce;ce.Agent=Ud;ce.Backend=ce;ce.DB=_v;ce.Error=Pe;ce.logger=Or;ce.MemoryDB=Ev;ce.MemoryMilestoneDB=S0;ce.MemoryPubSub=Pv;ce.MESSAGE_ACTIONS=gt.ACTIONS;ce.MilestoneDB=qa;ce.ot=bi;ce.projections=hn;ce.PubSub=Tv;ce.QueryEmitter=Lv;ce.SubmitRequest=Av;ce.types=bn;const D0=Dc(T0),P0="ws://localhost:3001",N0="doc-collection",C0="doc-id",L0=()=>{const[e,t]=Zr.useState(!1);return Zr.useEffect(()=>{const n=new y_(P0),r=new D0.Connection(n);console.log({connection:r});const i=r.get(N0,C0);return i.subscribe(o=>{if(o)return console.error(o);console.log("Document type:",i.type),i.type||i.create({counter:0},s=>{s&&console.error(s)})}),i.on("op",()=>{console.log("count",i.data.counter)}),window.increment=()=>{i.submitOp([{p:["counter"],na:1}])},n.addEventListener("open",()=>{console.log("WebSocket connection established"),t(!0)}),n.addEventListener("message",o=>{console.log(JSON.parse(o.data))}),n.addEventListener("close",()=>{console.log("WebSocket connection closed"),t(!1)}),n.addEventListener("error",o=>{console.error("WebSocket error:",o),t(!1)}),()=>{n.close()}},[]),Iu.jsx("div",{children:e?"Connected to ShareDB":"Not connected to ShareDB"})};Mu.createRoot(document.getElementById("root")).render(Iu.jsx(Jv.StrictMode,{children:Iu.jsx(L0,{})}));
